function GetAreaLabel(a) { var b = a; return "bmeHeader" == a ? b = HEADER_SECTION : "bmePreHeader" == a ? b = PREHEADER_SECTION : "bmeBody" == a ? b = BODY_SECTION : "bmeFooter" == a ? b = FOOTER_SECTION : "bmeLeftColumn" == a ? b = COLUMN1_SECTION : "bmeRightColumn" == a ? b = COLUMN2_SECTION : "bmeColumn1" == a ? b = COLUMN1_SECTION : "bmeColumn2" == a ? b = COLUMN2_SECTION : "bmeColumn3" == a ? b = COLUMN3_SECTION : "bmePreFooter" == a && (b = PREFOOTER_SECTION), b }

function AreaFocus() { $("#toolGuideBtn", $("#dvEditTool")).removeClass("tool-selected"), $("#toolGuideBtn").html(JS_SHOW_BLOCKS), IsDropping && $(".areaborder").show() }

function AreaHiLiteRender() { $("#_BME_dvEditArea .areaborder").remove();
    $("." + containerBlockClass).each(function () { var a = $(this).attr("name").replace("area_border_", ""),
            b = "";
        b += "<div class='areaborder drag-block-wrapper' name='area_border_" + $(this).attr("name") + "'>", b += "</div>", b += "<div class='areaborder drag-block-label' name='area_name_" + $(this).attr("name") + "'>", b += GetAreaLabel(a), b += "</div>", $(this).prepend(b) }) }

function AreaDeHiLite() { $(".areaborder").hide(), $("#ancAreaDD").html(JS_SHOW_AREAS), $("#ancAreaDD").removeClass("tool-selected"), $(".guideBorder").css("display", ""), $(".guideOption").css("display", "") }

function AreaHiLite(a) { $(".areaborder").show(), a && ($("#ancAreaDD").html(JS_HIDE_AREAS), $("#ancAreaDD").addClass("tool-selected")), $(".guideBorder").hide(), $(".guideOption").hide() }

function blockAssignHeight(a, b, c) { var d = 0,
        e = 0,
        f = $("#" + a),
        g = !1;
    $("img", f).each(function () { $(this).attr("src") && $(this).attr("src").match(/(gif|png|jpg|jpeg)$/) && e++ }), "undefined" == typeof c && (c = !1), null == c && (c = !1), c ? _blockAssignHeight(f, b) : $("img", f).each(function () { $(this).on("load", function () { $(this).attr("src") && $(this).attr("src").match(/(gif|png|jpg|jpeg)$/) && (d++, d == e && 0 == g && (g = !0, _blockAssignHeight(f, b))) }) }) }

function _blockAssignHeight(a, b) { if ("imagecaption" == b) { var c = ($(".bmeImageContainer", a).length, $(".bmeImageContainerRow", a).length),
            d = 0,
            e = "";
        d = 1 == c ? 1 : 0, e = "left" == $(".bmeImageTable", a).attr("align") || "right" == $(".bmeImageTable", a).attr("align") ? "left" : "top", $(".bmeImageTable", a).attr("height", "").css("height", ""), $("td[name=bmeImgHolder]", $(".bmeImageTable", a)).attr("height", ""), $(".bmeImageContainerRow", a).each(function () { f = 0, g = 0, 1 == $(".bmeImageContainer", $(this)).length ? "left" == e ? $("table.bmeCaptionTable", $(this)).each(function () { g = $(this).height(), g > f && (f = g) }) : $("table.bmeImageTable", $(this)).each(function () { g = $(this).height(), g > f && (f = g) }) : $("table.bmeImageTable", $(".bmeImageContainer", $(this))).each(function () { g = $(this).height(), g > f && (f = g) }), $(".bmeImageTable", $(this)).attr("height", f), $("td[name=bmeImgHolder]", $(".bmeImageTable", $(this))).attr("height", f) }) } else if ("card" == b) { var f = 0,
            g = 0;
        $(".bmeImageTable", a).css("height", ""), $("td[name=bmeImgHolder]", $(".bmeImageTable", a)).attr("height", ""); var h = "top"; if (h = $("table", $(".bmeImageContainer", a)).first().hasClass("bmeCaptionTable") ? "top" : "left" == $(".bmeImageTable", a).attr("align") ? "right" : "right" == $(".bmeImageTable", a).attr("align") ? "left" : "bottom", "left" == h || "right" == h) { var i = $(".bmeImageTable", a).attr("dimension"),
                j = !0; "undefined" != typeof i && "100%" == i && (j = !1), 1 == j && "100%" != $(".bmeImageTable", a).attr("width") && ($("table", $(".bmeImageContainer", a)).attr("height", ""), $("td[name=bmeImgHolder]", $(".bmeImageTable", a)).attr("height", ""), $("table", $(".bmeImageContainer", a)).each(function () { g = $(this).height(), g > f && (f = g) }), f > 0 && ($(".bmeImageTable", a).css("height", parseWidth(f) + "px"), $("td[name=bmeImgHolder]", $(".bmeImageTable", a)).attr("height", parseWidth(f) - 40), $(".bmeImageTable", a).attr("height", parseWidth(f)))) } } else if ("group" == b) { var f = 0,
            g = 0;
        $(".bmeImageTable", a).css("height", ""), $(".bmeImageContainerRow", a).each(function () { g = 0, f = 0, $(".bmeImageTable", $(this)).length > 1 && ($(".bmeImageTable", $(this)).each(function () { g = $(this).height(), g > f && g > 0 && (f = g) }), f > 0 && $(".bmeImageTable", $(this)).css("height", f)) }) } }

function applyLineHeight(a, b) { var c = $("<div />"); return $(c).append(a), 0 == $("div", $(c)).length && ($(c).empty(), $(c).append("<div>" + a + "</div>")), $("div", $(c)).css("line-height", b), $("p", $(c)).css("line-height", b), $("span", $(c)).css("line-height", b), a = $(c).html(), $(c).empty(), c = null, a }

function parseWidth(a) { return null != a && "undefined" != typeof a || (a = "0"), a.toString().indexOf("px") != -1 && (a = a.replace("px", "")), "" == a.toString() && (a = "0"), a.toString().indexOf("%") != -1 && (a = a.replace("%", "")), parseInt(a) }

function _changeCaptionFocus(a) { var b = tinymce.activeEditor.id; if (b != lastActiveEditorID) { if (null != lastActiveEditorID) { for (var c = $("#" + b); !$(c).hasClass("bmeImageContainer") && !$(c).hasClass("bmeImageContainer");) c = $(c).parent();
            blkObjectData.selectImageEdit(c) } lastActiveEditorID = b } }

function LostFocusBlock(a) { $(".blk_shadow").removeClass("blk_shadow"), $(".blk_edit").removeClass("blk_edit").css({ width: "", overflow: "" }), $("ul.content-block-nav").remove(), $(".colorpicker_layer").addClass("hidden"), detectEditorInit = null, detectEditorLoad = null, detectEditorFocus = null, currentEditID = null, enableGuide(1) }

function CancelBlock(a) { if ($("#dv_" + currentEditID).html(orgBlockContent), "blk_footer" == $("table", "#" + a).attr("name")) { var b = $("img[name=bmeBadgeImage]", $("#dv_" + currentEditID)).attr("src");
        $("li", "#ulBadgeList").removeClass("selected"), $("li", "#ulBadgeList").each(function () { $("img", $(this)).attr("src") == b && $(this).addClass("selected") }); var c = new Object;
        c.Badge = b, bmeAjax.AuthPost({ url: "/Emails/" + _EID, type: "PATCH", data: { Detail: c }, success: function (a) { CurrentBadge = b }, error: function (a, b, c) { alert(b) } }) } LostFocusBlock(a) }

function SaveBlock(a) { var b = null,
        c = 0,
        d = "";
    $("div." + wrapperBlockClass + "#" + a).each(function () { d = FixContentHTML($(this).html()), $(this).html(d), d = CleanContentHTML(d), d = fixLoadTextContent(d), b = { id: a, divid: $(this).attr("id"), code: d, parent: $(this).parent().attr("name"), cntr: c } }), bmeAjax.AuthPost({ url: "/Emails/" + _EID + "/Block", type: "PATCH", data: { Block: JSON.stringify(b) } }), LostFocusBlock(a) }

function blockColorHandler() { $("[name=bmePreHeader]", frameObj).length > 0 ? $("#stylePreHeader").removeClass("hidden") : $("#stylePreHeader").addClass("hidden"), $("[name=bmeHeader]", frameObj).length > 0 ? $("#styleHeader").removeClass("hidden") : $("#styleHeader").addClass("hidden"), $("[name=bmeBody]", frameObj).length > 0 ? $("#styleBody").removeClass("hidden") : $("#styleBody").addClass("hidden"), $("[name=bmeFooter]", frameObj).length > 0 ? $("#styleFooter").removeClass("hidden") : $("#styleFooter").addClass("hidden"), $("#styleColumn1").addClass("hidden"), $("#styleColumn2").addClass("hidden"), $("#styleColumn3").addClass("hidden"), $("[name=bmeLeftColumn]", frameObj).length > 0 && $("#styleColumn1").removeClass("hidden"), $("[name=bmeRightColumn]", frameObj).length > 0 && $("#styleColumn2").removeClass("hidden"), $("[name=bmeColumn1]", frameObj).length > 0 && $("#styleColumn1").removeClass("hidden"), $("[name=bmeColumn2]", frameObj).length > 0 && $("#styleColumn2").removeClass("hidden"), $("[name=bmeColumn3]", frameObj).length > 0 && $("#styleColumn3").removeClass("hidden"), $("[name=bmePreFooter]", frameObj).length > 0 && $("#stylePreFooter").removeClass("hidden") }

function GetBlockLabel(a) { var b = a; return "blk_text" == a ? b = JS_BLOCK_TEXT : "blk_divider" == a ? b = JS_BLOCK_DIVIDER : "blk_social_follow" == a ? b = JS_BLOCK_SOCIAL_FOLLOW : "blk_social_share" == a ? b = JS_BLOCK_SOCIAL_SHARE : "blk_button" == a ? b = JS_BLOCK_BUTTON : "blk_boxtext" == a ? b = JS_BLOCK_BOX_TEXT : "blk_group" == a ? b = JS_BLOCK_IMAGE_GROUP : "blk_card" == a ? b = JS_BLOCK_IMAGE_CARD : "blk_image" == a ? b = JS_BLOCK_IMAGE : "blk_video" == a ? b = JS_BLOCK_VIDEO : "blk_imagecaption" == a ? b = JS_BLOCK_IMAGE_CAPTION : "blk_footer" == a ? b = JS_BLOCK_FOOTER : "blk_permission" == a ? b = JS_BLOCK_PERMISSION : "blk_rss_head" == a ? b = JS_BLOCK_RSS_HEAD : "blk_rss_feed" == a && (b = JS_BLOCK_RSS_FEED), b }

function GetBlockID(a) { var b = $(a).attr("name"); if ("blk_blank" == b) { var c = ""; if ("" == c || "undefined" == typeof c) { for (var d = 1; d < 1e3; d++) null == $("#dv_" + d, frameObj).html() && (c = "dv_" + d, d = 1001); return $(a).attr("id", c), c } } for (var e = $(a).parent(), f = $(e).attr("id");
        "undefined" == typeof f && null != $(e).html();) e = $(e).parent(), f = $(e).attr("id"); return "_BME_dvEditArea" == f && (f = SetWidgetBlockID(a)), f }

function AddBlock(a, b, c, d, e, f) { null != b ? "undefined" != typeof e && 0 != e ? $(a).insertAfter($(e, b)) : $(a).appendTo(b, frameObj) : null != c && (newobjectcreate = 1, $(c).length > 0 ? "blank" == f ? $(c, frameObj).prepend(a) : $(c, frameObj).append(a) : $("table[." + rootBlockClass + "]:first", frameObj).append(a)) }

function bindNewBlockDrag() { var a = document.getElementById("dvContentBlockList");
    Sortable.create(a, { group: { name: "shared", pull: "clone", put: !1, revertClone: !0 }, scrollSensitivity: 100, forceFallback: forceFallbackValue, sort: !1, fallbackOnBody: !0, onStart: function (a) { $("body").addClass("is-grabbing"), $("#_BME_dvEditArea").addClass("sortable-active"), $(".blk_container").removeClass("sortable-active-section"), $(a.to).closest(".blk_container").addClass("sortable-active-section"), IsDropping = !0, AreaFocus() }, onMove: function (a) { $(".blk_container").removeClass("sortable-active-section"), $(a.to).closest(".blk_container").addClass("sortable-active-section"), checkBlankArea() }, onEnd: function (a) { $("body").removeClass("is-grabbing"), $("#_BME_dvEditArea").removeClass("sortable-active"), IsDropping = !1, AreaDeHiLite(), $(".blk_container").removeClass("sortable-active-section"), checkBlankArea() } }) }

function getActiveAreas() { for (var a = ["bmePreHeader", "bmeHeader", "bmeBody", "bmeLeftColumn", "bmeRightColumn", "bmeColumn1", "bmeColumn2", "bmeColumn3", "bmePreFooter", "bmeFooter"], b = 0, c = a.length; b < c; b++) { var d = document.getElementById(a[b]);
        d && activeAreas.push(d) } }

function bindBlockDrag(a) { getActiveAreas(); for (var b = 0, c = activeAreas.length; b < c; b++) { var d = activeAreas[b];
        Sortable.create(d, { animation: 150, group: "shared", handle: ".dragHandle", draggable: ".blk_wrapper", scrollSensitivity: 50, forceFallback: forceFallbackValue, onStart: function (a) { $("#_BME_dvEditArea").addClass("sortable-active"), $(".blk_container").removeClass("sortable-active-section"), $(a.to).closest(".blk_container").addClass("sortable-active-section"), IsDropping = !0, AreaFocus() }, onMove: function (a) { $("body").addClass("is-grabbing"), $(".blk_container").removeClass("sortable-active-section"), $(a.to).closest(".blk_container").addClass("sortable-active-section"), checkBlankArea() }, onEnd: function (a) { $("body").removeClass("is-grabbing"), $("#_BME_dvEditArea").removeClass("sortable-active"), IsDropping = !1, AreaDeHiLite(), $(".blk_container").removeClass("sortable-active-section"), checkBlankArea(); var b = $(a.item).attr("id");
                b && (currentWidgetID = b, ResizeBlocks(!0)), SaveEmail(4), checkBlockScroll() }, onAdd: function (a) { $(a.item).attr("wtype") && receiveNewBlock($(a.item)) } }) } }

function getNewBlockWrapper(a, b, c, d) { var e = ""; return e += '<div id="' + a + '" class="' + wrapperBlockClass + '">', "true" == d && (e += "<div class='guideBorder'></div>", e += template_guideControls(b, a)), e += c, e += "</div>" }

function receiveNewBlock(a) { var b = null;
    newWidgetType = a.attr("wtype"), "undefined" != newWidgetType && (b = GetBlockCode(newWidgetType, a.width())); var c = null,
        d = "";
    null != b && (c = SetWidgetBlockID(), d = getNewBlockWrapper(c, $(b).attr("name"), b, "true"), a.replaceWith(d), currentWidgetID = c), checkBlankArea(), IsDropping = !1, $(".areaborder").hide(), AreaFocus(!0), ResizeBlocks(!0), null != $("#" + c).html() && editBlockHandler("", "", c), SaveEmail(4), checkBlockScroll() }

function GetBlockCode(a, b) { var c = ""; if ("text" == a || "blk_text" == a) var d = new Block_Text;
    else if ("boxtext" == a || "blk_boxtext" == a) { var d = new Block_BoxText;
        d.width = b } else if ("divider" == a || "blk_divider" == a) var d = new Block_Divider;
    else if ("socialbutton" == a || "blk_social_follow" == a) var d = new Block_SocialFollow;
    else if ("socialshare" == a || "blk_social_share" == a) var d = new Block_SocialShare;
    else if ("button" == a || "blk_button" == a) var d = new Block_Button;
    else if ("blank" == a || "blk_blank" == a) var d = new Block_Blank;
    else if ("image" == a || "blk_image" == a) var d = new Block_Image;
    else if ("video" == a || "blk_video" == a) var d = new Block_Video;
    else if ("imagecard" == a || "blk_card" == a) { var d = new Block_Card;
        d.width = b } else if ("imagegroup" == a || "blk_group" == a) var d = new Block_Group;
    else if ("righttext" == a || "lefttext" == a || "bottomtext" == a || "toptext" == a || "blk_imagecaption" == a) { var d = new Block_ImageCaption;
        d.aligntype = a.replace("text", "") } else if ("footer" == a) var d = new Block_Footer;
    else if ("permission" == a) var d = new Block_Permission;
    else if ("rsshead" == a) var d = new Block_RSSHead;
    else if ("rssfeed" == a) var d = new Block_RSSFeed;
    else if ("navbar" == a) var d = new Block_NavBar; return "undefined" != typeof d && (c = d.getHTML()), c }

function SetWidgetBlockID(a) { for (var b = "", c = 1; c < 1e3; c++) null == $("#dv_" + c, frameObj).html() && (b = "dv_" + c, c = 1001); return b }

function editBlockCode(a) { $(a).hasClass("blk_wrapper") || (a = getWrapper(a)), a = $(".blk", a), $("#dvNormalToolbar").addClass("hidden"), $(".editor-sidebar, .editor-main").removeClass("bar-visible"), $(".editor-main").removeClass("editor-full"), currentEdit = $(a).closest(".blk_wrapper").attr("id"), prepareEdit(currentEdit) }

function copyBlockHandler(a, b) { b.preventDefault(), b.stopPropagation(), changesDone = !0; var c = $(a).closest(".blk_wrapper"); if (c) { var d = SetWidgetBlockID(),
            e = $(c).clone().attr("id", d);
        e.find(".guideOption").attr("boxid", d.replace("dv_", "")), $(e).insertAfter(c) } null == _editBlock && SaveEmail(4) }

function deleteBlockHandler(a, b) { b.preventDefault(), b.stopPropagation(); var c = $(a).closest(".blk_wrapper").attr("id");
    changesDone = !0, c && ($("#dialog-deleteblock").attr("data-blockid", c), $("#dialog-deleteblock").modal("show")) }

function confirmDeleteBlock() { var a = $("#dialog-deleteblock").attr("data-blockid");
    a && (deleteContentBlock(a), $("#dialog-deleteblock").modal("hide")) }

function deleteContentBlock(a) { purge($("#" + a)), $("#" + a).remove(), null == _editBlock && SaveEmail(4), checkBlankArea() }

function BlockObject(a) {
    function b(a) { this.object.renderSetting(a) }

    function c(a) { this.object.setWidth(a) }

    function d(a) { this.object.resetWidth(a) } this.object = new Object, this.setWidth = c, this.resetWidth = d, this.renderSetting = b; var e = $(a).attr("name"),
        f = !0; return "blk_text" == e ? this.object = new Block_Text : "blk_boxtext" == e ? this.object = new Block_BoxText : "blk_divider" == e ? this.object = new Block_Divider : "blk_social_follow" == e ? this.object = new Block_SocialFollow : "blk_social_share" == e ? this.object = new Block_SocialShare : "blk_blank" == e ? this.object = new Block_Blank : "blk_button" == e ? this.object = new Block_Button : "blk_image" == e ? this.object = new Block_Image : "blk_video" == e ? this.object = new Block_Video : "blk_card" == e ? this.object = new Block_Card : "blk_imagecaption" == e ? this.object = new Block_ImageCaption : "blk_group" == e ? this.object = new Block_Group : "blk_footer" == e ? (this.object = new Block_Footer, UpdateFooterBadge()) : "blk_permission" == e ? this.object = new Block_Permission : "blk_rss_head" == e ? this.object = new Block_RSSHead : "blk_rss_feed" == e ? this.object = new Block_RSSFeed : "blk_navbar" == e ? this.object = new Block_NavBar : f = !1, f === !0 && (this.object.load(a), "blk_footer" == e && UpdateFooterBadge()), this.object }

function BlockCodeFixes() { var a = $('table[name="blk_rss_feed"]'); if (!$(a).parent().hasClass("blk_wrapper")) { $(a).appendTo($("#bmePreFooter")); var b = getNewBlockWrapper(SetWidgetBlockID(), "blk_rss_feed", $(a).clone().wrap("<div />").parent().html());
        $(a).replaceWith(b) } }

function ResizeBlocksCalculation(a, b) { var c = a,
        d = c; if (null != $(d).html()) { for (; 0 == $(d).hasClass("blk_container") && null != $(d).html() && "_BME_dvEditArea" != $(d).attr("id");) d = $(d).parent(); if (null != $(d).html() && "_BME_dvEditArea" != $(d).attr("id")) { var e = $(d).closest(".blk_container").attr("name");
            resizeW = 0, "bmeLeftColumn" == e || "bmeRightColumn" == e ? resizeW = 300 : "bmeColumn1" == e ? "onethree-col" == layoutType ? resizeW = 200 : "leftsb" == layoutType ? resizeW = 180 : "rightsb" == layoutType && (resizeW = 420) : "bmeColumn2" == e ? "onethree-col" == layoutType ? resizeW = 200 : "leftsb" == layoutType ? resizeW = 420 : "rightsb" == layoutType && (resizeW = 180) : "bmeColumn3" == e ? resizeW = 200 : (resizeW = $(d).width(), resizeW > 195 && resizeW < 205 && (resizeW = 200)), $(d).hasClass("bmeHolder") && (resizeW = 600); var f = BlockObject(c);
            jQuery.isEmptyObject(f) || f.setWidth(resizeW) } } }

function checkLayoutType() { if ($("#_BME_dvEditArea").find("#bmeColumn3").length) layoutType = "onethree-col";
    else { var a = $("#_BME_dvEditArea .blk_parent1 .tdPart:first").attr("width"); "30%" == a ? layoutType = "leftsb" : "70%" == a && (layoutType = "rightsb") } }

function ResizeBlocks(a) { if (checkLayoutType(), a === !0) { var b = $("#" + currentWidgetID).find(".blk");
        ResizeBlocksCalculation(b) } else $(".blk", frameObj).each(function () { var a = $(this);
        ResizeBlocksCalculation(a) }) }

function prepareEdit(a) { $(".blk_wrapper").removeClass("blk_shadow").addClass("blk_shadow"), $("#" + a).removeClass("blk_shadow"), $(".blk_edit").removeClass("blk_edit").css({ width: "", overflow: "" }); var b = $("#" + a).width() - 4;
    $("#" + a).addClass("blk_edit").css({ width: b }), orgBlockContent = $("#" + a).html(), SetupSettings() }

function editBlockHandler(a, b, c) { var d = ""; if (c ? d = c : ($("#ancDesign").parent().hasClass("selected") && SaveEmail(4), d = $(a).closest(".blk_wrapper").attr("id")), d && (d = d.replace("dv_", "")), null != $("#dv_" + d).html() && $("#dv_" + d).html()) { if (d == currentEditID || !CheckLoaded()) return;
        currentEditID = d, lastActiveEditorID = null, unCheckGuide(), enableGuide(-1), forceHideGuide(), editBlockCode($("#dv_" + d)), d = null } }

function hideGuide() { $(".guideBorder", frameObj).addClass("hidden"), $(".guideBlockTitle", frameObj).addClass("hidden"), $(".guideOption", frameObj).addClass("hidden") }

function checkGuide() { return $("#toolGuideBtn", toolbarCtrl).hasClass("tool-selected") }

function unCheckGuide() { $("#toolGuideBtn", toolbarCtrl).removeClass("tool-selected"), $("#toolGuideBtn").html(JS_SHOW_BLOCKS) }

function enableGuide(a) { a == -1 ? $("#toolGuideBtn").addClass("hidden") : $("#toolGuideBtn").removeClass("hidden") }

function refreshGuide() { var a = 0,
        b = 0,
        c = "",
        d = "",
        e = "";
    $("." + rootBlockClass).each(function () { if (d = this, e = $(d).parent(), e.hasClass("blk_wrapper")) { a = $(d).position().top, b = $(d).position().left, blockName = $(d).attr("name"); var f = "";
            $(e).attr("id") && (f = $(e).attr("id").replace("dv_", "")), "blk_blank" != blockName && null == _editBlock && (c = "<div class='guideBorder'></div>", c += template_guideControls(blockName, f), $(e).prepend(c)) } }) }

function forceShowGuide() { $(".guideBorder").css("display", "block"), $(".guideOption").css("display", "block"), $("#toolGuideBtn").html(JS_HIDE_BLOCKS) }

function forceHideGuide() { $(".guideBorder").css("display", ""), $(".guideOption").css("display", ""), $("#toolGuideBtn").html(JS_SHOW_BLOCKS) }

function openFirstPanel() { $("#mainSetting").removeClass("hidden"), $("#mainSetting").addClass("current"), $("#mainSettingVeil").hide(), $("#itemSetting").removeClass("current") }

function openSecondPanel() { $("#mainSetting").removeClass("current"), $("#mainSettingVeil").show(), $("#itemSetting").addClass("current") }

function panelToggle(a, b) { "first" == a ? "hide" == b ? $("#mainSetting").removeClass("current") : openFirstPanel() : "second" == a && ("hide" == b ? ($("#mainSettingVeil").hide(), $("#itemSetting").removeClass("current")) : openSecondPanel()) }

function subcontentToggle(a, b) { var c = $(a).closest(".panel-container");
    $(c).find(".subpanel-nav span").removeClass("selected"), $(a).addClass("selected"), $(c).find(".subcontent").removeClass("current"), $(c).find("." + b).addClass("current") }

function showBorderStyle(a) { render_panel_BorderStyleOptions(); var b = $(a).offset().left,
        c = $(a).offset().top,
        d = $(a).outerHeight(),
        e = "none"; return $(a).data("globalstyle") ? (isGlobalStyle = !0, globalStyleBorderID = $(a).data("globalstyle"), e = $("#" + globalStyleBorderID).val()) : (isGlobalStyle = !1, globalStyleBorderID = "", e = $("#ctrlBorderStyle").val()), $("#panelBorderStyle").css("left", b), $("#panelBorderStyle").css("top", c + d + 8), $("#panelBorderStyle").toggle(), $(a).hasClass("tool-selected") || ($("#panelBorderStyle > li").removeClass("selected"), $('#panelBorderStyle > li[data-value="' + e + '"]').addClass("selected")), $(a).toggleClass("tool-selected"), !1 }

function applyBorderStyle(a, b, c) { var d = $(a).html(); if (isGlobalStyle === !0 && "" !== globalStyleBorderID) $("#" + globalStyleBorderID).val(c), $("#" + globalStyleBorderID).change(), $("#panelBorderStyle li").removeClass("selected"), $(a).addClass("selected"), $('a[data-globalstyle="' + globalStyleBorderID + '"]').children("span").replaceWith(d);
    else { var e = $("#ctrlBorderStyle").data("blocktype");
        $("#ctrlBorderStyle").val(c), selectChangeHandler(e, b), $("#panelBorderStyle li").removeClass("selected"), $(a).addClass("selected"), $("#btnBorderStyle").children("span").replaceWith(d) } $(".tool-borderstyle").removeClass("tool-selected"), $("#panelBorderStyle").hide() }

function Block_Blank() {
    function a() { var a = '<div width="' + this.width + '" class="blk_wrapper ' + rootBlockClass + '" name="blk_blank">' + JS_DROP_CONTENT_HERE + "</div>"; return a }

    function b(a) { this.id = GetBlockID(a); var b = $("." + rootBlockClass, "#" + this.id);
        this.width = $(b).attr("width") }

    function c(a) {}

    function d(a) { var b = $("." + rootBlockClass, "#" + this.id);
        $(b).attr("width", a), $(this).width = a }

    function e() { var a = $("." + rootBlockClass, "#" + this.id);
        $(a).attr("width", "100%") } this.width = "100%", this.type = "blank", this.load = b, this.setWidth = d, this.resetWidth = e, this.renderSetting = c, this.getHTML = a, this.id = "" }

function Block_BoxText() {
    function a(a) { var c = this;
        null != a && (c = a), "" != c.boxBorderWidth && "undefined" != typeof c.boxBorderWidth || (c.boxBorderWidth = "1"), "" != c.boxBorderStyle && "undefined" != typeof c.boxBorderStyle || (c.boxBorderStyle = "solid"), "" != c.boxBorderColor && "undefined" != typeof c.boxBorderColor || (c.boxBorderColor = "#e1e1e1"), "" == c.boxBackgroundColor && (c.boxBackgroundColor = "transparent"), c.boxBorderWidth = parseWidth(c.boxBorderWidth); var d = '<table width="' + c.width + '" cellspacing="0" cellpadding="0" border="0" class="' + rootBlockClass + '" name="blk_boxtext"><tbody><tr>'; return d += b(c), d += "</tr></tbody></table>", c = null, d }

    function b(a) { var b = a,
            c = "",
            d = _editBlock;
        null == _editBlock && b.id && (d = $("#" + b.id)), $("td[name=tblCell]", d).removeClass("bmeMblCenter").removeClass("bmeNoBr"), $("td.tdPart", d).removeClass("bmeMblInline").removeClass("bmeMblInlineHide"); var e = b.width - 2 * b.paddingH; if (1 == b.columns) c += '<td align="center" name=bmeBoxContainer style="padding-left:' + parseWidth(b.paddingH) + "px; padding-right:" + parseWidth(b.paddingH) + "px; padding-top:" + parseWidth(b.paddingV) + "px; padding-bottom:" + parseWidth(b.paddingV) + 'px;">', c += '<table cellspacing="0" cellpadding="0" width="100%" name="tblText" class="tblText" border="0">', c += '<tbody><tr><td valign="top" align="left" style="padding: 20px; font-family:Arial, Helvetica, sans-serif; font-weight: normal; font-size: 14px; color: #383838;', parseWidth(b.boxBorderWidth) > 0 && "" != b.boxBorderStyle && "none" != b.boxBorderStyle && "" != b.boxBorderColor && "transparent" != b.boxBorderColor && (c += "border-width:" + parseWidth(b.boxBorderWidth) + "px; border-style:" + b.boxBorderStyle + "; border-color:" + b.boxBorderColor + ";"), c += "background-color:" + b.boxBackgroundColor + '; border-collapse: collapse;" name="tblCell" class="tblCell">', "" == b.text[0].content && (b.text[0].content = '<div style="line-height: 150%;">' + JS_DEFAULT_TEXT_CONTENT + "</div>"), c += b.text[0].content, c += "</td></tr></tbody></table></td>";
        else if (2 == b.columns) { var f = 0,
                g = 0,
                h = e - b.gutter,
                i = 0;
            50 == b.division ? i = fixInt(h / 2) : 30 == b.division ? i = fixInt(h / 3) : 70 == b.division && (i = fixInt(h / 3 * 2)), overallBorderWidth = 2 * parseWidth(b.boxBorderWidth), f = i, g = h - parseWidth(f), f -= overallBorderWidth, g -= overallBorderWidth, c += '<td><table cellspacing="0" cellpadding="0" width="100%" border="0" class="bmeContainerRow"><tbody><tr><td name=bmeBoxContainer ', c += 'style="padding-left:' + parseWidth(b.paddingH) + "px; padding-right:" + parseWidth(b.paddingH) + "px; padding-top:" + parseWidth(b.paddingV) + "px; padding-bottom:" + parseWidth(b.paddingV) + 'px;">', c += '<table cellspacing="0" cellpadding="0" width="100%" border="0"><tbody><tr><td valign="top" align="center" class="tdBoxedTextBorder tdPart" name="tdBoxedTextBorder" style="border-width:' + parseWidth(b.boxBorderWidth) + "px; border-style:" + b.boxBorderStyle + "; border-color:" + b.boxBorderColor + ";background-color:" + b.boxBackgroundColor + '; border-collapse: collapse;">', c += ' <table cellspacing="0" cellpadding="0" width="' + f + '" align="left" dimension="' + b.division + '" name="tblText" class="tblText" style="float:left;">', c += '<tbody><tr><td valign="top" align="left" style="padding: 20px;font-family:Arial, Helvetica, sans-serif; font-weight: normal; font-size: 14px; color: #383838;" name="tblCell" class="tblCell">', "" == b.text[0].content && (b.text[0].content = '<div style="line-height: 150%;">' + JS_DEFAULT_TEXT_CONTENT + "</div>"), c += b.text[0].content, c += "</td></tr></tbody></table>", c += '</td><td valign="top" align="center" class="tdPart">', c += '<table cellspacing="0" cellpadding="0" width="' + parseWidth(b.gutter) + '" border="0" align="right" style="float:right;" name="tblGtr" class="tblGtr"><tbody><tr><td> </td></tr></tbody></table>', c += '</td><td valign="top" align="center" class="tdBoxedTextBorder tdPart" name="tdBoxedTextBorder" style="border-width:' + parseWidth(b.boxBorderWidth) + "px; border-style:" + b.boxBorderStyle + "; border-color:" + b.boxBorderColor + ";background-color:" + b.boxBackgroundColor + '; border-collapse: collapse;">', c += ' <table cellspacing="0" cellpadding="0" width="' + g + '" align="right" dimension="' + b.division + '" name="tblText" class="tblText" style="float:right;">', c += '<tbody><tr><td valign="top" align="left" style="padding: 20px;font-family:Arial, Helvetica, sans-serif; font-weight: normal; font-size: 14px; color: #383838;" name="tblCell" class="tblCell">', 1 == b.text.length && (b.text[1] = { content: "" }), "" == b.text[1].content && (b.text[1].content = '<div style="line-height: 150%;">' + JS_DEFAULT_TEXT_CONTENT + "</div>"), c += b.text[1].content, c += "</td></tr></tbody></table>", c += "</td></tr></tbody></table></td></tr></tbody></table></td>" } return c }

    function c() { try { var a = tinyMCE.get("txaEditableContent").getContent();
            tinymce.execCommand("mceRemoveControl", !0, "txaEditableContent"), purge($("#txaEditableContent")), $("#txaEditableContent").remove(), purge($("#editTexttxaEditableContent")), $("#editTexttxaEditableContent").remove(), a.indexOf("editTexttxaEditableContent") != -1 && (a = $(a).html()), a = fixSaveTextContent(a), $("td[name='tblCell']:first", _editBlock).html(a), blkObjectData.text[0].content = a } catch (b) {} try { $("td[name='tblCell']", _editBlock).length > 1 && (a = tinyMCE.get("txbEditableContent").getContent(), tinymce.execCommand("mceRemoveControl", !0, "txbEditableContent"), purge($("#txbEditableContent")), $("#txbEditableContent").remove(), purge($("#editTexttxbEditableContent")), $("#editTexttxbEditableContent").remove(), a.indexOf("editTexttxbEditableContent") != -1 && (a = $(a).html()), a = fixSaveTextContent(a), $("td[name='tblCell']:last", _editBlock).html(a), blkObjectData.text[1].content = a) } catch (b) {} blkObjectData.text[0].content = $("td[name='tblCell']:first", _editBlock).html(), $("td[name='tblCell']", _editBlock).length > 1 && (blkObjectData.text[1].content = $("td[name='tblCell']:last", _editBlock).html()) }

    function d() { $("img", _editBlock).attr("width", "2").removeAttr("height"), g(_editBlock), currentEdit = "txaEditableContent", LoadTiny($("td[name='tblCell']:first", _editBlock)), $("td[name='tblCell']", _editBlock).length > 1 && (currentEdit = "txbEditableContent", LoadTiny($("td[name='tblCell']:last", _editBlock), "txbEditableContent")) }

    function e(a) { if ($(a).parent().hasClass("blk_wrapper")) this.id = GetBlockID(a);
        else { this.id = SetWidgetBlockID(); var b = this.id,
                c = getNewBlockWrapper(b, "blk_boxtext", $(a).clone().wrap("<div />").parent().html());
            $(a).replaceWith(c) } var d = $("." + rootBlockClass, "#" + this.id); if (this.width = $(d).attr("width"), 1 == $("table[name=tblText]", d).length) this.gutter = 0, this.columns = 1, this.division = 100;
        else if (2 == $("table[name=tblText]", d).length) { this.columns = 2, this.gutter = $("table[name=tblGtr]", d).attr("width"); var e = parseWidth($("table[name=tblText]:first", d).attr("width")),
                f = parseWidth($("table[name=tblText]:last", d).attr("width")),
                g = $("table[name=tblText]:first", d).attr("dimension"); "undefined" != typeof g ? this.division = parseWidth(g) : checkEqual(e, f) ? this.division = 50 : e > f ? this.division = 70 : e < f && (this.division = 30) } 1 == this.columns ? this.boxBorderWidth = parseWidth(GetBorderDetail($("td[name=tblCell]:first", d), "width")) : 2 == this.columns ? this.boxBorderWidth = parseWidth(GetBorderDetail($("td.tdPart:first", d), "width")) : this.boxBorderWidth = parseWidth(GetBorderDetail($("table[name=tblText]:first", d), "width")), 1 == this.columns ? this.boxBorderStyle = $("td[name=tblCell]:first", d).css("border-top-style") : 2 == this.columns ? this.boxBorderStyle = $("td.tdPart:first", d).css("border-top-style") : this.boxBorderStyle = $("table[name=tblText]:first", d).css("border-top-style"), 1 == this.columns ? "none" == this.boxBorderStyle ? this.boxBorderColor = "" : this.boxBorderColor = $("td[name=tblCell]:first", d).css("border-top-color") : 2 == this.columns ? "none" == this.boxBorderStyle ? this.boxBorderColor = "" : this.boxBorderColor = $("td.tdPart:first", d).css("border-top-color") : "none" == this.boxBorderStyle ? this.boxBorderColor = "" : this.boxBorderColor = $("table[name=tblText]:first", d).css("border-top-color"), this.paddingH = $("td[name=bmeBoxContainer]", d).css("padding-left"), this.paddingV = $("td[name=bmeBoxContainer]", d).css("padding-top"), this.paddingH = parseWidth(this.paddingH), this.paddingV = parseWidth(this.paddingV), 1 == this.columns ? this.boxBackgroundColor = $("td[name=tblCell]:first", d).css("background-color") : 2 == this.columns ? this.boxBackgroundColor = $("td.tdPart:first", d).css("background-color") : this.boxBackgroundColor = $("table[name=tblText]:first", d).css("background-color"), this.text[0].content = $("td[name=tblCell]:first", d).html(), 2 == this.columns && (this.text[1] = { content: $("td[name=tblCell]:last", d).html() }), detectEditorFocus = null, detectEditorLoad = null, detectEditorInit = null }

    function f(a) { try { try { cancelImage() } catch (b) {} var c = tinyMCE.get("txaEditableContent").getContent();
            tinymce.execCommand("mceRemoveControl", !0, "txaEditableContent"), purge($("#txaEditableContent")), $("#txaEditableContent").remove(), purge($("#editTexttxaEditableContent")), $("#editTexttxaEditableContent").remove(), c.indexOf("editTexttxaEditableContent") != -1 && (c = $(c).html()), c = fixSaveTextContent(c), $("td[name='tblCell']:first", _editBlock).html(c) } catch (d) {} $("td[name='tblCell']", _editBlock).length > 1 && (c = tinyMCE.get("txbEditableContent").getContent(), tinymce.execCommand("mceRemoveControl", !0, "txbEditableContent"), purge($("#txbEditableContent")), $("#txbEditableContent").remove(), purge($("#editTexttxbEditableContent")), $("#editTexttxbEditableContent").remove(), c.indexOf("editTexttxaEditableContent") != -1 && (c = $(c).html()), c = fixSaveTextContent(c), $("td[name='tblCell']:last", _editBlock).html(c)), $("#gutter-slider", "#dvSettingBlock").slider("destroy"), $("#gutter-slider", "#dvSettingBlock").remove(), $("#padding-h-slider", "#dvSettingBlock").slider("destroy"), $("#padding-h-slider", "#dvSettingBlock").remove(), $("#padding-v-slider", "#dvSettingBlock").slider("destroy"), $("#padding-v-slider", "#dvSettingBlock").remove(), $("#blockSettingContainer", "#dvSettingBlock").remove(), $("#dvSettingBlock").off(), $("#dvSettingBlock").empty(), DisableToolbar(0) }

    function g(a) { var b = a;
        1 == $("table[name=tblText]", $(b)).length ? (tmpVal = $("td[name=tblCell]", $(b)).width(), $("img", $(b)).each(function () { mxWidth = getImageMaxWidth(this), 0 != mxWidth ? ($(this).css({ "max-width": mxWidth + "px" }).attr("border", "0").removeAttr("width"), tmpVal - 10 > mxWidth ? $(this).attr("width", mxWidth) : $(this).attr("width", tmpVal - 10)) : 2 == $(this).attr("width") && $(this).removeAttr("width") })) : (tmpVal = $("td[name=tblCell]:first", $(b)).width(), $("img", $("td[name=tblCell]:first", $(b))).each(function () { mxWidth = getImageMaxWidth(this), 0 != mxWidth ? ($(this).css({ "max-width": mxWidth + "px" }).attr("border", "0").removeAttr("width"), tmpVal - 10 > mxWidth ? $(this).attr("width", mxWidth) : $(this).attr("width", tmpVal - 10)) : 2 == $(this).attr("width") && $(this).removeAttr("width") }), tmpVal = $("td[name=tblCell]:last", $(b)).width(), $("img", $("td[name=tblCell]:last", $(b))).each(function () { mxWidth = getImageMaxWidth(this), 0 != mxWidth ? ($(this).css({ "max-width": mxWidth + "px" }).attr("border", "0").removeAttr("width"), tmpVal - 10 > mxWidth ? $(this).attr("width", mxWidth) : $(this).attr("width", tmpVal - 10)) : 2 == $(this).attr("width") && $(this).removeAttr("width") })) }

    function h(a) {
        var b = $("." + rootBlockClass, "#" + this.id);
        if ($(b).attr("width", a), $(this).width = a, this.load(b), null == _editBlock || this.id != "dv_" + currentEditID) b.html(this.getHTML(this));
        else {
            parseWidth($("td[name='bmeBoxContainer']", b).css("padding-left"));
            if (1 == $("table[name='tblText']", b).length) $("table[name='tblText']", b).attr("width", "100%");
            else {
                var c = 0,
                    d = 0,
                    e = a - b.gutter,
                    f = 0,
                    g = $("table[name='tblText']:first", b).attr("dimension");
                "undefined" != typeof g && (g = parseWidth(g)), 50 == b.division ? f = fixInt(e / 2) : 30 == b.division ? f = fixInt(e / 3) : 70 == b.division && (f = fixInt(e / 3 * 2)), c = f, d = e - parseWidth(c), $("table[name='tblText']:first", b).attr("width", c), $("table[name='tblText']:last", b).attr("width", d)
            }
        }
        this.setImageWidth(b)
    }

    function i() { var a = $("." + rootBlockClass, "#" + this.id); if ($(a).attr("width", "100%"), 1 == $("table[name=tblText]", $(a)).length) this.columns = 1, $("table[name='tblText']", $(a)).attr("width", "");
        else { this.columns = 2, this.gutter = parseWidth($("table[name=tblGtr]", $(a)).attr("width")); var b = parseWidth($("table[name=tblText]:first", $(a)).attr("width")),
                c = parseWidth($("table[name=tblText]:last", $(a)).attr("width"));
            checkEqual(b, c) ? (this.division = 50, $("table[name=tblText]:first", $(a)).attr("width", "10"), $("table[name=tblText]:last", $(a)).attr("width", "10")) : b > c ? (this.division = 70, $("table[name=tblText]:first", $(a)).attr("width", "20"), $("table[name=tblText]:last", $(a)).attr("width", "10")) : b < c && (this.division = 30, $("table[name=tblText]:first", $(a)).attr("width", "10"), $("table[name=tblText]:last", $(a)).attr("width", "20")) } $("img", $(a)).attr("width", "2").removeAttr("height") }

    function j(b) { var e = this.gutter,
            f = $("." + rootBlockClass, "#" + this.id);
        $("#dvSettingBlock").off(), $("#dvSettingBlock").empty(); var g = chkColorVal($("table[name='tblText']", f).css("background-color"));
        g = chkColorVal(1 == this.columns ? $("td[name='tblCell']", f).css("background-color") : 2 == this.columns ? $("td.tdPart", f).css("background-color") : $("table[name='tblText']", f).css("background-color")); var h = ""; "" != g && (h = hexc(g.toLowerCase())); var i = chkColorVal($("table[name='tblText']", f).css("border-top-color"));
        i = chkColorVal(1 == this.columns ? $("td[name='tblCell']", f).css("border-top-color") : 2 == this.columns ? $("td.tdPart", f).css("border-top-color") : $("table[name='tblText']", f).css("border-top-color")); var j = ""; "" != i && (j = hexc(i.toLowerCase())), this.boxBackgroundColor = g, this.boxBorderColor = i, 1 == this.columns ? this.boxBorderStyle = $("td[name='tblCell']", f).css("border-top-style") : 2 == this.columns ? this.boxBorderStyle = $("td.tdPart", f).css("border-top-style") : this.boxBorderStyle = $("table[name='tblText']", f).css("border-top-style"), 1 == this.columns ? this.boxBorderWidth = $.style($("td[name='tblCell']", f)[0], "borderWidth") : 2 == this.columns ? this.boxBorderWidth = $.style($("td.tdPart", f)[0], "borderWidth") : this.boxBorderWidth = $.style($("table[name='tblText']", f)[0], "borderWidth"), null != this.boxBorderWidth && (this.boxBorderWidth = this.boxBorderWidth.replace("px", "")), "" == this.boxBorderWidth && (this.boxBorderWidth = "0"), $(".sidebar-editblock-name").text(JS_BLOCK_BOX_TEXT); var k = "";
        k += "<div id=mainSetting class=current>", k += "<div class='panel-container'>", k += '<div class="subpanel-nav clearfix2"><span class="selected" onclick="javascript:subcontentToggle(this, \'sub1\');">' + JS_SETTINGS + '</span><span class="" onclick="javascript:subcontentToggle(this, \'sub2\');">' + JS_CONTENT + "</span></div>", k += '<div class="subcontent current sub1">', k += template_field_BackgroundColor("boxtext", h, g, JS_BACKGROUND, "rctrlBGColor", "ctrlBGColor"), k += template_field_BorderStyles("boxtext", j, i, this.boxBorderStyle, this.boxBorderWidth, JS_BORDER), k += template_field_Slider("padding-h-slider", JS_H_PADDING, "fldHPadding"), k += template_field_Slider("padding-v-slider", JS_V_PADDING), k += "</div>", k += '<div class="subcontent sub2">', k += '<fieldset><label class="label-small">' + JS_NUMBER_OF_COLUMNS + '</label><select class="form-control form-control-small" id="numCols" onchange="javascript:selectChangeHandler(\'boxtext\', this);"><option value=1 ' + (1 == this.columns ? " selected" : "") + ">1</option><option value=2  " + (2 == this.columns ? " selected" : "") + ">2</option></select></fieldset>", k += template_field_columnLayout("boxtext", JS_COLUMN_SPLIT, this.columns, this.division), k += '<fieldset class="layout-cols-option' + (1 == this.columns ? " hidden" : "") + '"><label class="label-small">' + JS_GUTTER_WIDTH + '</label><div class="editor-slider" id="gutter-slider"></div></fieldset>', k += template_field_LineHeight("boxtext"), k += "</div>", k += "</div>", k += template_field_SaveAndClose("boxtext"), k += "</div>", k += "<div id=mainSettingVeil onclick=\"javascript:colorChangeHandler('imagesetting', this);\"></div>", k += "<div id=itemSetting>", k += "<div class='panel-container'>", k += "</div>", k += template_field_SaveAndBack("imagesetting"), k += "</div>", $("#dvSettingBlock").append(k), e = parseWidth(e), $("#gutter-slider", "#dvSettingBlock").slider({ value: e, min: 0, max: 20, step: 5, slide: function (b, e) { $(".new-slider-val", $("#gutter-slider", "#dvSettingBlock")).text(e.value), $("table[name='tblGtr']", _editBlock).attr("width", e.value + "px"), blkObjectData.gutter = e.value, c(), $(_editBlock).html($(a(blkObjectData)).html()), d() } }).find(".ui-slider-handle").append($("<div />").css({ display: "none" }).addClass("new-slider-val")).hover(function () { $(".new-slider-val", $("#gutter-slider", "#dvSettingBlock")).show() }, function () { $(".new-slider-val", $("#gutter-slider", "#dvSettingBlock")).hide() }), $(".new-slider-val", $("#gutter-slider", "#dvSettingBlock")).text(e); var l = parseWidth(this.paddingH);
        $("#padding-h-slider", "#dvSettingBlock").slider({ value: l, min: 0, max: 20, step: 5, slide: function (b, e) { c(), $(".new-slider-val", $("#padding-h-slider", "#dvSettingBlock")).text(e.value), blkObjectData.paddingH = e.value, c(), $(_editBlock).html($(a(blkObjectData)).html()), d() } }).find(".ui-slider-handle").append($("<div />").css({ display: "none" }).addClass("new-slider-val")).hover(function () { $(".new-slider-val", $("#padding-h-slider", "#dvSettingBlock")).show() }, function () { $(".new-slider-val", $("#padding-h-slider", "#dvSettingBlock")).hide() }), $(".new-slider-val", $("#padding-h-slider", "#dvSettingBlock")).text(l), l = parseWidth(this.paddingV), $("#padding-v-slider", "#dvSettingBlock").slider({ value: l, min: 0, max: 20, step: 5, slide: function (b, e) { $(".new-slider-val", $("#padding-v-slider", "#dvSettingBlock")).text(e.value), blkObjectData.paddingV = e.value, c(), $(_editBlock).html($(a(blkObjectData)).html()), d() } }).find(".ui-slider-handle").append($("<div />").css({ display: "none" }).addClass("new-slider-val")).hover(function () { $(".new-slider-val", $("#padding-v-slider", "#dvSettingBlock")).show() }, function () { $(".new-slider-val", $("#padding-v-slider", "#dvSettingBlock")).hide() }), $(".new-slider-val", $("#padding-v-slider", "#dvSettingBlock")).text(l), $(_editBlock).html($(a(this)).html()), LoadToolBar(0), detectEditorFocus = null, detectEditorInit = null, detectEditorLoad = null, _editBlockItem = null, 1 == this.columns || 0 == this.columns ? $("fieldset#fldMobileStyle", "#dvSettingBlock").addClass("hidden") : ($("fieldset.layout-cols-option", "#dvSettingBlock").removeClass("hidden"), $("fieldset#fldMobileStyle", "#dvSettingBlock").removeClass("hidden")), d(), blkObjectEditor = tinymce.activeEditor }

    function k(a, b, c, d, e, f, g) { b.toString().indexOf("px") != -1 && (b = b.toString().replace("px", "")); var h = b - e,
            i = 0,
            j = 0;
        paddingArea = 20, 0 == v2Feature && (f = 20, g = 20), 2 == c ? ($("td[name=tblCell]:first", a).css({ "font-family": "Arial, Helvetica, sans-serif", "font-weight": "normal", "font-size": "14px", color: "#383838", "padding-left": f + "px", "padding-right": f + "px", "padding-top": g + "px", "padding-bottom": g + "px" }), $("td[name=tblCell]:last", a).css({ "font-family": "Arial, Helvetica, sans-serif", "font-weight": "normal", "font-size": "14px", color: "#383838", "padding-left": f + "px", "padding-right": f + "px", "padding-top": g + "px", "padding-bottom": g + "px" }), $("table[name=tblText]:first", a).css({ "float": "left" }), $("table[name=tblText]:last", a).css({ "float": "right" }), $("table[name=tblGtr]", a).attr("width", e), $("img", a).each(function () { 0 != mxWidth && $(this).css({ "max-width": mxWidth + "px" }).attr("border", "0").attr("width", "1") }), "50%" == d || 50 == d ? j = fixInt(h / 2) : "30%" == d || 30 == d ? j = fixInt(h / 3) : "70%" != d && 70 != d || (j = fixInt(h / 3 * 2)), $("table[name=tblText]:first", a).attr("width", j), $("table[name=tblText]:last", a).attr("width", h - j), $(".mceLayout", a).length > 0 && ($(".mceLayout:first", a).css({ width: j - paddingArea + "px" }), $(".mceLayout:last", a).css({ width: h - j - paddingArea + "px" })), i = $("td[name=tblCell]:first", $(a)).width(), i -= 10, $("img", $("table[name=tblText]:first", a)).each(function () { mxWidth = getImageMaxWidth(this), 0 == mxWidth && (mxWidth = parseWidth(GetBorderDetail($(this), "width"))), 0 != mxWidth && ($(this).css({ "max-width": mxWidth + "px" }).attr("border", "0").removeAttr("width"), i > mxWidth ? $(this).attr("width", mxWidth) : $(this).attr("width", i)) }), i = $("td[name=tblCell]:last", $(a)).width(), i -= 10, $("img", $("table[name=tblText]:last", a)).each(function () { mxWidth = getImageMaxWidth(this), 0 == mxWidth && (mxWidth = parseWidth(GetBorderDetail($(this), "width"))), 0 != mxWidth && ($(this).css({ "max-width": mxWidth + "px" }).attr("border", "0").removeAttr("width"), i > mxWidth ? $(this).attr("width", mxWidth) : $(this).attr("width", i)) })) : (h = b, $("table[name=tblText]", a).attr("width", h), $("td[name=tblCell]", a).css({ "font-family": "Arial, Helvetica, sans-serif", "font-weight": "normal", "font-size": "14px", color: "#383838", "padding-left": f + "px", "padding-right": f + "px", "padding-top": g + "px", "padding-bottom": g + "px" })), h = null } this.width = "100%", this.type = "boxtext", this.text = [{ content: "" }], this.columns = 1, this.padding = 20, this.paddingH = 20, this.paddingV = 20, this.gutter = 0, this.division = 0, this.boxBorderWidth = "", this.boxBorderStyle = "", this.boxBorderColor = "", this.boxBackgroundColor = "", this.id = "", this.load = e, this.unload = f, this.setWidth = h, this.resetWidth = i, this.setBlockWidths = k, this.applyText = c, this.applyEditor = d, this.textContainer = b, this.getHTML = a, this.renderSetting = j, this.setImageWidth = g
}

function Block_Button() {
    function a() { var a = "",
            b = "",
            c = "",
            d = "",
            e = "";
        $(".bmeButton", "#_BME_dvEditArea").each(function () { a = $(this).attr("old-radius"), a = parseWidth("undefined" == typeof a ? $(".bmeButtonText", this).css("border-top-left-radius") : a), b = $(this).attr("old-border-width"), b = parseWidth("undefined" == typeof b ? GetBorderDetail($(".bmeButtonText", this), "width") : b), c = $(this).attr("old-border-style"), "undefined" == typeof c && (c = $(".bmeButtonText", this).css("border-top-style")), d = $(this).attr("old-border-color"), "undefined" == typeof d && (d = $(".bmeButtonText", this).css("border-top-color")), e = $(this).attr("old-bg-color"), "undefined" == typeof e && (e = $(".bmeButtonText", this).css("background-color")), $(".bmeButtonText", this).css({ "background-color": e, "border-radius": a + "px", "border-collapse": "separate", "border-width": b + "px", "border-style": c, "border-color": d }) }), $(".bmeButtonText", "#_BME_dvEditArea").each(function () { a = $(this).attr("old-padding-button-h"), a = parseWidth("undefined" == typeof a ? $(this).css("padding-right") : a), b = $(this).attr("old-padding-button-v"), b = parseWidth("undefined" == typeof b ? $(this).css("padding-top") : b), $(this).css({ "font-family": "Arial,Helvetica,sans-serif", "font-size": "14px", "font-weight": "bold", "padding-left": a + "px", "padding-right": a + "px", "padding-top": b + "px", "padding-bottom": b + "px" }) }), a = $("#border-slider", "#dvSettingBlock").slider("value"), b = $("#ctrlBorder", "#dvSettingBlock").attr("value"), c = $("#ctrlBorderStyle", "#dvSettingBlock").attr("value"), d = $("#ctrlBGBorder", "#dvSettingBlock").css("background-color"), e = $("#ctrlBGColor", "#dvSettingBlock").next().next("input").val(), $(".bmeButton", _editBlock).each(function () { $(this).attr("old-radius", a), $(this).attr("old-border-width", b), $(this).attr("old-border-style", c), $(this).attr("old-border-color", d), $(this).attr("old-bg-color", e), $(".bmeButtonText", this).css({ "border-radius": a + "px", "border-collapse": "separate", "border-width": b + "px", "border-style": c, "border-color": d, "background-color": e }) }), b = $("#padding-button-h-slider", "#dvSettingBlock").slider("value"), c = $("#padding-button-v-slider", "#dvSettingBlock").slider("value"), $(".bmeButtonText", _editBlock).each(function () { $(this).attr("old-padding-button-h", b), $(this).attr("old-padding-button-v", c), $(this).css({ "font-family": "Arial,Helvetica,sans-serif", "font-size": "14px", "font-weight": "bold", "padding-left": b + "px", "padding-right": b + "px", "padding-top": c + "px", "padding-bottom": c + "px" }) }) }

    function b(a) { if ($("input[name='chkApplyAllItem']", "#dvSettingBlock").prop("checked")) { var b = parseWidth($("#ctrlBorder", "#dvSettingBlock").val()),
                c = $("#ctrlBGBorder", "#dvSettingBlock").next().next("input").val(),
                d = $("#ctrlBorderStyle", "#dvSettingBlock").val(),
                e = $("#ctrlBGColor", "#dvSettingBlock").next().next("input").val(),
                f = $(".new-slider-val", $("#border-slider", "#dvSettingBlock")).text(),
                g = $(".new-slider-val", $("#padding-button-h-slider", "#dvSettingBlock")).text(),
                h = $(".new-slider-val", $("#padding-button-v-slider", "#dvSettingBlock")).text(),
                i = "",
                j = "",
                k = "",
                l = "",
                m = "",
                n = "",
                o = "";
            $(".bmeButtonText", "#_BME_dvEditArea").each(function () { n = $(this).attr("old-padding-button-h"), "undefined" == typeof n && (n = parseWidth($(this).css("padding-left"))), o = $(this).attr("old-padding-button-v"), "undefined" == typeof o && (o = parseWidth($(this).css("padding-top"))), $(this).attr("old-padding-button-h", n), $(this).attr("old-padding-button-v", o), $(this).css({ "font-family": "Arial,Helvetica,sans-serif", "font-size": "14px", "font-weight": "bold", "padding-left": g + "px", "padding-right": g + "px", "padding-top": h + "px", "padding-bottom": h + "px" }) }), $("table.bmeButton", "#_BME_dvEditArea").each(function () { i = $(this).attr("old-radius"), "undefined" == typeof i && (i = parseWidth($(".bmeButtonText", this).css("border-top-left-radius"))), l = $(this).attr("old-bg-color"), "undefined" == typeof l && (l = $(".bmeButtonText", this).css("background-color")), j = $(this).attr("old-border-width"), "undefined" == typeof j && (j = parseWidth(GetBorderDetail($(".bmeButtonText", this), "width"))), m = $(this).attr("old-border-style"), "undefined" == typeof m && (m = $(".bmeButtonText", this).css("border-top-style")), k = $(this).attr("old-border-color"), "undefined" == typeof k && (k = $(".bmeButtonText", this).css("border-top-color")), $(this).attr("old-radius", i), $(this).attr("old-bg-color", l), $(this).attr("old-border-width", j), $(this).attr("old-border-style", m), $(this).attr("old-border-color", k), $(".bmeButtonText", this).css({ "border-radius": f + "px", "background-color": e, "border-width": b + "px", "border-color": c, "border-style": d, "border-collapse": "separate" }) }), blkObjectData.setWidth(blkObjectData.width) } }

    function c(a) { var b = this,
            c = '<table width="' + b.width + '" cellspacing="0" cellpadding="0" border="0" class="' + rootBlockClass + '" name="blk_button" style="'; return "" != b.backgroundColor && "transparent" != b.backgroundColor && (c += "background-color:" + b.backgroundColor + ";"), "" == b.borderColor && (b.borderColor = "transparent"), "" == b.borderWidth && (b.borderWidth = "0"), "" == b.borderStyle && (b.borderStyle = "none"), "" == b.borderRadius && (b.borderRadius = "5"), "" == b.buttonBGColor && (b.buttonBGColor = "#72c2a1"), "" == b.paddingV && (b.paddingV = "10"), "" == b.paddingH && (b.paddingH = "20"), "" == b.paddingButtonV && (b.paddingButtonV = "20"), "" == b.paddingButtonH && (b.paddingButtonH = "40"), "" == b.align && (b.align = "left"), "" == b.linkText && (b.linkText = '<span style="font-family:Arial, Verdana; font-size:14px;color:#FFFFFF;"><a style="color:#FFFFFF;text-decoration:none;" target=_blank>' + JS_DEFAULT_BUTTON_CONTENT + "</a></span>", b.text = JS_DEFAULT_BUTTON_CONTENT, b.url = ""), c += '"><tbody><tr><td width=' + b.paddingH + "></td><td align=center>", c += '<table class=tblContainer cellspacing=0 cellpadding=0 border=0 width="100%"><tr><td height=' + b.paddingV + "></td></tr><tr><td ", c += "align=" + b.align + ">", c += "<table cellspacing=0 cellpadding=0 border=0 class=bmeButton ", "100%" == b.buttonWidth && (c += ' width="100%" '), c += ' style="border-collapse:seperate;border-radius:' + b.borderRadius + "px; border-width:" + b.borderWidth + "; border-style:" + b.borderStyle + "; border-color:" + b.borderColor + ";background-color:" + b.buttonBGColor + '; text-align: center;"', c += "><tr><td ", c += 'style="font-family: Arial,Helvetica,sans-serif; font-size: 14px; padding-top:' + b.paddingButtonV + "px;padding-bottom:" + b.paddingButtonV + "px; padding-left:" + b.paddingButtonH + "px; padding-right:" + b.paddingButtonH + 'px;font-weight:bold;" ', c += " class=bmeButtonText>", c += b.linkText, c += "</td></tr></table>", c += "</td></tr><tr><td height=" + b.paddingV + "></td></tr></table></td><td width=" + b.paddingH + "></td></tr></tbody></table>" }

    function d(a) { i(), $(".bmeButton", "#_BME_dvEditArea").each(function () { $(this).removeAttr("old-radius"), $(this).removeAttr("old-border-width"), $(this).removeAttr("old-border-style"), $(this).removeAttr("old-border-color"), $(this).removeAttr("old-bg-color") }), $(".bmeButtonText", "#_BME_dvEditArea").each(function () { $(this).removeAttr("old-padding-button-h"), $(this).removeAttr("old-padding-button-v") }), $("#padding-h-slider", "#dvSettingBlock").slider("destroy"), $("#padding-h-slider", "#dvSettingBlock").remove(), $("#padding-v-slider", "#dvSettingBlock").slider("destroy"), $("#padding-v-slider", "#dvSettingBlock").remove(), $("#border-slider", "#dvSettingBlock").slider("destroy"), $("#border-slider", "#dvSettingBlock").remove(), $("#padding-button-h-slider", "#dvSettingBlock").slider("destroy"), $("#padding-button-h-slider", "#dvSettingBlock").remove(), $("#padding-button-v-slider", "#dvSettingBlock").slider("destroy"), $("#padding-button-v-slider", "#dvSettingBlock").remove(), $("#blockSettingContainer", "#dvSettingBlock").remove(), $("#dvSettingBlock").off(), $("#dvSettingBlock").empty(), DisableToolbar(0) }

    function e(a) { if ($(a).parent().hasClass("blk_wrapper")) this.id = GetBlockID(a);
        else { this.id = SetWidgetBlockID(); var b = this.id,
                c = getNewBlockWrapper(b, "blk_button", $(a).clone().wrap("<div />").parent().html());
            $(a).replaceWith(c) } var d = $("." + rootBlockClass, "#" + this.id),
            e = $(".bmeButton", d).attr("style"),
            f = $(".bmeButton .bmeButtonText", d).attr("style"); if ("" != e && "undefined" != typeof e && "undefined" != e && f.indexOf("border") == -1) { var g = e + f;
            $(".bmeButton .bmeButtonText", d).attr("style", g) } $(".bmeButton", d).attr("style", ""), $(".bmeButton", d).removeAttr("style"), $(".bmeButton", d).css("border-collapse", "separate"), this.width = $(d).attr("width"), this.backgroundColor = $(d).css("background-color"), this.buttonWidth = $(".bmeButton", d).attr("width"), this.borderRadius = $(".bmeButton .bmeButtonText", d).css("border-top-left-radius"); var h = $(".bmeButton .bmeButtonText", d).attr("style"),
            i = new RegExp("border-radius:[ ]*([0-9]*[a-z ]*);", "i"),
            j = i.exec(h); "undefined" != typeof j && "undefined" != j && null != j && (this.borderRadius = j[1]), "undefined" == typeof this.borderRadius && (this.borderRadius = ""), "" != this.borderRadius && (this.borderRadius = parseWidth(this.borderRadius)), this.borderColor = $(".bmeButton .bmeButtonText", d).css("border-top-color"), this.borderStyle = $(".bmeButton .bmeButtonText", d).css("border-top-style"), this.borderWidth = GetBorderDetail($(".bmeButton .bmeButtonText", d), "width").replace("px", ""), this.align = $(".bmeButton", d).parent().attr("align"), "" == this.align && (this.align = "center"), this.paddingH = $("td:first", $("tr:first", d)).attr("width"), "" == this.paddingH ? this.paddingH = "20" : this.paddingH = parseWidth(this.paddingH), this.paddingV = $("td:first", $("tr:first", $(".tblContainer", d))).attr("height"), "" == this.paddingV ? this.paddingV = "10" : this.paddingV = parseWidth(this.paddingV), this.paddingButtonH = $(".bmeButtonText", d).css("padding-left"), "" == this.paddingButtonH ? this.paddingButtonH = "35" : this.paddingButtonH = parseWidth(this.paddingButtonH), this.paddingButtonV = $(".bmeButtonText", d).css("padding-top"), "" == this.paddingButtonV ? this.paddingButtonV = "0" : this.paddingButtonV = parseWidth(this.paddingButtonV), this.buttonBGColor = $(".bmeButton .bmeButtonText", d).css("background-color"), "" == this.buttonBGColor && (this.buttonBGColor = "transparent"), this.linkText = $("td.bmeButtonText", d).html(), "" == this.linkText ? (this.linkText = '<span style="font-family:Arial, Verdana; font-size:14px;color:#FFFFFF;"><a style="color: #FFFFFF; text-decoration: none;" target=_blank>' + JS_DEFAULT_BUTTON_CONTENT + "</a></span>", this.text = JS_DEFAULT_BUTTON_CONTENT, this.href = "") : this.text = $("a", d).html(), this.url = $("a", d).attr("href"), "undefined" != this.url && "undefined" != typeof this.url || (this.url = "") }

    function f(a) { $("#dvSettingBlock").off(), $("#dvSettingBlock").empty(); var c = chkColorVal(blkObjectData.backgroundColor),
            d = ""; "" != c && (d = hexc(c.toLowerCase())); var e = chkColorVal(blkObjectData.buttonBGColor),
            f = ""; "" != e && (f = hexc(e.toLowerCase())); var g = chkColorVal(blkObjectData.borderColor),
            i = ""; "" != g && (i = hexc(g.toLowerCase())), "undefined" == blkObjectData.url && (blkObjectData.url = ""); var j = "";
        j = "100%" == blkObjectData.buttonWidth ? "full" : this.align, $(".sidebar-editblock-name").text(JS_BLOCK_BUTTON); var k = "";
        k += "<div class='panel-container'>", k += '<div class="subpanel-nav clearfix2"><span class="selected" onclick="javascript:subcontentToggle(this, \'sub1\');">' + JS_SETTINGS + '</span><span class="" onclick="javascript:subcontentToggle(this, \'sub2\');">' + JS_CONTENT + "</span></div>", k += '<div class="subcontent current sub1">', k += template_field_BackgroundColor("button", d, c, JS_BACKGROUND, "rctrlBGColorMain", "ctrlBGColorMain"), k += template_field_Slider("padding-h-slider", JS_H_PADDING), k += template_field_Slider("padding-v-slider", JS_V_PADDING), k += "</div>", k += '<div class="subcontent sub2">', k += template_field_TextInput("button", JS_BUTTON_TEXT, "fldButtonText", "txtButtonText", blkObjectData.text), k += template_field_TextInput("button", JS_LINK_URL, "fldLinkURL", "txtLinkURL", blkObjectData.url, JS_LINK_PLACEHOLDER), k += template_field_BackgroundColor("button", f, e, JS_BUTTON_COLOR, "rctrlBGColor", "ctrlBGColor"), k += template_field_BorderStyles("button", i, g, this.borderStyle, blkObjectData.borderWidth, JS_BORDER), k += template_field_alignment("button", "horizontal", JS_ALIGN, "ddlAlign", j, "fld_ddlAlign"), k += template_field_Slider("padding-button-h-slider", JS_BUTTON_H_PADDING, "fldHPadding"), k += template_field_Slider("padding-button-v-slider", JS_BUTTON_V_PADDING), k += template_field_Slider("border-slider", JS_BORDER_RADIUS), k += template_field_chkApplyAllItem("button", JS_APPLY_TO_ALL_BUTTON_IN_BLOCK), k += "</div>", k += "</div>", k += template_field_SaveAndClose("button"), $("#dvSettingBlock").append(k), "full" == j ? $("#fldHPadding").addClass("hidden") : $("#fldHPadding").removeClass("hidden"); var l = this.borderRadius;
        $("#border-slider", "#dvSettingBlock").slider({ value: l, min: 0, max: 20, step: 5, slide: function (a, c) { $(".new-slider-val", $("#border-slider", "#dvSettingBlock")).text(c.value), blkObjectData.borderRadius = c.value, $(".bmeButton .bmeButtonText", _editBlock).css({ "border-radius": blkObjectData.borderRadius + "px" }), b() }, start: function (a, b) { $(".new-slider-val", $("#border-slider", "#dvSettingBlock")).show() }, stop: function (a, b) { $(".new-slider-val", $("#border-slider", "#dvSettingBlock")).delay(400).fadeOut(200) } }).find(".ui-slider-handle").append($("<div />").css("display", "none").addClass("new-slider-val")), $(".new-slider-val", $("#border-slider", "#dvSettingBlock")).text(l); var m = this.paddingH;
        $("#padding-h-slider", "#dvSettingBlock").slider({ value: m, min: 0, max: 40, step: 5, slide: function (a, b) { $(".new-slider-val", $("#padding-h-slider", "#dvSettingBlock")).text(b.value), blkObjectData.paddingH = b.value, $("td:first, td:last", $("tr:first", _editBlock)).attr("width", blkObjectData.paddingH) }, start: function (a, b) { $(".new-slider-val", $("#padding-h-slider", "#dvSettingBlock")).show() }, stop: function (a, b) { $(".new-slider-val", $("#padding-h-slider", "#dvSettingBlock")).delay(400).fadeOut(200) } }).find(".ui-slider-handle").append($("<div />").css("display", "none").addClass("new-slider-val")), $(".new-slider-val", $("#padding-h-slider", "#dvSettingBlock")).text(m), m = this.paddingV, $("#padding-v-slider", "#dvSettingBlock").slider({ value: m, min: 0, max: 20, step: 5, slide: function (a, b) { $(".new-slider-val", $("#padding-v-slider", "#dvSettingBlock")).text(b.value), blkObjectData.paddingV = b.value, $("td", $("tr:first, tr:last", $(".tblContainer", _editBlock))).attr("height", blkObjectData.paddingV) }, start: function (a, b) { $(".new-slider-val", $("#padding-v-slider", "#dvSettingBlock")).show() }, stop: function (a, b) { $(".new-slider-val", $("#padding-v-slider", "#dvSettingBlock")).delay(400).fadeOut(200) } }).find(".ui-slider-handle").append($("<div />").css("display", "none").addClass("new-slider-val")), $(".new-slider-val", $("#padding-v-slider", "#dvSettingBlock")).text(m), m = this.paddingButtonH, $("#padding-button-h-slider", "#dvSettingBlock").slider({ value: m, min: 0, max: 40, step: 5, slide: function (a, c) { $(".new-slider-val", $("#padding-button-h-slider", "#dvSettingBlock")).text(c.value), blkObjectData.paddingButtonH = c.value, $(".bmeButtonText", _editBlock).css({ "padding-left": blkObjectData.paddingButtonH + "px", "padding-right": blkObjectData.paddingButtonH + "px" }), b() }, start: function (a, b) { $(".new-slider-val", $("#padding-button-h-slider", "#dvSettingBlock")).show() }, stop: function (a, b) { $(".new-slider-val", $("#padding-button-h-slider", "#dvSettingBlock")).delay(400).fadeOut(200) } }).find(".ui-slider-handle").append($("<div />").css("display", "none").addClass("new-slider-val")), $(".new-slider-val", $("#padding-button-h-slider", "#dvSettingBlock")).text(m), m = this.paddingButtonV, $("#padding-button-v-slider", "#dvSettingBlock").slider({ value: m, min: 0, max: 20, step: 5, slide: function (a, c) { $(".new-slider-val", $("#padding-button-v-slider", "#dvSettingBlock")).text(c.value), blkObjectData.paddingButtonV = c.value, $(".bmeButtonText", _editBlock).css({ "padding-top": blkObjectData.paddingButtonV + "px", "padding-bottom": blkObjectData.paddingButtonV + "px" }), b() }, start: function (a, b) { $(".new-slider-val", $("#padding-button-v-slider", "#dvSettingBlock")).show() }, stop: function (a, b) { $(".new-slider-val", $("#padding-button-v-slider", "#dvSettingBlock")).delay(400).fadeOut(200) } }).find(".ui-slider-handle").append($("<div />").css("display", "none").addClass("new-slider-val")), $(".new-slider-val", $("#padding-button-v-slider", "#dvSettingBlock")).text(m); var n = $("span", $(".bmeButtonText", _editBlock)).css("font-family"),
            o = $("span", $(".bmeButtonText", _editBlock)).css("font-size"),
            p = $("a", $(".bmeButtonText", _editBlock)).css("color");
        SetFontFamily(n), SetFontSize(o), $("#toolbarColor").spectrum("set", p), editTarget = $("span", _editBlock), editTarget1 = $(".bmeButtonText", _editBlock), LoadToolBar(this.type), currentVariable = $("a", _editBlock), "#" == $(currentVariable).attr("href") || "" == $(currentVariable).attr("href") ? IsLink(!1, 0) : IsLink(!0, 0), tmpText = $(editTarget1).css("font-weight"), "bold" == tmpText || 700 == tmpText ? IsBold(!0, 0) : IsBold(!1, 0), tmpText = $(editTarget1).css("font-style"), "italic" == tmpText ? IsItalic(!0, 0) : IsItalic(!1, 0), h(), EditModeOn = !0 }

    function g() { $("#txtLinkURL", "#dvSettingBlock").val(""), $(currentVariable).attr("href", ""), IsLink(!1, 0) }

    function h() { i(), $(_editBlock).on("click", CheckOpenLinkDialog) }

    function i() { $(_editBlock).off("click", CheckOpenLinkDialog) }

    function j(a) { var b = $("." + rootBlockClass, "#" + this.id);
        $(b).attr("width", a), $(this).width = a }

    function k() { var a = $("." + rootBlockClass, "#" + this.id);
        $(a).attr("width", "100%") } this.width = "100%", this.backgroundColor = "", this.buttonWidth = "", this.buttonBGColor = "", this.borderRadius = "", this.borderWidth = "", this.borderColor = "", this.borderStyle = "", this.paddingV = "", this.paddingH = "", this.paddingButtonV = "", this.paddingButtonH = "", this.align = "", this.url = "", this.linkText = "", this.text = "", this.type = "button", this.load = e, this.removeLink = g, this.unload = d, this.setWidth = j, this.resetWidth = k, this.renderSetting = f, this.getHTML = c, this.bindItem = h, this.unbindItem = i, this.id = "", this.applyAll = b, this.unApplyAll = a }

function CheckOpenLinkDialog() { if ("" == toolBar || null == toolBar) return OpenLinkDialog(!0), !1 }

function Block_Card() {
    function a() { blkObjectData.applyText(), blkObjectData.unbindDDCardImage(), $("img", $(".bmeImageTable", _editBlock)).attr("width", "2"), $("img", $(".bmeCaptionTable", _editBlock)).attr("width", "2").removeAttr("height"), blkObjectData.imageSrc = $("td[name='bmeImgHolder']", $(".bmeImageTable", _editBlock)).html(), "" == blkObjectData.imageSrc && (blkObjectData.imageSrc = BLANK_IMAGE_CODE), "video" == $(blkObjectData.imageSrc).attr("type") && (blkObjectData.isVideo = 1), imageAlign = $("td[name='bmeImgHolder']", $(".bmeImageTable", _editBlock)).attr("align"), "undefined" == typeof imageGAlign && (imageGAlign = ""), "undefined" == typeof imageGVAlign && (imageGVAlign = ""), "" == imageAlign && (imageAlign = "center"), "" == imageGAlign ? imageGAlign = imageAlign : imageGAlign != imageAlign && (imageGAlign = "custom"), imageVAlign = $("td[name='bmeImgHolder']", $(".bmeImageTable", _editBlock)).attr("valign"), "" == imageVAlign && (imageVAlign = "top"), "" == imageGVAlign ? imageGVAlign = imageVAlign : imageGVAlign != imageVAlign && (imageGVAlign = "custom"), blkObjectData.caption = $("td[name='tblCell']", $(".bmeCaptionTable", _editBlock)).html(), "" == blkObjectData.caption && (blkObjectData.caption = '<div style="line-height:150%;">' + JS_DEFAULT_CAPTION_CONTENT + "</div>"), p(blkObjectData), $(_editBlock).html(blkObjectData.getHTML(blkObjectData)), blkObjectData.setWidth(blkObjectData.width), blkObjectData.applyEditor(), blkObjectData.bindDDCardImage() }

    function b() { LoadTiny($("td[name='tblCell']:first", _editBlock)) }

    function c(a) {
        var b = this;
        null != a && (b = a);
        var c = "",
            d = "",
            e = "",
            f = b.width - 2 * (parseWidth(b.paddingH) + parseWidth(b.borderWidth)),
            g = '<table width="' + b.width + '" cellspacing="0" cellpadding="0" border="0" class="' + rootBlockClass + '" name="blk_card"><tr><td class=bmeImageCard align=center ';
        g += 'style="padding-left:' + parseWidth(b.paddingH) + "px; padding-right:" + parseWidth(b.paddingH) + "px; padding-top:" + parseWidth(b.paddingV) + "px; padding-bottom:" + parseWidth(b.paddingV) + 'px;"', g += ">", g += '<table width="100%" cellspacing="0" cellpadding="0" border="0"><tr><td valign=top class=bmeImageContainer', g += ' style="border-collapse:collapse;', null != b.borderWidth && "undefined" != typeof this.borderWidth || (b.borderWidth = "1"), null != b.borderColor && "undefined" != typeof this.borderColor || (b.borderColor = "#1E1E1E"), null != b.borderStyle && "undefined" != typeof this.borderStyle || (b.borderStyle = "solid"), "" != b.backgroundColor && "transparent" != b.backgroundColor && (g += "background-color:" + b.backgroundColor + ";"), "0" != b.borderWidth && "" != b.borderWidth && "0px" != b.borderWidth && "none" != b.borderStyle && (g += "border-width:" + parseWidth(b.borderWidth) + "px; ", "" == b.borderColor && (b.borderColor = "#000000;"), g += "border-color:" + b.borderColor + ";", "" == b.borderStyle && (b.borderStyle = "solid"), g += "border-style:" + b.borderStyle + ";"), g += '">';
        var h = f,
            i = f,
            j = "0" == b.edge2edge ? "" : " padding: 0px !important;";
        return e = "<table cellspacing=0 cellpadding=0 border=0 class=bmeImageTable ", "left" == b.captionPosition || "right" == b.captionPosition ? ("50%" == b.imageArea ? h = fixInt(f / 2) : "70%" == b.imageArea ? h = fixInt(f / 3 * 2) : "30%" == b.imageArea && (h = parseInt(f / 3)), i = f - h, "left" == b.captionPosition ? e += ' style="float:right; width:' + parseWidth(h) + "px;" + j + '" align="right" dimension="' + b.imageArea + '"  width="' + h + '" ' : "right" == b.captionPosition && (e += ' style="float:left; width:' + parseWidth(h) + "px;" + j + '" align="left" dimension="' + b.imageArea + '" width="' + h + '" ')) : e += ' width="' + parseWidth(h) + '" style="width:' + parseWidth(h) + "px;" + j + '" ', e += "><tr><td name=bmeImgHolder", "0" == b.edge2edge && (e += ' style="padding:20px;"'), "" != b.imageAlign && "undefined" != typeof b.imageAlign || (b.imageAlign = "center"), "" != b.imageVAlign && "undefined" != typeof b.imageVAlign || (b.imageVAlign = "top"), e += ' align="' + b.imageAlign + '" valign="' + b.imageVAlign + '" ', "" == b.imageSrc && (b.imageSrc = BLANK_IMAGE_CODE), e += ">" + b.imageSrc, "video" == $(b.imageSrc).attr("type") && (b.isVideo = 1), e += "</td></tr></table>", d = "top" == b.captionPosition || "left" == b.captionPosition ? "<table cellspacing=0 cellpadding=0 border=0 class='bmeCaptionTable bmeCaptionTableMobileTop'" : "<table cellspacing=0 cellpadding=0 border=0 class=bmeCaptionTable ", c = "", "left" == b.captionPosition || "right" == b.captionPosition ? "left" == b.captionPosition ? (d += ' style="float:left; width:' + parseWidth(i) + 'px;" width="' + parseWidth(i) + '" align="left" ', c = "0" == b.edge2edge ? ' style="padding:20px 0px 20px 20px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-size: 14px; color: #383838; text-align: left;" ' : ' style="padding:20px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-size: 14px; color: #383838; text-align: left;" ') : "right" == b.captionPosition && (d += ' style="float:right; width:' + parseWidth(i) + 'px;" width="' + parseWidth(i) + '" align="right" ', c = "0" == this.edge2edge ? ' style="padding:20px 20px 20px 0px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-size: 14px; color: #383838; text-align: left;" ' : ' style="padding:20px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-size: 14px; color: #383838; text-align: left;" ') : "top" == b.captionPosition ? (d += ' width="100%" ', c = "0" == b.edge2edge ? ' style="padding:20px 20px 0px 20px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-size: 14px; color: #383838; text-align: left;" ' : ' style="padding:20px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-size: 14px; color: #383838; text-align: left;" ') : "bottom" == this.captionPosition && (d += ' width="100%" ',
            c = "0" == b.edge2edge ? ' style="padding:0px 20px 20px 20px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-size: 14px; color: #383838; text-align: left;" ' : ' style="padding:20px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-size: 14px; color: #383838; text-align: left;" '), d += "><tr><td " + c + ' name="tblCell" class="tblCell" valign="top" align="left">', "" == b.caption && (b.caption = '<div style="line-height: 150%;">' + JS_DEFAULT_IMAGE_CARD_CONTENT + "</div>"), d += b.caption, d += "</td></tr></table>", g += '<table cellspacing="0" cellpadding="0" border="0" width="100%"><tbody><tr><td valign="top" align="center" class="tdPart">', "top" == b.captionPosition ? (g += d, g += e) : "bottom" == b.captionPosition ? (g += e, g += d) : "left" == b.captionPosition ? (g += d, g += '</td><td valign="top" align="center" class="tdPart">', g += e) : "right" == b.captionPosition && (g += e, g += '</td><td valign="top" align="center" class="tdPart">', g += d), g += "</td></tr></tbody></table>", p(b), g += "</td></tr></table>", g += "</td></tr></table>"
    }

    function d(a) { f(), h(), l(), $("#dvSettingBlock").off(), $("#dvSettingBlock").empty(), DisableToolbar(0), detectEditorLoad = null, detectEditorInit = null }

    function e(a) { if ($(a).parent().hasClass("blk_wrapper")) this.id = GetBlockID(a);
        else { this.id = SetWidgetBlockID(); var b = this.id,
                c = getNewBlockWrapper(b, "blk_card", $(a).clone().wrap("<div />").parent().html());
            $(a).replaceWith(c) } var d = $("." + rootBlockClass, "#" + this.id);
        this.width = $(d).attr("width"), this.backgroundColor = $(".bmeImageContainer", d).css("background-color"); var e = "",
            f = "",
            g = "",
            h = ""; if (this.paddingH = $(".bmeImageCard", d).css("padding-left"), "undefined" == typeof this.paddingH && (this.paddingH = "20"), this.paddingH = parseWidth(this.paddingH), this.paddingV = $(".bmeImageCard", d).css("padding-top"), "undefined" == typeof this.paddingV && (this.paddingV = "20"), this.paddingV = parseWidth(this.paddingV), g = $("td[name='bmeImgHolder']", $(".bmeImageTable", d)).attr("align"), "" == g && (g = "center"), "" == e ? e = g : e != g && (e = "custom"), h = $("td[name='bmeImgHolder']", $(".bmeImageTable", d)).attr("valign"), "" == h && (h = "top"), "" == f ? f = h : f != h && (f = "custom"), this.borderStyle = $(".bmeImageContainer", d).css("border-top-style"), "none" == this.borderStyle ? this.borderColor = "" : this.borderColor = $(".bmeImageContainer", d).css("border-top-color"), this.borderWidth = parseWidth(GetBorderDetail($(".bmeImageContainer", d), "width")), $(".bmeImageContainer", d).css("border-collapse", "collapse"), this.imageSrc = $("td[name='bmeImgHolder']", $(".bmeImageTable", d)).html(), "" == this.imageSrc && $("td[name='bmeImgHolder']", $(".bmeImageTable", d)).html(BLANK_IMAGE_CODE), "video" == $(this.imageSrc).attr("type") && (this.isVideo = 1), this.imageAlign = e, null != this.imageAlign && "" != this.imageAlign || (this.imageAlign = "center"), this.imageVAlign = f, null != this.imageVAlign && "" != this.imageVAlign || (this.imageVAlign = "top"), this.caption = $("td[name='tblCell']", $(".bmeCaptionTable", d)).html(), "" == this.caption && (this.caption = '<div style="line-height:150%;">' + JS_DEFAULT_CAPTION_CONTENT + "</div>"), 1 == $("td.tdPart", $(".bmeImageContainer", d)).length ? $("table", $("td.tdPart", $(".bmeImageContainer", d))).first().hasClass("bmeCaptionTable") ? this.captionPosition = "top" : this.captionPosition = "bottom" : "left" == $(".bmeImageTable", d).attr("align") ? this.captionPosition = "right" : "right" == $(".bmeImageTable", d).attr("align") && (this.captionPosition = "left"), "left" == this.captionPosition || "right" == this.captionPosition) { var i = $(".bmeImageTable:first", d).attr("dimension"); if ("undefined" != typeof i) this.imageArea = i;
            else { var j = $(".bmeImageTable", d).width(),
                    k = $(".bmeCaptionTable", d).width();
                checkEqual(j, k, 24) ? this.imageArea = "50%" : j > k ? this.imageArea = "70%" : j < k && (this.imageArea = "30%") } } return "0px" == $("td[name='bmeImgHolder']", $(".bmeImageTable", d)).css("padding-top") ? this.edge2edge = "1" : this.edge2edge = "0", detectEditorLoad = "blkObjectData.assignHeight()", detectEditorInit = "blkObjectData.assignHeight()", this }

    function f() { try { var a = tinyMCE.get("txaEditableContent").getContent();
            tinymce.execCommand("mceRemoveControl", !0, "txaEditableContent"), purge($("#txaEditableContent")), $("#txaEditableContent").remove(), purge($("#editTexttxaEditableContent")), $("#editTexttxaEditableContent").remove(), a.indexOf("editTexttxaEditableContent") != -1 && (a = $(a).html()), a = fixSaveTextContent(a), $("td[name='tblCell']:first", _editBlock).html(a) } catch (b) {} detectEditorFocus = null }

    function g(a) { $("#dvSettingBlock").off(), $("#dvSettingBlock").empty(), $(".sidebar-editblock-name").text(JS_BLOCK_IMAGE_CARD), 1 == $("var", $(".bmeImageTable", _editBlock)).length && (this.isVideo = 1); var b = ($(this.imageSrc), chkColorVal(this.backgroundColor)),
            c = ""; "" != b && (c = hexc(b.toLowerCase())); var d = chkColorVal(this.borderColor),
            e = ""; "" != d && (e = hexc(d.toLowerCase())); var f = "";
        f += "<div id=mainSetting class=current>", f += "<div class='panel-container'>", f += '<div class="subpanel-nav clearfix2"><span class="selected" onclick="javascript:subcontentToggle(this, \'sub1\');">' + JS_SETTINGS + '</span><span class="" onclick="javascript:subcontentToggle(this, \'sub2\');">' + JS_CONTENT + "</span></div>", f += '<div class="subcontent current sub1">', f += template_field_BackgroundColor("card", c, b, JS_BACKGROUND, "rctrlBGColor", "ctrlBGColor"), f += template_field_BorderStyles("card", e, d, this.borderStyle, this.borderWidth, JS_BORDER), f += template_field_Slider("padding-h-slider", JS_H_PADDING), f += template_field_Slider("padding-v-slider", JS_V_PADDING), f += "</div>", f += '<div class="subcontent sub2">', f += '<fieldset><label class="label-small">' + JS_CAPTION_POSITION + "</label><select id=\"capPos\" onchange=\"javascript:selectChangeHandler('card', this);\" class='form-control form-control-small'><option value=top " + ("top" == this.captionPosition ? "selected" : "") + ">" + JS_POSITION_TOP + "</option><option value=left " + ("left" == this.captionPosition ? "selected" : "") + ">" + JS_POSITION_LEFT + "</option><option value=right " + ("right" == this.captionPosition ? "selected" : "") + ">" + JS_POSITION_RIGHT + "</option><option value=bottom " + ("bottom" == this.captionPosition ? "selected" : "") + ">" + JS_POSITION_BOTTOM + "</option></select></fieldset>", f += '<fieldset id=fldImageArea><label class="label-small">' + JS_IMAGE_AREA + "</label><select id=imgArea onchange=\"javascript:selectChangeHandler('card', this);\" class='form-control form-control-small'><option value=\"50%\" " + ("50%" == this.imageArea ? "selected" : "") + ">" + JS_SIZE_50 + '</option><option value="30%" ' + ("30%" == this.imageArea ? "selected" : "") + ">" + JS_SIZE_30 + '</option><option value="70%" ' + ("70%" == this.imageArea ? "selected" : "") + ">" + JS_SIZE_70 + "</option></select></fieldset>", f += template_field_alignment("imagecaption", "horizontal", JS_IMAGE_ALIGN, "imgGAlign", this.imageAlign, "fld_imgGAlign"), f += template_field_alignment("imagecaption", "vertical", JS_IMAGE_V_ALIGN, "imgGVAlign", this.imageVAlign, "fld_imgGVAlign"), f += '<fieldset><label class="label-small">' + JS_IMAGE_DISPLAY + '</label><div><input class="form-checkbox" type="checkbox" onchange="javascript:colorChangeHandler(\'card\', this);" name="chkedge" id="chkedge" value="1" ' + ("1" == this.edge2edge ? "checked" : "") + ' /><label for="chkedge" class="form-option form-option-small">' + JS_ALIGN_TO_EDGE + "</label></fieldset>", f += template_field_LineHeight("card"), f += "</div>", f += "</div>", f += template_field_SaveAndClose("card"), f += "</div>", f += "<div id=mainSettingVeil onclick=\"javascript:colorChangeHandler('card', this);\"></div>", f += "<div id=itemSetting>", f += "<div class='panel-container'>", f += '<fieldset id=fldImageDetail><label class="label-small"><span id=lblImageName></span><a class=reset-link id=rEdit onclick="javascript:colorChangeHandler(\'card\', this);"><small>' + JS_EDIT + "</small></a> <a class=reset-link id=rReplace onclick=\"javascript:colorChangeHandler('imagecaption', this);\"><small>" + JS_REPLACE + "</small></a> <a class=reset-link id=rLink onclick=\"javascript:colorChangeHandler('imagecaption', this);\"><small>" + JS_LINK + "</small></a></label></fieldset>", f += template_field_TextInput("card", JS_ALT_TEXT, "txtAltText", "txtAltText", "", "", "fldImageAltDetail"), f += template_field_alignment("imagecaption", "horizontal", JS_IMAGE_ALIGN, "imgAlign", "", "fld_imgAlign"), f += template_field_alignment("imagecaption", "vertical", JS_IMAGE_V_ALIGN, "imgVAlign", "", "fld_imgVAlign"), f += "</div>", f += template_field_SaveAndBack("card"), f += "</div>", $("#dvSettingBlock").append(f); var g = parseWidth(this.paddingH);
        $("#padding-h-slider", "#dvSettingBlock").slider({ value: g, min: 0, max: 20, step: 5, slide: function (a, b) { $(".new-slider-val", $("#padding-h-slider", "#dvSettingBlock")).text(b.value), blkObjectData.paddingH = b.value, blkObjectData.refreshBlock() }, start: function (a, b) { $(".new-slider-val", $("#padding-h-slider", "#dvSettingBlock")).show() }, stop: function (a, b) { $(".new-slider-val", $("#padding-h-slider", "#dvSettingBlock")).delay(400).fadeOut(200) } }).find(".ui-slider-handle").append($("<div />").css("display", "none").addClass("new-slider-val")), $(".new-slider-val", $("#padding-h-slider", "#dvSettingBlock")).text(g), g = parseWidth(this.paddingV), $("#padding-v-slider", "#dvSettingBlock").slider({ value: g, min: 0, max: 20, step: 5, slide: function (a, b) { $(".new-slider-val", $("#padding-v-slider", "#dvSettingBlock")).text(b.value), blkObjectData.paddingV = b.value, blkObjectData.refreshBlock() }, start: function (a, b) { $(".new-slider-val", $("#padding-v-slider", "#dvSettingBlock")).show() }, stop: function (a, b) { $(".new-slider-val", $("#padding-v-slider", "#dvSettingBlock")).delay(400).fadeOut(200) } }).find(".ui-slider-handle").append($("<div />").css("display", "none").addClass("new-slider-val")), $(".new-slider-val", $("#padding-v-slider", "#dvSettingBlock")).text(g), 0 == $("img", $(".bmeImageTable", _editBlock)).length ? $("#fldImageDetail", "#dvSettingBlock").addClass("hidden") : ($("#lblImageName", $("#dvSettingBlock")).html("<img src='" + $("img", $(".bmeImageTable", _editBlock)).attr("src") + "' isvideo=" + this.isVideo + " border=0 style='max-width:100px;max-height:100px;display:block;' />"), $("#fldImageDetail", "#dvSettingBlock").removeClass("hidden")), "top" == this.captionPosition || "bottom" == this.captionPosition ? ($("#fldImageArea").addClass("hidden"), $("#fld_imgGVAlign").addClass("hidden"), $("#fld_imgVAlign").addClass("hidden")) : ($("#fldImageArea").removeClass("hidden"), $("#fld_imgGVAlign").removeClass("hidden"), $("#fld_imgVAlign").removeClass("hidden")), detectEditorInit = "blkObjectData.assignHeight()", detectEditorLoad = "blkObjectData.assignHeight()", LoadToolBar(0), l(), k(), currentEdit = "txaEditableContent", LoadTiny($("td[name='tblCell']:first", _editBlock)), h(), EditModeOn = !0 }

    function h(a) { "undefined" == typeof a ? blockAssignHeight("dv_" + currentEditID, "card") : blockAssignHeight($(a).parent().attr("id"), "card") }

    function i(a) { l(), 1 == $("a", $(".bmeImageTable", _editBlock)).length ? $("a", $(".bmeImageTable", _editBlock)).attr("href", a) : $("img", $(".bmeImageTable", _editBlock)).wrap('<a href="' + a + '" />'), k(), _editBlockItem = null }

    function j(a) { 1 == $("a", $(".bmeImageTable", _editBlock)).length && (l(), $("a", $(".bmeImageTable", _editBlock)).parent().html($("a", $(".bmeImageTable", _editBlock)).html()), k()) }

    function k() { null != _editBlock && ($("a[name='ancUploadImage']", _editBlock).on("click", o), $(".bmeImageTable").on("click", o), h(), _StartDDImage()) }

    function l() { null != _editBlock && ($("a[name='ancUploadImage']", _editBlock).off("click", o), $(".bmeImageTable").off("click", o)) }

    function m(a) { IsLink(!1, 0), n(a); var b = "";
        $("img", editTarget1).each(function () { b = $(this).attr("src") }), "" == b || b == smImage ? ($("#fldImageDetail, #fldImageAltDetail").addClass("hidden"), panelToggle("second", "hide"), OpenImageDialog("1")) : ($("a", editTarget1).length > 0 ? IsLink(!0, 0) : IsLink(!1, 0), $("#lblImageName", $("#itemSetting")).html("<img src='" + b + "' border=0 style='max-width:100px;max-height:100px;display:block;' />"), $("#fldImageDetail, #fldImageAltDetail").removeClass("hidden"), panelToggle("second")) }

    function n(a) { _editBlockItem = a, editTarget1 = $(".bmeImageTable", a), lastActiveEditorID = $("textarea", a).attr("id"); var b = $(editTarget1).attr("imgid");
        oldBlockContent = { image: $(editTarget1).html(), text: fixLoadTextContent(tinyMCE.get(lastActiveEditorID).getContent()), imageid: b, textid: lastActiveEditorID }; var c = "",
            d = "",
            e = "",
            f = "";
        $("img", editTarget1).each(function () { c = $(this).attr("alt"), "undefined" == c && (c = ""), d = $(this).attr("src") }), $("a#rLink, a#rEdit", "#dvSettingBlock").removeClass("hidden"), panelToggle("second"), e = $("td", editTarget1).attr("align"), "" != e && "undefined" != e || (e = "center"), f = $("td", editTarget1).attr("valign"), "" != f && "undefined" != f || (f = "top"), $(".bmeImageContainer", _editBlock).removeClass("bmenohilite"), $(".bmeImageContainer", _editBlock).addClass("bmenohilite"), $(a).removeClass("bmenohilite"), currentVariable = $("a", editTarget1), $("input[name='txtAltText']", $("#itemSetting", "#dvSettingBlock")).val(c), applyAlignSelectedState("#fld_imgAlign", e), applyAlignSelectedState("#fld_imgVAlign", f), $("select#imgAlign", $("#itemSetting", "#dvSettingBlock")).val(e), $("select#imgVAlign", $("#itemSetting", "#dvSettingBlock")).val(f), $(".bmeImageTable", _editBlock).length > 1 ? ($("a[name='ancRemoveImage']", "#dvSettingBlock").removeClass("hidden"), panelToggle("second")) : ($("a[name='ancRemoveImage']", "#dvSettingBlock").addClass("hidden"), panelToggle("second", "hide")), $("#dvSettingBlock").show(), panelToggle("second") }

    function o(a) { currentImageCtrl = blkObjectData, a.preventDefault(), a.stopPropagation(), detectEditorFocus = "_changeCaptionFocus()"; var b = ""; for (null != editTarget1 && $("img", editTarget1).each(function () { $(this).attr("alt", $("input[name='txtAltText']").attr("value")) }), b = $(this); !$(b).hasClass("bmeImageContainer") && !$(b).hasClass("bmeImageContainer");) b = $(b).parent();
        m(b) }

    function p(a) { $("#imgGAlign", "#mainSetting").val(a.imageAlign), applyAlignSelectedState("#fld_imgGAlign", a.imageAlign), $("#imgGVAlign", "#mainSetting").val(a.imageVAlign), applyAlignSelectedState("#fld_imgGVAlign", a.imageVAlign) }

    function q(a) { var b = $("img", a);
        l(), $("td[name='bmeImgHolder']", $(".bmeImageTable", _editBlock)).first().html(a), $("img", $(".bmeImageTable", _editBlock)).each(function () { $(this).css({ "max-width": "720px", display: "block" }), $(this).removeAttr("height"), $(this).attr("width", "2") }), $("#lblImageName", $("#dvSettingBlock")).html("<img src='" + $(b).attr("src") + "' isvideo=1 border=0 style='max-width:100px;max-height:100px;display:block;' />"), $("#rLink, #rEdit", $("#dvSettingBlock")).addClass("hidden"), $("#fldImageDetail", "#dvSettingBlock").removeClass("hidden"), t($(_editBlock).attr("width"), _editBlock), k(), currentImageCtrl = null }

    function r(a) { var b = $(a);
        l(); var c = parseWidth($(b).attr("width"));
        0 == c && (c = $(b).width()); var d = $("input[name='txtAltText']", $("#itemSetting", "#dvSettingBlock")).val(),
            e = $("<div>");
        $(e).append(a), $("img", e).attr("alt", d), $("img", e).css({ "max-width": c, display: "block" }), $("img", e).removeAttr("height"), a = $(e).html(); var f = $("a", $(".bmeImageTable", _editBlock)).first().attr("href"); "undefined" != typeof f && "" != f && (a = '<a href="' + f + '">' + a + "</a>"), $("td[name='bmeImgHolder']", $(".bmeImageTable", _editBlock)).first().html(a), $("img", $(".bmeImageTable", _editBlock)).each(function () { imgWidth = $(this).attr("width"), imgWidth > c && $(this).attr("width", c), $(this).css({ "max-width": c, display: "block" }), $(this).removeAttr("height"), $(this).attr("width", "2") }), $("#lblImageName", $("#dvSettingBlock")).html("<img src='" + $(b).attr("src") + "' isvideo=0 border=0 style='max-width:100px;max-height:100px;display:block;' />"), $("#rLink, #rEdit", $("#dvSettingBlock")).removeClass("hidden"), $("#fldImageDetail", "#dvSettingBlock").removeClass("hidden"), $("#fldImageAltDetail").removeClass("hidden"), t($(_editBlock).attr("width"), _editBlock), k(), currentImageCtrl = null, panelToggle("second") }

    function s(a) { $(this).width = a, t(a, $("." + rootBlockClass, "#" + this.id)) }

    function t(a, b) { var c = 0,
            d = 0,
            e = 0,
            f = 0;
        e = $("td[name='bmeImgHolder']", $(".bmeImageTable", b)).first().css("padding-top"), "undefined" == typeof e && (e = ""), e.indexOf("px") != -1 && (e = e.replace("px", "")), $(b).attr("width", a); var g = parseWidth($(".bmeImageCard", b).css("padding-left")),
            i = (parseWidth($(".bmeImageCard", b).css("padding-top")), parseWidth(GetBorderDetail($(".bmeImageContainer", b), "width"))); if (d = a - 2 * (g + i), "left" == $(".bmeImageTable", b).css("float") || "right" == $(".bmeImageTable", b).css("float")) { var j = $(".bmeImageTable:first", b).attr("dimension"); if ("undefined" == typeof j) { var k = $(".bmeImageTable", b).width(),
                    l = $(".bmeCaptionTable", b).width();
                checkEqual(k, l, 24) ? j = "50%" : k < l ? j = "30%" : k > l && (j = "70%") } "50%" == j ? f = fixInt(d / 2) : "30%" == j ? f = fixInt(d / 3) : "70%" == j && (f = fixInt(d / 3 * 2)); var m = parseWidth(d) - parseWidth(f);
            $(".bmeImageTable", b).attr("dimension", j), $(".bmeImageTable", b).attr("width", f).css("width", ""), $(".bmeCaptionTable", b).attr("width", m).css("width", ""), $(".bmeImageContainer", b).attr("width", d) } else f = d, $(".bmeImageTable", b).attr("width", f).css("width", ""), $(".bmeCaptionTable", b).attr("width", f).css("width", ""); var n = "top";
        n = $("table", $(".bmeImageContainer", b)).first().hasClass("bmeCaptionTable") ? "top" : "left" == $(".bmeImageTable", b).attr("align") ? "right" : "right" == $(".bmeImageTable", b).attr("align") ? "left" : "bottom", "0" != e ? "20px" != $("td[name='bmeImgHolder']", $(".bmeImageTable", b)).first().css("padding-top") && "20px" != $("td[name='bmeImgHolder']", $(".bmeImageTable", b)).first().css("padding-right") && "20px" != $("td[name='bmeImgHolder']", $(".bmeImageTable", b)).first().css("padding-left") && "20px" != $("td[name='bmeImgHolder']", $(".bmeImageTable", b)).first().css("padding-bottom") || (d = f - 40) : d = f, $("img", $(".bmeImageTable", b)).each(function () { c = parseWidth(GetBorderDetail($(this), "max-width")), c < d ? 0 != c ? $(this).attr("width", c).attr("border", "0") : 2 == $(this).attr("width") && $(this).removeAttr("width") : $(this).attr("width", d).attr("border", "0") }), setImageSetting(d, $(".bmeImageTable", b)), $("img", $(".bmeCaptionTable", b)).attr("width", "2").removeAttr("height"), d = $("td[name=tblCell]", b).width(), $("img", $(".bmeCaptionTable", b)).each(function () { c = parseWidth(GetBorderDetail($(this), "max-width")), c < d ? 0 != c ? $(this).attr("width", c).attr("border", "0") : 2 == $(this).attr("width") && $(this).removeAttr("width") : $(this).attr("width", d).attr("border", "0") }), "left" == n || "right" == n ? h(b) : $(".bmeImageTable", b).css("height", "") }

    function u() { var a = $("." + rootBlockClass, "#" + this.id);
        $(a).attr("width", "100%");
        $(".bmeImageTable", a).width(); if ("left" == $(".bmeImageTable", a).css("float") || "right" == $(".bmeImageTable", a).css("float")) { var b = $(".bmeImageTable", a).width(),
                c = $(".bmeCaptionTable", a).width(),
                d = $(".bmeImageTable:first", a).attr("dimension"); "undefined" == typeof d ? checkEqual(b, c, 24) ? $(".bmeImageTable", a).attr("width", "50%") : b > c ? $(".bmeImageTable", a).attr("width", "70%") : b < c && $(".bmeImageTable", a).attr("width", "30%") : $(".bmeImageTable", a).attr("width", d), $(".bmeImageTable", a).attr("dimension", $(".bmeImageTable", a).attr("width")), $(".bmeCaptionTable", a).attr("width", "2") } else $(".bmeImageTable", a).attr("dimension", "100%"), $(".bmeImageTable", a).attr("width", "100%"), $(".bmeCaptionTable", a).attr("width", "100%");
        $("img", a).attr("width", "2"), $("img", $(".bmeCaptionTable", a)).attr("width", "2").removeAttr("height") } this.width = "100%", this.backgroundColor = "", this.imageSrc = "", this.borderWidth = 1, this.borderStyle = "solid", this.borderColor = "#E1E1E1", this.caption = "", this.paddingH = 20, this.paddingV = 20, this.captionPosition = "bottom", this.isVideo = 0, this.imageAlign = "center", this.imageVAlign = "top", this.imageGAlign = "center", this.imageGVAlign = "top", this.imageArea = "100%", this.edge2edge = "0", this.load = e, this.unload = d, this.setWidth = s, this.resetWidth = u, this.renderSetting = g, this.getHTML = c, this.id = "", this.type = "card", this.insertImage = r, this.insertVideo = q, this.assignHeight = h, this.addLink = i, this.removeLink = j, this.unbindDDCardImage = l, this.bindDDCardImage = k, this.applyText = f, this.applyEditor = b, this.refreshBlock = a
}

function Block_Divider() {
    function a() { var a = '<table width="' + this.width + '" cellspacing="0" cellpadding="0" border="0" class="' + rootBlockClass + '" name="blk_divider" style="'; return "" != this.backgroundColor && "transparent" != this.backgroundColor && (a += "background-color:" + this.backgroundColor + ";"), a += '"><tbody><tr><td class="tblCellMain" style="', "" != this.paddingTop && (a += "padding-top:" + this.paddingTop + "px; "), "" != this.paddingBottom && (a += "padding-bottom:" + this.paddingBottom + "px;"), "" != this.paddingSide && (a += "padding-left:" + this.paddingSide + "px;padding-right:" + this.paddingSide + "px;"), a += '"><table class=tblLine cellspacing=0 cellpadding=0 border=0 width="100%" style="', "0" != this.borderWidth && "" != this.borderWidth && (a += "border-top-width:" + this.borderWidth + "px; ", "" == this.borderColor && (this.borderColor = "#000000;"), a += "border-top-color:" + this.borderColor + ";", "" == this.borderStyle && (this.borderStyle = "solid"), a += "border-top-style:" + this.borderStyle + ";"), a += '"><tr><td><span></span></td></tr></table>', a += "</td></tr></tbody></table>" }

    function b(a) { if ($(a).parent().hasClass("blk_wrapper")) this.id = GetBlockID(a);
        else { this.id = SetWidgetBlockID(); var b = this.id,
                c = getNewBlockWrapper(b, "blk_divider", $(a).clone().wrap("<div />").parent().html());
            $(a).replaceWith(c) } var d = $("." + rootBlockClass, "#" + this.id);
        this.width = $(d).attr("width"), this.paddingTop = $("td.tblCellMain", d).css("padding-top"), "undefined" == typeof this.paddingTop && (this.paddingTop = "20"), this.paddingTop.indexOf("px") != -1 && (this.paddingTop = this.paddingTop.replace("px", "")), this.paddingBottom = $("td.tblCellMain", d).css("padding-bottom"), "undefined" == typeof this.paddingBottom && (this.paddingBottom = "20"), this.paddingBottom.indexOf("px") != -1 && (this.paddingBottom = this.paddingBottom.replace("px", "")), this.paddingSide = $("td.tblCellMain", d).css("padding-left"), "undefined" == typeof this.paddingSide && (this.paddingSide = "20"), this.paddingSide.indexOf("px") != -1 && (this.paddingSide = this.paddingSide.replace("px", "")), this.borderWidth = GetBorderDetail($("table.tblLine", d), "top-width").replace("px", ""), this.borderStyle = $("table.tblLine", d).css("border-top-style"), "none" == $("table.tblLine", d).css("border-top-style") ? this.borderColor = "" : this.borderColor = $("table.tblLine", d).css("border-top-color"), this.backgroundColor = $(d).css("background-color") }

    function c(a) { $("#editor-slider", "#dvSettingBlock").slider("destroy"), $("#editor-slider", "#dvSettingBlock").remove(), $("#blockSettingContainer", "#dvSettingBlock").remove(), $("#dvSettingBlock").off(), $("#dvSettingBlock").empty(), DisableToolbar(0) }

    function d(a) { $("#dvSettingBlock").off(), $("#dvSettingBlock").empty(); var b = "",
            c = chkColorVal(this.backgroundColor),
            d = ""; "" != c && (d = hexc(c.toLowerCase())); var e = chkColorVal(this.borderColor),
            f = ""; "" != e && (f = hexc(e.toLowerCase())), $(".sidebar-editblock-name").text(JS_BLOCK_DIVIDER), b += "<div class='panel-container'>", b += template_field_BackgroundColor("divider", d, c, JS_BACKGROUND, "rctrlBGColor", "ctrlBGColor"), b += template_field_NumInput("divider", JS_MARGIN_TOP, "margin-top", this.paddingTop), b += template_field_NumInput("divider", JS_MARGIN_BOTTOM, "margin-bottom", this.paddingBottom), b += template_field_Slider("editor-slider", JS_LEFT_RIGHT_PADDING), b += template_field_BorderStyles("divider", f, e, this.borderStyle, this.borderWidth, JS_LINE_STYLE), b += "</div>", b += template_field_SaveAndClose("divider"), $("#dvSettingBlock").append(b), $(".editor-slider", "#dvSettingBlock").slider({ min: 0, max: 20, step: 10, value: this.paddingSide, slide: function (a, b) { $(".new-slider-val", $(".editor-slider", "#dvSettingBlock")).text(b.value), $(".tblCellMain", _editBlock).css({ "padding-left": b.value + "px", "padding-right": b.value + "px" }) }, start: function (a, b) { $(".new-slider-val", $(".editor-slider", "#dvSettingBlock")).show() }, stop: function (a, b) { $(".new-slider-val", $(".editor-slider", "#dvSettingBlock")).delay(400).fadeOut(200) } }).find(".ui-slider-handle").append($("<div />").css("display", "none").addClass("new-slider-val")), $(".new-slider-val", $(".editor-slider", "#dvSettingBlock")).text(this.paddingSide), LoadToolBar(-1) }

    function e(a) { var b = $("." + rootBlockClass, "#" + this.id);
        $(b).attr("width", a), $(this).width = a, $("table.tblLine", b).css("min-width", "1px") }

    function f() { var a = $("." + rootBlockClass, "#" + this.id);
        $(a).attr("width", "100%"), $("table.tblLine", a).css("min-width", "1px") } this.width = "100%", this.paddingTop = 20, this.paddingBottom = 20, this.type = "divider", this.paddingSide = 20, this.borderWidth = 1, this.borderStyle = "solid", this.borderColor = "#e1e1e1", this.backgroundColor = "", this.load = b, this.unload = c, this.setWidth = e, this.resetWidth = f, this.renderSetting = d, this.getHTML = a, this.id = "" }

function Block_Footer() {
    function a(a) { var b = this;
        null != a && (b = a), "" == b.styleVal && (b.styleVal = "font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-size: 11px; line-height: 140%;"), SentTo = PreviewEmail, null != SentTo && "" != SentTo || (SentTo = "test@test.com"), null != JS_FOOTER_ADDRESS && "" != JS_FOOTER_ADDRESS || (JS_FOOTER_ADDRESS = JS_FOOTER_ADDRESS_DEFAULT); var c = '<table width="' + b.width + '" cellspacing="0" cellpadding="0" border="0" class="' + rootBlockClass + '" name="blk_footer" style="'; return "" != b.backgroundColor && "transparent" != b.backgroundColor && (c += "background-color:" + b.backgroundColor + ";"), "" == b.padding && (b.padding = "20"), "" == b.align && (b.align = "left"), "" == b.badgealign && (b.badgealign = "left"), c += '"><tbody><tr><td name="tblCell" class="tblCell" style="', c += "padding:" + parseWidth(b.padding) + "px;", c += '" valign="top" align="left"><table cellpadding=0 cellspacing=0 border=0 width="100%"><tr><td name="bmeBadgeText" style="text-align:' + b.align + '; word-break: break-word;" align="' + b.align + '">', c += '<span id=spnFooterText style="' + b.styleVal + '">', c += '<var type="BME_CANSPAM">' + ReplaceAll(ReplaceAll(ReplaceAll(ReplaceAll(JS_FOOTER_SENT, "#SENT_TO#", SentTo), "SENT_TO", SentTo), "[", "&#091;"), "]", "&#093;") + "</var><br />", c += '<var type="BME_ADDRESS">' + JS_FOOTER_ADDRESS + "</var></span><br /><br />", c += '<span  style="' + b.styleVal + '">', c += '<var type="BME_LINKS">' + JS_FOOTER_LINK + "</var><br />", c += "</td></tr>", "1" == _ShowPoweredFooter && (c += '<tr><td name="bmeBadgeImage" style="text-align:' + b.badgealign + ';padding-top:20px;" align="' + b.badgealign + '">', c += '<var type="BME_BADGE"><img src="' + CurrentBadge + '" border="0" name="bmeBadgeImage" alt=""  /></var>', c += "</td></tr>"), c += "</table></td></tr></table>" }

    function b(a) { $("#dvSettingBlock").off(), $("#dvSettingBlock").empty(), $("img", _editBlock).css("display", ""), "0" == _ShowPoweredFooter && $("td[name='bmeBadgeImage']").remove(), DisableToolbar(0) }

    function c(a) { if ($(a).parent().hasClass("blk_wrapper")) this.id = GetBlockID(a);
        else { this.id = SetWidgetBlockID(); var b = this.id,
                c = getNewBlockWrapper(b, "blk_footer", $(a).clone().wrap("<div />").parent().html());
            $(a).replaceWith(c) } var d = $("." + rootBlockClass, "#" + this.id);
        this.width = $(d).attr("width"), this.backgroundColor = $(d).css("background-color"), this.padding = $("td[name=tblCell]", d).css("padding-top"), this.align = $("td[name=bmeBadgeText]", d).attr("align"), "" == this.padding && (this.padding = "0"), "" == this.align && (this.align = "left"), this.badgealign = $("td[name=bmeBadgeImage]", d).attr("align"), "" == this.badgealign && (this.badgealign = "left"), this.address = ""; var e = "";
        $("var", $("td[name=tblCell]", d)).each(function () { "BME_ADDRESS" == $(this).attr("type") && (e = $(this).html(), JS_FOOTER_ADDRESS = e) }), this.address = e, this.styleVal = $("#spnFooterText", d).attr("style"), $("#txtAddressErr", d).addClass("hidden"), $("#alertPanel").remove(), $("#txtCanSpamAddress", d).removeClass("frmerror"), $("#txtCanSpamAddress").closest("fieldset").removeClass("error"), $("td[name=bmeBadgeImage]", d).css("word-break", "break-word") }

    function d(b) {
        $("#dvSettingBlock").off(), $("#dvSettingBlock").empty();
        var c = chkColorVal(blkObjectData.backgroundColor),
            d = "";
        "" != c && (d = hexc(c.toLowerCase()));
        var e = chkColorVal($("a", _editBlock).css("color")),
            f = "";
        "" != e && (f = hexc(e.toLowerCase()));
        var g = "";
        $(".sidebar-editblock-name").text(JS_BLOCK_FOOTER), g += "<div class='panel-container'>", g += '<div class="subpanel-nav clearfix2"><span class="selected" onclick="javascript:subcontentToggle(this, \'sub1\');">' + JS_SETTINGS + '</span><span class="" onclick="javascript:subcontentToggle(this, \'sub2\');">' + JS_CONTENT + "</span></div>", g += '<div class="subcontent current sub1">', g += template_field_BackgroundColor("footer", d, c, JS_BACKGROUND, "rctrlBGColor", "ctrlBGColor"), g += template_field_Slider("padding-slider", JS_PADDING), g += "</div>", g += '<div class="subcontent sub2">', g += '<fieldset><label class="label-small">' + JS_ADDRESS + "</label><div><textarea class='form-control form-control-small' id='txtCanSpamAddress' maxlength=\"400\" style=\"resize:none;\">" + ("" == this.address ? JS_FOOTER_ADDRESS : this.address) + "</textarea></div><p id='txtAddressErr' class='hidden siderror'>" + JS_ERR_REQ_ADDRESS + "</p></fieldset>";
        var h = parseInt(_ShowPoweredFooter),
            i = $("table[name=blk_footer]", $("#_BME_dvEditArea"));
        if ($("span[name=footerAbuse]", $("var[type=BME_LINKS]", i)).is(":visible") && (h += 2), $("span[name=footerForward]", $("var[type=BME_LINKS]", i)).is(":visible") && (h += 4), $("span[name=footerSubscribe]", $("var[type=BME_LINKS]", i)).is(":visible") && (h += 8), $("span", $("var[type=BME_LINKS]", i)).each(function () { 0 != $("img", this).length && $(this).is(":visible") && (h += 16) }), $("var[type=BME_CANSPAM]", i).is(":visible") && (h += 32), _CurrentFooter = h, g += "<fieldset id=fldCustomFooter><label class=label-small>" + JS_SUBSCRIPTION_LINKS + "</label>", g += "<p class='helpertext'>" + JS_FOOTER_LINK_REFERENCE + "</p>", g += "<ul class='form-options-list'>", g += "<li>", g += "<input class='form-checkbox' type='checkbox' value='32' name='chkFooterShow' id='chkSentToInformation' " + (checkBits(_CurrentFooter, "CANSPAM") ? " checked " : "") + " onClick='javascript:ChangeFooter();'>", g += "<label class=\"form-option form-option-small\" for='chkSentToInformation'>" + JS_SENT_TO_INFORMATION + "</label>", g += "</li>", "undefined" == typeof HasVerified && (HasVerified = "1"), "1" == HasVerified && (g += "<li>", g += "<input class='form-checkbox' type='checkbox' value='16' name='chkFooterShow' id='chkVerifiedSubscribeLogo'" + (checkBits(_CurrentFooter, "LOGO") ? " checked " : "") + " onClick='javascript:ChangeFooter();'>", g += "<label class=\"form-option form-option-small\" for='chkVerifiedSubscribeLogo'>" + JS_VERIFIED_UNSUBSCRIBE_LOGO + "</label>", g += "</li>"), g += "<li>", g += "<input class='form-checkbox' type='checkbox' value='8' name='chkFooterShow' id='chkManageSubscriptionLink'" + (checkBits(_CurrentFooter, "SUBSCRIBE") ? " checked " : "") + " onClick='javascript:ChangeFooter();'>", g += "<label class=\"form-option form-option-small\" for='chkManageSubscriptionLink'>" + JS_MANAGE_SUBSCRIPTION_LINK + "</label>", g += "</li>", g += "<li>", g += "<input class='form-checkbox' type='checkbox' value='4' name='chkFooterShow' id='chkForwardEmailLink'" + (checkBits(_CurrentFooter, "FORWARD") ? " checked " : "") + " onClick='javascript:ChangeFooter();'>", g += "<label class=\"form-option form-option-small\" for='chkForwardEmailLink'>" + JS_FORWARD_EMAIL_LINK + "</label>", g += "</li>", g += "<li>", g += "<input class='form-checkbox' type='checkbox' value='2' name='chkFooterShow' id='chkReportAbuseLink'" + (checkBits(_CurrentFooter, "ABUSE") ? " checked " : "") + " onClick='javascript:ChangeFooter();'>", g += "<label class=\"form-option form-option-small\" for='chkReportAbuseLink'>" + JS_REPORT_ABUSE_LINK + "</label>", g += "</li>", g += "<input type='hidden' value='1' name='chkFooterShow' id='chkPowered' " + (checkBits(_CurrentFooter, "POWERED") ? " checked " : "") + "/>", g += "</ul>", g += "</fieldset>", g += template_field_alignment("footer", "horizontal", JS_ALIGN, "ddlAlign", this.align, "fld_ddlAlign"), "1" == _ShowPoweredFooter) { g += '<fieldset><label class="label-small">' + JS_BADGE + "</label>", g += '<div class="badge-dd-select" onClick="javascript:ChangeBadge(this, event);">'; for (var j = 0; j < BadgeList.length; j++) CurrentBadge.indexOf(BadgeList[j].id + ".png") != -1 && (g += '<img src="' + BadgeList[j].imageurl + '" alt="badge' + BadgeList[j].id + '" name=bmeBadgeImage />');
            g += "</div>", g += "</fieldset>", g += template_field_alignment("footer", "horizontal", JS_BADGE_ALIGN, "ddlBadgeAlign", this.badgealign, "fld_ddlBadgeAlign") } g += "</div>", g += "</div>", g += template_field_SaveAndClose("footer"), $("#dvSettingBlock").append(g);
        var k = this.padding.replace("px", "");
        $("#padding-slider", "#dvSettingBlock").slider({ value: k, min: 0, max: 20, step: 5, slide: function (a, b) { $(".new-slider-val", $("#padding-slider", "#dvSettingBlock")).text(b.value), $("td[name=tblCell]", _editBlock).css({ padding: b.value + "px" }) }, start: function (a, b) { $(".new-slider-val", $("#padding-slider", "#dvSettingBlock")).show() }, stop: function (a, b) { $(".new-slider-val", $("#padding-slider", "#dvSettingBlock")).delay(400).fadeOut(200) } }).find(".ui-slider-handle").append($("<div />").css("display", "none").addClass("new-slider-val")),
            $(".new-slider-val", $("#padding-slider", "#dvSettingBlock")).text(k), $(_editBlock).html($(a(this)).html()), ChangeFooter(), editTarget1 = $("span", $("td[name=bmeBadgeText]", _editBlock)), LoadToolBar("footer"), IsBold(!1, 0), IsItalic(!1, 0), tmpText = $(editTarget1).css("font-weight"), "bold" != tmpText && 700 != tmpText || IsBold(!0, 0), tmpText = $(editTarget1).css("font-style"), "italic" == tmpText && (IsItalic(!0, 0), $(editTarget1).find("var").css("font-style", "italic"))
    }

    function e(a) { var b = $("." + rootBlockClass, "#" + this.id);
        $(b).attr("width", a), $(this).width = a }

    function f() { var a = $("." + rootBlockClass, "#" + this.id);
        $(a).attr("width", "100%") } this.width = "100%", this.backgroundColor = "", this.padding = "", this.align = "", this.badgealign = "", this.badge = "", this.type = "footer", this.address = "", this.load = c, this.unload = b, this.setWidth = e, this.resetWidth = f, this.renderSetting = d, this.getHTML = a, this.styleVal = "", this.id = ""
}

function Block_Group() {
    function a(a) { var b = this;
        null != a && (b = a); var c = '<table width="' + b.width + '" cellspacing="0" cellpadding="0" border="0" class="' + rootBlockClass + '" name="blk_group" style="'; return "" != b.backgroundColor && "transparent" != b.backgroundColor && (c += "background-color:" + b.backgroundColor + ";"), c += '"><tbody>', c += k(b), c += "</tbody></table>" }

    function b(a) { m(), $("#dvSettingBlock").off(), $("#dvSettingBlock").empty(), $(".bmenohilite", _editBlock).removeClass("bmenohilite"), DisableToolbar(0) }

    function c(a) { if ($(a).parent().hasClass("blk_wrapper")) this.id = GetBlockID(a);
        else { this.id = SetWidgetBlockID(); var b = this.id,
                c = getNewBlockWrapper(b, "blk_group", $(a).clone().wrap("<div />").parent().html());
            $(a).replaceWith(c) } var d = $("." + rootBlockClass, "#" + this.id);
        this.width = $(d).attr("width"), this.backgroundColor = $(d).css("background-color"); var e, f = new Array,
            g = null,
            h = !1,
            i = "",
            j = 0,
            k = "",
            l = ""; if (element = $(".bmeGroupContainer", d), null == $(".bmeGroupContainer", d).html() ? (this.borderWidth = 0, this.borderColor = "", this.borderStyle = "none", this.paddingH = 20, this.paddingV = 10, this.layoutType = "", this.gutter = 20) : (this.layoutType = $(".bmeGroupContainer", d).attr("layout"), "11" == this.layoutType ? element = $(".bmeGroupContainer tbody tr td", d) : "12" == this.layoutType && (element = $(".bmeGroupContainer tbody tr td.bmeImageContainerRow", d)), this.borderWidth = parseWidth(GetBorderDetail(element, "width")), this.borderColor = element.css("border-top-color"), this.borderStyle = element.css("border-top-style"), this.paddingH = parseWidth(element.css("padding-left")), this.paddingV = parseWidth(element.css("padding-top")), this.gutter = parseWidth($(".bmeImageGutterRow:first", d).attr("gutter"))), $("td[name='bmeImgHolder']", $(".bmeImageTable", d)).each(function () { for (g = $(this).parent(), h = !1; !$(g).hasClass("bmeImageTable");) g = $(g).parent(), ("drag-image-table" == $(g).attr("name") || $(g).hasClass("blk_img_dd_wrap")) && (h = !0);
                h || (i = $(this).html(), "" == i && $(this).html(BLANK_IMAGE_CODE), k = $(this).attr("width"), "undefined" == typeof k && (k = "100%"), l = $(this).attr("align"), "undefined" == typeof l && (l = "center"), e = $("td", g).attr("valign"), "undefined" == typeof e && (e = "top"), j = 0, 1 == $("var", $(i)).length && (j = 1), f[f.length] = { imgid: $(g).attr("imgid"), imagesrc: i, isVideo: j, width: k, align: l, valign: e }) }), this.images = f, "undefined" == typeof this.layoutType || "" == this.layoutType) { var m = $(".bmeImageTable", d);
            $(".layout-selected", $("#mainSetting", "#dvSettingBlock")).removeClass("layout-selected"), 2 == m.length ? 1 == $(".bmeImageContainerRow", d).length ? ($("a[name='l12']").parent().addClass("layout-selected"), this.layoutType = "12") : ($("a[name='l11']").parent().addClass("layout-selected"), this.layoutType = "11") : 3 == m.length ? 3 == $(".bmeImageContainerRow", d).length ? ($("a[name='l23']").parent().addClass("layout-selected"), this.layoutType = "23") : 1 == $(".bmeImageContainerRow", d).length ? ($("a[name='l24']").parent().addClass("layout-selected"), this.layoutType = "24") : 1 == $(".bmeImageTable", $(".bmeImageContainerRow", d).first()).length ? ($("a[name='l21']").parent().addClass("layout-selected"), this.layoutType = "21") : ($("a[name='l22']").parent().addClass("layout-selected"), this.layoutType = "22") : 4 == m.length ? 2 == $(".bmeImageContainerRow", d).length ? ($("a[name='l31']").parent().addClass("layout-selected"), this.layoutType = "31") : 2 == $(".bmeImageTable", $(".bmeImageContainerRow", d).first().next()).length ? ($("a[name='l32']").parent().addClass("layout-selected"), this.layoutType = "32") : ($("a[name='l33']").parent().addClass("layout-selected"), this.layoutType = "33") : 5 == m.length && (1 == $(".bmeImageTable", $(".bmeImageContainerRow", d).first()).length ? 1 == $(".bmeImageTable", $(".bmeImageContainerRow", d).last()).length ? ($("a[name='l44']").parent().addClass("layout-selected"), this.layoutType = "44") : ($("a[name='l41']").parent().addClass("layout-selected"), this.layoutType = "41") : 1 == $(".bmeImageTable", $(".bmeImageContainerRow", d).last()).length ? ($("a[name='l43']").parent().addClass("layout-selected"), this.layoutType = "43") : ($("a[name='l42']").parent().addClass("layout-selected"), this.layoutType = "42")) } return $(".blk_img_dd_wrap", _editBlock).each(function () { width = $(this).width(), parent = $(this).parent(), setImageSetting(width, parent) }), _StartDDImage(), this }

    function d(b) { if (m(), 1 != b) { var c, d = new Array,
                e = null,
                f = !1,
                g = "",
                h = 0,
                i = "",
                j = "";
            $("td[name='bmeImgHolder']", $(".bmeImageTable", _editBlock)).each(function () { for (e = $(this).parent(), f = !1; !$(e).hasClass("bmeImageTable");) e = $(e).parent(), ("drag-image-table" == $(e).attr("name") || $(e).hasClass("blk_img_dd_wrap")) && (f = !0);
                f || (g = $(this).html(), "" == g && $(this).html(BLANK_IMAGE_CODE), i = $(this).attr("width"), "undefined" == typeof i && (i = "100%"), j = $(this).attr("align"), "undefined" == typeof j && (j = "center"), c = $("td", e).attr("valign"), "undefined" == typeof c && (c = "top"), h = 0, 1 == $("var", $(g)).length && (h = 1), d[d.length] = { imgid: $(e).attr("imgid"), imagesrc: g, isVideo: h, width: i, align: j, valign: c }) }), blkObjectData.images = d } $(_editBlock).html($(a(blkObjectData)).html()), $(".blk_img_dd_wrap", _editBlock).each(function () { width = $(this).width(), parent = $(this).parent(), setImageSetting(width, parent) }), l() }

    function e(b) { $("#dvSettingBlock").off(), $("#dvSettingBlock").empty(), $(".sidebar-editblock-name").text(JS_BLOCK_IMAGE_GROUP); var c = ($(this.imageSrc), chkColorVal(this.backgroundColor)),
            d = ""; "" != c && (d = hexc(c.toLowerCase())); var e = chkColorVal(this.borderColor),
            f = ""; "" != e && (f = hexc(e.toLowerCase())); var g = "";
        g += "<div id=mainSetting class=current>", g += "<div class='panel-container'>", g += '<div class="subpanel-nav clearfix2"><span class="selected" onclick="javascript:subcontentToggle(this, \'sub1\');">' + JS_SETTINGS + '</span><span class="" onclick="javascript:subcontentToggle(this, \'sub2\');">' + JS_CONTENT + "</span></div>", g += '<div class="subcontent current sub1">', g += template_field_BackgroundColor("group", d, c, JS_BACKGROUND, "rctrlBGColor", "ctrlBGColor"), g += template_field_BorderStyles("group", f, e, this.borderStyle, this.borderWidth, JS_BORDER), g += template_field_Slider("padding-h-slider", JS_H_PADDING), g += template_field_Slider("padding-v-slider", JS_V_PADDING), g += "</div>", g += '<div class="subcontent sub2">', g += template_field_addGroup("group", JS_ADD_IMAGE_TO_GROUP, "ancAddImage", "ancAddImage"), g += '<fieldset><label class="label-small">' + JS_LAYOUT + " </label>", g += '<ul class="layout-option-blocks image-group blocks2" ' + (2 != this.images.length ? ' style="display:none;"' : "") + ">", g += "<li" + ("12" == this.layoutType ? ' class="layout-selected"' : "") + "><a class=\"layout12\" value='l12' name=layoutType onclick=\"javascript:colorChangeHandler('group', this);\"></a></li>", g += "<li" + ("11" == this.layoutType ? ' class="layout-selected"' : "") + "><a class=\"layout11\" value='l11' name=layoutType onclick=\"javascript:colorChangeHandler('group', this);\"></a></li>", g += "</ul>", g += '<ul class="layout-option-blocks image-group blocks3" ' + (3 != this.images.length ? ' style="display:none;"' : "") + ">", g += "<li" + ("21" == this.layoutType ? ' class="layout-selected"' : "") + "><a class=\"layout21\" value='l21' name=layoutType onclick=\"javascript:colorChangeHandler('group', this);\"></a></li>", g += "<li" + ("22" == this.layoutType ? ' class="layout-selected"' : "") + "><a class=\"layout22\" value='l22' name=layoutType onclick=\"javascript:colorChangeHandler('group', this);\"></a></li>", g += "<li" + ("24" == this.layoutType ? ' class="layout-selected"' : "") + "><a class=\"layout24\" value='l24' name=layoutType onclick=\"javascript:colorChangeHandler('group', this);\"></a></li>", g += "<li" + ("23" == this.layoutType ? ' class="layout-selected"' : "") + "><a class=\"layout23\" value='l23' name=layoutType onclick=\"javascript:colorChangeHandler('group', this);\"></a></li>", g += "</ul>", g += '<ul class="layout-option-blocks image-group blocks4" ' + (4 != this.images.length ? ' style="display:none;"' : "") + ">", g += "<li" + ("31" == this.layoutType ? ' class="layout-selected"' : "") + "><a class=\"layout31\" value='l31' name=layoutType onclick=\"javascript:colorChangeHandler('group', this);\"></a></li>", g += "<li" + ("32" == this.layoutType ? ' class="layout-selected"' : "") + "><a class=\"layout32\" value='l32' name=layoutType onclick=\"javascript:colorChangeHandler('group', this);\"></a></li>", g += "<li" + ("33" == this.layoutType ? ' class="layout-selected"' : "") + "><a class=\"layout33\" value='l33' name=layoutType onclick=\"javascript:colorChangeHandler('group', this);\"></a></li>", g += "</ul>", g += '<ul class="layout-option-blocks image-group blocks5" ' + (5 != this.images.length ? ' style="display:none;"' : "") + ">", g += "<li" + ("41" == this.layoutType ? ' class="layout-selected"' : "") + "><a class=\"layout41\" value='l41' name=layoutType onclick=\"javascript:colorChangeHandler('group', this);\"></a></li>", g += "<li" + ("42" == this.layoutType ? ' class="layout-selected"' : "") + "><a class=\"layout42\" value='l42' name=layoutType onclick=\"javascript:colorChangeHandler('group', this);\"></a></li>", g += "<li" + ("43" == this.layoutType ? ' class="layout-selected"' : "") + "><a class=\"layout43\" value='l43' name=layoutType onclick=\"javascript:colorChangeHandler('group', this);\"></a>", g += "<li" + ("44" == this.layoutType ? ' class="layout-selected"' : "") + "><a class=\"layout44\" value='l44' name=layoutType onclick=\"javascript:colorChangeHandler('group', this);\"></a></li>", g += "</ul>", g += "</fieldset>", g += '<fieldset class="cellp-slider"><label class="label-small">' + JS_GUTTER_WIDTH + ' </label><div class="editor-slider" id="gutter-slider"></div></fieldset>', g += "</div>", g += "</div>", g += template_field_SaveAndClose("group"), g += "</div>", g += "<div id=mainSettingVeil onclick=\"javascript:colorChangeHandler('group', this);\"></div>", g += "<div id=itemSetting>", g += "<div class='panel-container'>", g += '<fieldset id=fldImageDetail><label class="label-small"><span id=lblImageName></span><a class=reset-link id=rEdit onclick="javascript:colorChangeHandler(\'group\', this);"><small>' + JS_EDIT + "</small></a> <a class=reset-link id=rReplace onclick=\"javascript:colorChangeHandler('group', this);\"><small>" + JS_REPLACE + "</small></a> <a class=reset-link id=rLink onclick=\"javascript:colorChangeHandler('group', this);\"><small>" + JS_LINK + "</small></a></label></fieldset>", g += template_field_TextInput("group", JS_ALT_TEXT, "txtAltText", "txtAltText", "", "", "fldImageAltDetail"), g += template_field_alignment("group", "horizontal", JS_IMAGE_ALIGN, "imgAlign", "", "fld_imgAlign"), g += template_field_alignment("group", "vertical", JS_IMAGE_V_ALIGN, "imgVAlign", "", "fld_imgVAlign"), g += template_field_removeGroup("group", JS_REMOVE_IMG_FROM_GRP, "ancRemoveImage", "ancRemoveImage"), g += "</div>", g += template_field_SaveAndBack("group"), g += "</div>", $("#dvSettingBlock").append(g), this.images.length > 4 && $("#fldAdd").addClass("hidden"), $("#gutter-slider", "#mainSetting").slider({ min: 0, max: 20, step: 5, value: this.gutter, slide: function (a, b) { $(".new-slider-val", $("#gutter-slider", "#mainSetting")).text(b.value), blkObjectData.gutter = b.value, blkObjectData.refreshBlock() }, start: function (a, b) { $(".new-slider-val", $("#gutter-slider", "#mainSetting")).show() }, stop: function (a, b) { $(".new-slider-val", $("#gutter-slider", "#mainSetting")).delay(400).fadeOut(200) } }).find(".ui-slider-handle").append($("<div />").css("display", "none").addClass("new-slider-val")), $(".new-slider-val", $("#gutter-slider", "#mainSetting")).text(this.gutter), $("#padding-h-slider", "#mainSetting").slider({ min: 0, max: 20, step: 5, value: this.paddingH, slide: function (a, b) { $(".new-slider-val", $("#padding-h-slider", "#mainSetting")).text(b.value), blkObjectData.paddingH = b.value, blkObjectData.refreshBlock() }, start: function (a, b) { $(".new-slider-val", $("#padding-h-slider", "#mainSetting")).show() }, stop: function (a, b) { $(".new-slider-val", $("#padding-h-slider", "#mainSetting")).delay(400).fadeOut(200) } }).find(".ui-slider-handle").append($("<div />").css("display", "none").addClass("new-slider-val")), $(".new-slider-val", $("#padding-h-slider", "#mainSetting")).text(this.paddingH), $("#padding-v-slider", "#mainSetting").slider({ min: 0, max: 20, step: 5, value: this.paddingV, slide: function (a, b) { $(".new-slider-val", $("#padding-v-slider", "#mainSetting")).text(b.value), blkObjectData.paddingV = b.value, blkObjectData.refreshBlock() }, start: function (a, b) { $(".new-slider-val", $("#padding-v-slider", "#mainSetting")).show() }, stop: function (a, b) { $(".new-slider-val", $("#padding-v-slider", "#mainSetting")).delay(400).fadeOut(200) } }).find(".ui-slider-handle").append($("<div />").css("display", "none").addClass("new-slider-val")), $(".new-slider-val", $("#padding-v-slider", "#mainSetting")).text(this.paddingV), LoadToolBar(-1), m(), $(_editBlock).html($(a(this)).html()), l(), EditModeOn = !0 }

    function f() {}

    function g(a) { m(), 1 == $("a", _editBlockItem).length ? ($("a", _editBlockItem).attr("href", a), LoadToolBar(4), IsLink(!0, 0)) : ($("img", _editBlockItem).wrap('<a href="' + a + '" />'), LoadToolBar(4), IsLink(!0, 0)), l() }

    function h(a) { m(), 1 == $("a", _editBlockItem).length && ($("a", _editBlockItem).parent().html($("a", _editBlockItem).html()), LoadToolBar(3), IsLink(!1, 0)), l() }

    function i(a, b, c) { var d = a.imagesrc,
            e = $("<div>");
        $(e).append(d); var f = "<table cellspacing=0 cellpadding=0 border=0 class=bmeImageTable ";
        f += " imgid=" + a.imgid + " ", "" == a.width && (a.width = "100%"), imgW = parseWidth(b); var g = $("img", e).css("max-width"); return "undefined" == typeof g && (g = imgW), g = parseWidth(g), imgW > g && (imgW = g), f += ' width="' + b + '" ', d.indexOf("<div") == -1 && "" != d && $("img", e).attr("width", imgW), f += ' align="' + c + '" ', d = "" == a.imagesrc ? BLANK_IMAGE_CODE : $(e).html(), 1 == $("var", $(d)).length ? a.isVideo = 1 : a.isVideo = 0, f += "><tr><td name=bmeImgHolder", "" == a.align && (a.align = "center"), f += " align=" + a.align + " ", "" == a.valign && (a.valign = "center"), f += " valign=" + a.valign + " ", f += ">" + d, f += "</td></tr></table>" }

    function j(a, b, c) { var d = "",
            e = ""; return 0 != a && (d = "top" == b ? "11" == c ? "<tr><td valign=top align=center class=bmeImageGutterRow" + e + ' gutter="' + a + '"><table cellspacing=0 cellpadding=0 border=0 width="100%"><tr><td height="' + a + '"></td></tr></table></td></tr>' : "<tr><td valign=top align=center class=bmeImageGutterRow" + e + ' gutter="' + a + '"><table cellspacing=0 cellpadding=0 border=0 width="100%" height="' + a + '"><tr><td></td></tr></table></td></tr>' : "<td valign=top align=center class=bmeImageGutterRow" + e + ' gutter="' + a + '"><table cellspacing=0 cellpadding=0 border=0 width="' + a + '"><tr><td></td></tr></table></td>'), d }

    function k(a) { var b = a,
            c = "",
            d = "",
            e = "",
            f = 0,
            g = "",
            h = '<tr><td valign=top class=bmeImageContainerRow><table cellspacing=0 cellpadding=0 border=0 width="100%"><tr><td valign=top align=center class=tdPart>',
            k = "</td></tr></table></td></tr>",
            l = '<tr><td valign=top class=bmeImageContainerRow><table cellspacing=0 cellpadding=0 border=0 width="100%"><tr>',
            m = "</tr></table></td></tr>",
            n = "<td valign=top align=center class=tdPart>"; if ("0" != b.layoutType && (b.images.length - 1).toString() == b.layoutType.toString().substring(0, 1) || (b.layoutType = b.images.length - 1 + "1"), c = parseWidth(b.width - 2 * (parseWidth(b.paddingH) + parseWidth(b.borderWidth))), d = parseWidth(fixInt((b.width - 2 * (parseWidth(b.paddingH) + parseWidth(b.borderWidth)) - parseWidth(b.gutter)) / 2)), e = parseWidth(fixInt((b.width - 2 * (parseWidth(b.paddingH) + parseWidth(b.borderWidth)) - 2 * parseWidth(b.gutter)) / 3)), borderPaddingStyle = ' style="border-collapse:collapse;padding-top:' + b.paddingV + "px; padding-bottom:" + b.paddingV + "px; padding-left:" + b.paddingH + "px; padding-right:" + b.paddingH + "px; border-width:" + b.borderWidth + "px; border-style:" + b.borderStyle + "; border-color:" + b.borderColor + ';"', "11" == b.layoutType) { var o = i(b.images[0], c, "left"),
                p = i(b.images[1], c, "left");
            g += "<tr><td" + borderPaddingStyle + '><table width="100%" cellspacing="0" cellpadding="0" border="0">', g += h + o + k, g += j(b.gutter, "top", b.layoutType), g += h + p + k, g += "</table></td></tr>" } else if ("12" == b.layoutType) { f = c - (2 * d + parseWidth(b.gutter)); var o = i(b.images[0], d, "left"),
                p = i(b.images[1], d + f, "right");
            g += "<tr><td valign=top class=bmeImageContainerRow" + borderPaddingStyle + '><table cellspacing=0 cellpadding=0 border=0 width="100%"><tr>', g += n + o + "</td>", g += j(b.gutter, "left"), g += n + p + "</td>", g += m } else if ("21" == b.layoutType) { f = c - (2 * d + parseWidth(b.gutter)); var o = i(b.images[0], c, "left"),
                p = i(b.images[1], d, "left"),
                q = i(b.images[2], d + f, "right");
            g += h + o + k, g += j(b.gutter, "top"), g += l, g += n + p + "</td>", g += j(b.gutter, "left"), g += n + q + "</td>", g += m } else if ("22" == b.layoutType) { f = c - (2 * d + parseWidth(b.gutter)); var o = i(b.images[0], d, "left"),
                p = i(b.images[1], d + f, "right"),
                q = i(b.images[2], c, "left");
            g += l, g += n + o + "</td>", g += j(b.gutter, "left"), g += n + p + "</td>", g += m, g += j(b.gutter, "top"), g += h + q + k } else if ("23" == b.layoutType) { var o = i(b.images[0], c, "left"),
                p = i(b.images[1], c, "left"),
                q = i(b.images[2], c, "left");
            g += h + o + k, g += j(b.gutter, "top"), g += h + p + k, g += j(b.gutter, "top"), g += h + q + k } else if ("24" == b.layoutType) { f = c - (3 * e + 2 * parseWidth(b.gutter)); var o = i(b.images[0], e, "left"),
                p = i(b.images[1], e + f, "left"),
                q = i(b.images[2], e, "right");
            g += l, g += n + o + "</td>", g += j(b.gutter, "left"), g += n + p + "</td>", g += j(b.gutter, "left"), g += n + q + "</td>", g += m } else if ("31" == b.layoutType) { f = c - (2 * d + parseWidth(b.gutter)); var o = i(b.images[0], d, "left"),
                p = i(b.images[1], d + f, "right"),
                q = i(b.images[2], d, "left"),
                r = i(b.images[3], d + f, "right");
            g += l, g += n + o + "</td>", g += j(b.gutter, "left"), g += n + p + "</td>", g += m, g += j(b.gutter, "top"), g += l, g += n + q + "</td>", g += j(b.gutter, "left"), g += n + r + "</td>", g += m } else if ("32" == b.layoutType) { f = c - (2 * d + parseWidth(b.gutter)); var o = i(b.images[0], c, "left"),
                p = i(b.images[1], d, "left"),
                q = i(b.images[2], d + f, "right"),
                r = i(b.images[3], c, "left");
            g += h + o + k, g += j(b.gutter, "top"), g += l, g += n + p + "</td>", g += j(b.gutter, "left"), g += n + q + "</td>", g += m, g += j(b.gutter, "top"), g += h + r + k } else if ("33" == b.layoutType) { var o = i(b.images[0], c, "left"),
                p = i(b.images[1], c, "left"),
                q = i(b.images[2], c, "left"),
                r = i(b.images[3], c, "left");
            g += h + o + k, g += j(b.gutter, "top"), g += h + p + k, g += j(b.gutter, "top"), g += h + q + k, g += j(b.gutter, "top"), g += h + r + k } else if ("41" == b.layoutType) { f = c - (2 * d + parseWidth(b.gutter)); var o = i(b.images[0], c, "left"),
                p = i(b.images[1], d, "left"),
                q = i(b.images[2], d + f, "right"),
                r = i(b.images[3], d, "left"),
                s = i(b.images[4], d + f, "right");
            g += h + o + k, g += j(b.gutter, "top"), g += l, g += n + p + "</td>", g += j(b.gutter, "left"), g += n + q + "</td>", g += m, g += j(b.gutter, "top"), g += l, g += n + r + "</td>", g += j(b.gutter, "left"), g += n + s + "</td>", g += m } else if ("42" == b.layoutType) { f = c - (2 * d + parseWidth(b.gutter)); var o = i(b.images[0], d, "left"),
                p = i(b.images[1], d + f, "right"),
                q = i(b.images[2], c, "left"),
                r = i(b.images[3], d, "left"),
                s = i(b.images[4], d + f, "right");
            g += l, g += n + o + "</td>", g += j(b.gutter, "left"), g += n + p + "</td>", g += m, g += j(b.gutter, "top"), g += h + q + k, g += j(b.gutter, "top"), g += l, g += n + r + "</td>", g += j(b.gutter, "left"), g += n + s + "</td>", g += m } else if ("43" == b.layoutType) { f = c - (2 * d + parseWidth(b.gutter)); var o = i(b.images[0], d, "left"),
                p = i(b.images[1], d + f, "right"),
                q = i(b.images[2], d, "left"),
                r = i(b.images[3], d + f, "right"),
                s = i(b.images[4], c, "left");
            g += l, g += n + o + "</td>", g += j(b.gutter, "left"), g += n + p + "</td>", g += m, g += j(b.gutter, "top"), g += l, g += n + q + "</td>", g += j(b.gutter, "left"), g += n + r + "</td>", g += m, g += j(b.gutter, "top"), g += h + s + k } else if ("44" == b.layoutType) { var o = i(b.images[0], c, "left"),
                p = i(b.images[1], c, "left"),
                q = i(b.images[2], c, "left"),
                r = i(b.images[3], c, "left"),
                s = i(b.images[4], c, "left");
            g += h + o + k, g += j(b.gutter, "top"), g += h + p + k, g += j(b.gutter, "top"), g += h + q + k, g += j(b.gutter, "top"), g += h + r + k, g += j(b.gutter, "top"), g += h + s + k } return g = "11" == b.layoutType || "12" == b.layoutType ? '<tr><td><table cellspacing="0" cellpadding="0" class="bmeGroupContainer" layout="' + b.layoutType + '" width="100%">' + g + "</table></td></tr>" : '<tr><td><table cellspacing="0" cellpadding="0" class="bmeGroupContainer" layout="' + b.layoutType + '" width="100%" style="border-collapse:separate;padding-top:' + b.paddingV + "px; padding-bottom:" + b.paddingV + "px; padding-left:" + b.paddingH + "px; padding-right:" + b.paddingH + "px; border-width:" + b.borderWidth + "px; border-style:" + b.borderStyle + "; border-color:" + b.borderColor + ';">' + g + "</table></td></tr>" }

    function l() { null != _editBlock && ($("a[name='ancUploadImage']", _editBlock).on("click", n), $(".bmeImageTable", _editBlock).on("click", n), q(), _StartDDImage()) }

    function m() { null != _editBlock && ($("a[name='ancUploadImage']", _editBlock).off("click", n), $(".bmeImageTable", _editBlock).off("click", n)) }

    function n(a) { currentImageCtrl = blkObjectData, a.preventDefault(), a.stopPropagation(); var b = "",
            c = "",
            d = "",
            e = "",
            f = 0; for (null != _editBlockItem && $("img", _editBlockItem).each(function () { $(this).attr("alt", $("input[name='txtAltText']").attr("value")) }), _editBlockItem = $(this), oldBlockContent = $(_editBlockItem).html(); !_editBlockItem.hasClass("bmeImageTable") && !_editBlockItem.hasClass("bmeImageTable");) _editBlockItem = $(_editBlockItem).parent();
        $(".bmeImageTable", _editBlock).addClass("bmenohilite"), $(_editBlockItem, _editBlock).removeClass("bmenohilite"), c = $("td", _editBlockItem).attr("align"), "" == c && (c = "center"), d = $("td", _editBlockItem).attr("valign"), "" == d && (d = "top");
        $(_editBlockItem).attr("imgid");
        $("img", _editBlockItem).each(function () { b = $(this).attr("alt"), "undefined" == b && (b = ""), e = $(this).attr("src") }), 1 == $("var", _editBlockItem).length && (f = 1), currentVariable = $("a", _editBlockItem), $("input[name='txtAltText']", $("#itemSetting", "#dvSettingBlock")).val(b), $("#imgAlign", $("#itemSetting", "#dvSettingBlock")).val(c), applyAlignSelectedState("#fld_imgAlign", c), $("#imgVAlign", $("#itemSetting", "#dvSettingBlock")).val(d), applyAlignSelectedState("#fld_imgVAlign", d), $("a#rEdit, a#rLink", "#dvSettingBlock").removeClass("hidden"), panelToggle("second"), $(".tool-link, .tool-unlink").removeClass("hidden"), $(".bmeImageTable", _editBlock).length > 2 ? ($("#fldRemove").removeClass("hidden"), panelToggle("second")) : ($("#fldRemove").addClass("hidden"), panelToggle("second", "hide")), $("#dvSettingBlock").show(), panelToggle("second"), "" == e || e == smImage ? (LoadToolBar(-1), $("#fldImageDetail, #fldImageAltDetail").addClass("hidden"), panelToggle("second", "hide"), OpenImageDialog("1")) : ($("a", _editBlockItem).length > 0 ? (LoadToolBar(4), IsLink(!0, 0)) : (LoadToolBar(3), IsLink(!1, 0)), $("#lblImageName", $("#itemSetting")).html("<img src='" + e + "' isVideo" + f + " border=0 style='max-width:100px;max-height:100px;display:block;' />"), $("#fldImageDetail, #fldImageAltDetail").removeClass("hidden"), panelToggle("second")), 1 == f && ($("a#rEdit, a#rLink", "#dvSettingBlock").addClass("hidden"), panelToggle("second", "hide"), $(".tool-link, .tool-unlink").addClass("hidden")) }

    function o(a) { var b = $("img", a),
            c = 720,
            d = 0;
        $("td", _editBlockItem).first().html(a), d = $(_editBlockItem).attr("width"), "50%" == d ? d = $(_editBlockItem).width() : "33%" == d ? d = $(_editBlockItem).width() : "100%" == d && (d = $(_editBlockItem).width()), d.toString().indexOf("px") != -1 && (d = d.replace("px", "")), $("img", _editBlockItem).each(function () { d > c && (d = c), $(this).css({ "max-width": c, display: "block" }), $(this).attr("width", d), $(this).removeAttr("height") }), _StartDDImage(), LoadToolBar("undefined" != typeof href && "" != href ? 4 : 3), $("a#rEdit, a#rLink").addClass("hidden"), $(".tool-link, .tool-unlink").addClass("hidden"), currentImageCtrl = null, q(), $("#lblImageName", $("#itemSetting")).html("<img src='" + $(b).attr("src") + "' isVideo=1 border=0 style='max-width:100px;max-height:100px;display:block;' />"), $("#fldImageDetail, #fldImageAltDetail").removeClass("hidden"), panelToggle("second") }

    function p(a) { var b = $(a),
            c = parseWidth($(b).attr("width"));
        0 == c && (c = $(b).width()); var d = 0,
            e = 0,
            f = $("a", _editBlockItem).attr("href"); "undefined" != typeof f && "" != f && (a = '<a href="' + f + '">' + a + "</a>"), $("td", _editBlockItem).first().html(a), d = $(_editBlockItem).attr("width"), e = $("td", _editBlockItem).css("padding-left"), "50%" == d ? d = $(_editBlockItem).width() : "33%" == d ? d = $(_editBlockItem).width() : "100%" == d && (d = $(_editBlockItem).width()), "undefined" == typeof e && (e = 0), e.toString().indexOf("px") != -1 && (e = e.replace("px", "")), d.toString().indexOf("px") != -1 && (d = d.replace("px", "")), $("img", _editBlockItem).each(function () { parseInt(d) > parseInt(c) && (d = c), $(this).css({ "max-width": c, display: "block" }), $(this).attr("width", d - e), $(this).removeAttr("height") }), _StartDDImage(), $(".tool-link, .tool-unlink").removeClass("hidden"), LoadToolBar("undefined" != typeof f && "" != f ? 4 : 3), currentImageCtrl = null, $("a#rEdit, a#rLink", "#dvSettingBlock").removeClass("hidden"), $("#lblImageName", $("#itemSetting")).html("<img src='" + $(b).attr("src") + "' isVideo=0 border=0 style='max-width:100px;max-height:100px;display:block;' />"), $("#fldImageDetail, #fldImageAltDetail").removeClass("hidden"), panelToggle("second"), q() }

    function q(a) { "undefined" == typeof a ? blockAssignHeight("dv_" + currentEditID, "group", !0) : blockAssignHeight($(a).parent().attr("id"), "group") }

    function r() {}

    function s() {}

    function t(a) { var b = $("." + rootBlockClass, "#" + this.id);
        $(b).attr("width", a), $(this).width = a, $(".blk_img_dd_wrap", $(".bmeImageTable", b)).css("display", "none"), $("img", $(".bmeImageTable", b)).attr("width", "2"), $(".bmeImageTable", $(this)).css("height", ""), this.width = a, $("tbody:first", b).html(k(this)), $(".blk_img_dd_wrap", $(".bmeImageTable", b)).css("display", "block"), q(b) }

    function u() { var a = $("." + rootBlockClass, "#" + this.id);
        $(a).attr("width", "100%"), $(".bmeImageTable", a).each(function () { "left" == $(this).css("float") || "right" == $(this).css("float") || "left" == $(this).attr("align") || "right" == $(this).attr("align") ? 3 == $(".bmeImageTable", a).length && 1 == $(".bmeImageContainerRow", a).length ? $(this).attr("width", "33%") : $(this).attr("width", "50%") : $(this).attr("width", "100%") }), $(".blk_img_dd_wrap", $(".bmeImageTable", a)).css("display", "none"), $("img", $(".bmeImageTable", a)).attr("width", "2") } this.width = "100%", this.backgroundColor = "", this.imageArea = "100%", this.images = [{ imgid: "1", imagesrc: "", isVideo: 0, width: "50%", align: "center", valign: "top" }, { imgid: "2", imagesrc: "", isVideo: 0, width: "50%", align: "center", valign: "top" }], this.load = c, this.unload = b, this.setWidth = t, this.resetWidth = u, this.renderSetting = e, this.getHTML = a, this.updateItem = s, this.rebindItems = r, this.assignHeight = q, this.id = "", this.paddingH = 20, this.paddingV = 10, this.gutter = 20, this.borderWidth = 0, this.layoutType = 0, this.borderStyle = "none", this.borderColor = "transparent", this.insertImage = p, this.insertVideo = o, this.type = "group", this.addLink = g, this.removeLink = h, this.bindDDImage = l, this.unbindDDImage = m, this.checkLayout = f, this.updateImageContainer = k, this.refreshBlock = d }

function Block_Image() {
    function a(a) { var b = this;
        null != a && (b = a); var c = '<table width="' + b.width + '" cellspacing="0" cellpadding="0" border="0" class="' + rootBlockClass + '" name="blk_image"><tbody><tr><td>'; return c += '<table width="100%" cellspacing="0" cellpadding="0" border="0"><tbody><tr><td align=' + b.imageAlign + ' class=bmeImage style="border-collapse: collapse;', "" != b.backgroundColor && "transparent" != b.backgroundColor && (c += "background-color:" + b.backgroundColor + ";"), "0" != this.borderWidth && "" != this.borderWidth && (c += "border-width:" + this.borderWidth + "px; ", "" == this.borderColor && (this.borderColor = "#000000;"), c += "border-color:" + this.borderColor + ";", "" == this.borderStyle && (this.borderStyle = "solid"), c += "border-style:" + this.borderStyle + ";"), "" == b.imageAlign && (b.imageAlign = "center"), 0 == v2Feature ? ("" == b.padding && (b.padding = "0"), c += "padding:" + b.padding + "px;") : ("" == b.paddingH && (b.paddingH = "0"), c += "padding-left:" + b.paddingH + "px; padding-right: " + b.paddingH + "px;", "" == b.paddingV && (b.paddingV = "0"), c += "padding-top:" + b.paddingV + "px; padding-bottom: " + b.paddingV + "px; "), c += '">', "" == b.imageSrc && (b.imageSrc = BLANK_IMAGE_CODE), c += b.imageSrc, c += "</td></tr></tbody></table>", c += "</td></tr></tbody></table>" }

    function b(a) { f(), $("#dvSettingBlock").off(), $("#dvSettingBlock").empty(), DisableToolbar(0) }

    function c(a) { if ($(a).parent().hasClass("blk_wrapper")) this.id = GetBlockID(a);
        else { this.id = SetWidgetBlockID(); var b = this.id,
                c = getNewBlockWrapper(b, "blk_image", $(a).clone().wrap("<div />").parent().html());
            $(a).replaceWith(c) } var d = $("." + rootBlockClass, "#" + this.id),
            e = ($("td.bmeImage", d).parent("tr"), $(d).children("tbody").children("tr").html()),
            f = '<td><table width="100%" cellspacing="0" cellpadding="0" border="0"><tbody><tr>',
            g = "</tr></tbody></table></td>",
            h = $(d).attr("style"),
            j = ($("td.bmeImage", d).attr("style"), ""),
            k = ""; for (h += "", borderBackgroundStyles = h.split(";"), i = 0; i < borderBackgroundStyles.length; i++) "undefined" != typeof borderBackgroundStyles && null != borderBackgroundStyles && "" != borderBackgroundStyles && (borderBackgroundStyleParts = borderBackgroundStyles[0].split(":"), borderBackgroundStyleParts.length > 1 && (j = borderBackgroundStyleParts[0].trim(), k = borderBackgroundStyleParts[1].trim(), "" == $("td.bmeImage", d).css(j) && "" != k && ($("td.bmeImage", d).css(j, k), $(d).css(j, ""))));
        $(d).removeAttr("style"), $("td.bmeImage", d).css("border-collapse", "collapse"), "undefined" == typeof e && null == e || "100%" == $(d).children("tbody").children("tr").children("td").children("table").attr("width") || (e = f + e + g, $(d).children("tbody").children("tr").html(e)), this.width = $(d).attr("width"), this.backgroundColor = $("td.bmeImage", d).css("background-color"), this.borderStyle = $("td.bmeImage", d).css("border-top-style"), "none" == this.borderStyle ? this.borderColor = "" : this.borderColor = $("td.bmeImage", d).css("border-top-color"), this.borderWidth = GetBorderDetail($("td.bmeImage", d), "width").replace("px", ""), this.padding = $("td.bmeImage", d).css("padding-top"), this.imageAlign = $("td.bmeImage", d).attr("align"), "" == this.padding && (this.padding = "20"), this.paddingV = $("td.bmeImage", d).css("padding-top"), "" == this.paddingV && (this.paddingV = "20"), this.paddingH = $("td.bmeImage", d).css("padding-left"), "" == this.paddingH && (this.paddingH = "20"), "" == this.imageAlign && (this.imageAlign = "center"), this.imageSrc = $("td.bmeImage", d).html(), "" == this.imageSrc && (this.imageSrc = BLANK_IMAGE_CODE, $("td.bmeImage", d).html(BLANK_IMAGE_CODE)), this.isVideo = 0, 1 == $("var", $(this.imageSrc)).length && (this.isVideo = 1), _StartDDImage(this) }

    function d(a) {
        $("#dvSettingBlock").off(), $("#dvSettingBlock").empty();
        var b = "",
            c = $(this.imageSrc);
        0 == this.imageSrc.indexOf("<img ") ? b = $(c).attr("alt") : this.imageSrc.indexOf("<img ") != -1 && (b = $("img", $(c)).attr("alt")), this.isVideo = 0, 1 == $("var", $(this.imageSrc)).length && (this.isVideo = 1);
        var d = chkColorVal(this.borderColor),
            g = "";
        "" != d && (g = hexc(d.toLowerCase()));
        var h = chkColorVal(this.backgroundColor),
            i = "";
        "" != h && (i = hexc(h.toLowerCase())), $(".sidebar-editblock-name").text(JS_BLOCK_IMAGE);
        var j = "";
        j += "<div class='panel-container'>", j += template_field_BackgroundColor("image", i, h, JS_BACKGROUND, "rctrlBGColor", "ctrlBGColor"), j += template_field_BorderStyles("image", g, d, this.borderStyle, this.borderWidth, JS_BORDER), 1 == v2Feature ? (j += template_field_Slider("padding-h-slider", JS_H_PADDING, "fldHPadding"), j += template_field_Slider("padding-v-slider", JS_V_PADDING)) : j += template_field_Slider("padding-slider", JS_PADDING), j += template_field_seperator(), j += "<fieldset id=fldImageDetail><label class=\"label-small\"><span id=lblImageName></span><a onclick=\"javascript:colorChangeHandler('image', this);\" id='rEdit' " + (1 == this.isVideo ? ' class="reset-link hidden"' : "class='reset-link'") + "><small>" + JS_EDIT + "</small></a> <a id='rReplace' class='reset-link' onclick=\"javascript:colorChangeHandler('image', this);\"><small>" + JS_REPLACE + "</small></a> <a class=reset-link id=rLink " + (1 == this.isVideo ? ' class="reset-link hidden"' : "class='reset-link'") + " onclick=\"javascript:colorChangeHandler('image', this);\"><small>" + JS_LINK + "</small></a></label></fieldset>", j += template_field_TextInput("image", JS_ALT_TEXT, "txtAltText", "txtAltText", b, ""), j += template_field_alignment("image", "horizontal", JS_IMAGE_ALIGN, "imgAlign", this.imageAlign, "fld_imgAlign"), j += "</div>", j += template_field_SaveAndClose("image"), $("#dvSettingBlock").append(j);
        var k = "";
        $("img", $(".bmeImage", _editBlock)).length > 0 && (k = $("img", $(".bmeImage", _editBlock)).attr("src")), 0 == $("img", $(".bmeImage", _editBlock)).length || k == smImage ? ($("#fldImageDetail", "#dvSettingBlock").addClass("hidden"),
            LoadToolBar(-1)) : ($("#lblImageName", $("#dvSettingBlock")).html("<img src='" + k + "' border=0 style='max-width:100px;max-height:100px; display: block' />"), $("#fldImageDetail", "#dvSettingBlock").removeClass("hidden"), $("a", _editBlock).length > 0 ? (LoadToolBar(4), IsLink(!0, 0)) : (LoadToolBar(3), IsLink(!1, 0))), 1 == this.isVideo && $(".tool-link, .tool-unlink").addClass("hidden");
        var l = this.padding;
        l.toString().indexOf("px") != -1 && (l = l.toString().replace("px", "")), $("#padding-slider", "#dvSettingBlock").slider({ min: 0, max: 20, step: 5, value: l, slide: function (a, b) { $(".new-slider-val", $("#padding-slider", "#dvSettingBlock")).text(b.value), $(".bmeImage", _editBlock).css({ padding: b.value + "px" }), m($(_editBlock).attr("width"), _editBlock) } }).find(".ui-slider-handle").append($("<div />").css({ display: "none" }).addClass("new-slider-val")).hover(function () { $(".new-slider-val", $("#padding-slider", "#dvSettingBlock")).show() }, function () { $(".new-slider-val", $("#padding-slider", "#dvSettingBlock")).hide() }), $(".new-slider-val", $("#padding-slider", "#dvSettingBlock")).text(l);
        var n = this.paddingH.replace("px", "");
        $("#padding-h-slider", "#dvSettingBlock").slider({ value: n, min: 0, max: 20, step: 5, slide: function (a, b) { $(".new-slider-val", $("#padding-h-slider", "#dvSettingBlock")).text(b.value), $(".bmeImage", _editBlock).css({ "padding-left": b.value + "px", "padding-right": b.value + "px" }), m($(_editBlock).attr("width"), _editBlock) } }).find(".ui-slider-handle").append($("<div />").css({ display: "none" }).addClass("new-slider-val")).hover(function () { $(".new-slider-val", $("#padding-h-slider", "#dvSettingBlock")).show() }, function () { $(".new-slider-val", $("#padding-h-slider", "#dvSettingBlock")).hide() }), $(".new-slider-val", $("#padding-h-slider", "#dvSettingBlock")).text(n), n = this.paddingV.replace("px", ""), $("#padding-v-slider", "#dvSettingBlock").slider({ value: n, min: 0, max: 20, step: 5, slide: function (a, b) { $(".new-slider-val", $("#padding-v-slider", "#dvSettingBlock")).text(b.value), $(".bmeImage", _editBlock).css({ "padding-top": b.value + "px", "padding-bottom": b.value + "px" }), m($(_editBlock).attr("width"), _editBlock) } }).find(".ui-slider-handle").append($("<div />").css({ display: "none" }).addClass("new-slider-val")).hover(function () { $(".new-slider-val", $("#padding-v-slider", "#dvSettingBlock")).show() }, function () { $(".new-slider-val", $("#padding-v-slider", "#dvSettingBlock")).hide() }), $(".new-slider-val", $("#padding-v-slider", "#dvSettingBlock")).text(n), f(), e(), EditModeOn = !0
    }

    function e() { null != _editBlock && ($("a[name='ancUploadImage']", _editBlock).on("click", g), $(".bmeImage", _editBlock).on("click", g), _StartDDImage()) }

    function f() { null != _editBlock && ($("a[name='ancUploadImage']", _editBlock).off("click", g), $(".bmeImage", _editBlock).off("click", g), _ClearDDImage()) }

    function g(a) { a.preventDefault(), a.stopPropagation(), currentImageCtrl = blkObjectData, detectClose = "_ClearImageCtrl()", null != toolbarDialog && 0 != toolbarDialog.dialog("isOpen") || OpenImageDialog("1") }

    function h(a) { f(), 1 == $("a", $(".bmeImage", _editBlock)).length ? $("a", $(".bmeImage", _editBlock)).attr("href", a) : $("img", $(".bmeImage", _editBlock)).wrap('<a href="' + a + '" />'), e(), LoadToolBar(4), IsLink(!0, 0), _editBlockItem = null }

    function j(a) { 1 == $("a", $(".bmeImage", _editBlock)).length && (f(), $("a", $(".bmeImage", _editBlock)).parent().html($("a", $(".bmeImage", _editBlock)).html()), e()), LoadToolBar(3), IsLink(!1, 0) }

    function k(a) { f(); var b = $("img", a),
            c = $(b).attr("src"),
            d = $("input[name='txtAltText']", "#dvSettingBlock").val(),
            g = $("<div>"),
            h = 720;
        $(g).append(a), $("img", g).attr("alt", d), $("img", g).css({ "max-width": h, display: "block" }), $("img", g).removeAttr("height"), a = $(g).html(), $(".bmeImage", _editBlock).html(a), null == c || "" == c || c == smImage ? $("#fldImageDetail", "#dvSettingBlock").addClass("hidden") : ($("#lblImageName", $("#dvSettingBlock")).html("<img src='" + c + "' isVideo=1 border=0 style='max-width:100px;max-height:100px;display:block;' />"), $("#fldImageDetail", "#dvSettingBlock").removeClass("hidden")), currentVariable = $("a", $(".bmeImage", _editBlock)), _editBlockItem = $(".bmeImage", _editBlock).html(), $("a#rEdit, a#rLink", $("#dvSettingBlock")).addClass("hidden"), m($(_editBlock).attr("width"), _editBlock), currentImageCtrl = null, e(), LoadToolBar(3), IsLink(!1, 0), $(".tool-link, .tool-unlink", toolbarCtrl).hide() }

    function l(a, b) { f(); var c = _editBlock,
            d = !1; "undefined" != typeof b && null != b && (c = b, d = !0); var g = $(a),
            h = parseWidth($(g).attr("width")),
            i = h; try { i = parseWidth($(g).css("max-width")) } catch (j) {} 0 == h && (h = $(g).width()), 0 == i && (i = h); var k = $(g).attr("src"),
            l = $("a", $(".bmeImage", c)).attr("href"); "undefined" != typeof l && "" != l && (a = '<a href="' + l + '">' + a + "</a>"); var n = $("input[name='txtAltText']", "#dvSettingBlock").val(),
            o = $("<div>");
        $(o).append(a), $("img", o).attr("alt", n), $("img", o).css({ "max-width": i, display: "block" }), $("img", o).removeAttr("height"), a = $(o).html(), $(".bmeImage", c).html(a), m($(c).attr("width"), c), d && $(c) != $(_editBlock) || (null == k || "" == k || k == smImage ? $("#fldImageDetail", "#dvSettingBlock").addClass("hidden") : ($("#lblImageName", $("#dvSettingBlock")).html("<img src='" + k + "' isVideo=0 border=0 style='max-width:100px;max-height:100px;display:block;' />"), $("#fldImageDetail", "#dvSettingBlock").removeClass("hidden")), currentVariable = $("a", $(".bmeImage", c)), _editBlockItem = $(".bmeImage", c).html(), $("a#rEdit, a#rLink", $("#dvSettingBlock")).removeClass("hidden"), currentImageCtrl = null, e(), $(".tool-link, .tool-unlink").removeClass("hidden"), "undefined" != typeof l && "" != l ? (LoadToolBar(4), IsLink(!0, 0)) : (LoadToolBar(3), IsLink(!1, 0))) }

    function m(a, b) { $(b).attr("width", a), $(b).width = a, $("img", b).attr("border", "0").css("width", "2"); var c = 0,
            d = parseWidth($(".bmeImage", b).css("padding-left"));
        c = GetInnerWidth(b) - 2 * d; var e = 0,
            f = 0;
        $("img", b).each(function () { e = getImageMaxWidth(this), f = c > e ? e : c; var a = parseWidth(GetBorderDetail($(this).closest(".bmeImage"), "width")); if (f <= c - 2 * a) var b = f;
            else var b = c - 2 * a;
            $(this).attr("width", b), $(this).css("width", b) }), setImageSetting(a, b) }

    function n(a) { m(a, $("." + rootBlockClass, "#" + this.id)) }

    function o() { var a = $("." + rootBlockClass, "#" + this.id);
        $(a).attr("width", "100%"), $("img", a).attr("width", "2"), $("img", a).css("width", "2") } this.width = "100%", this.backgroundColor = "", this.imageSrc = "", this.padding = "20", this.paddingH = "20", this.paddingV = "20", this.borderWidth = 0, this.borderStyle = "none", this.borderColor = "transparent", this.imageAlign = "center", this.load = c, this.isVideo = 0, this.unload = b, this.setWidth = n, this.resetWidth = o, this.renderSetting = d, this.getHTML = a, this.id = "", this.insertImage = l, this.insertVideo = k, this.type = "image", this.addLink = h, this.removeLink = j, this.bindDDImage = e, this.unbindDDImage = f
}

function Block_ImageCaption() {
    function a(a) { if (blkObjectData.unbindDDImage(), 1 != a) { var b = new Array,
                c = "",
                d = 0,
                e = "",
                f = "",
                g = "",
                h = "",
                i = "",
                j = "";
            $("table.bmeImageContainer", _editBlock).each(function () { "" == f && (frTable = $("table:first", $(this)), f = $(frTable).hasClass("bmeCaptionTable") ? "top" : "left" == $(frTable).css("float") ? "right" : "right" == $(frTable).css("float") ? "left" : "bottom"), captionTable = $(".bmeCaptionTable", $(this)), imageTable = $(".bmeImageTable", $(this)), captionText = $("td[name=tblCell]", $(captionTable)).html(), c = $("td", $(imageTable)).html(), "" == c && $("td", $(imageTable)).html(BLANK_IMAGE_CODE), d = 0, 1 == $("var", c).length && (d = 1), g = $(imageTable).attr("imgid"), imageAlign = $("td", $(imageTable)).attr("align"), "" == imageAlign && (imageAlign = "center"), "" == i ? i = imageAlign : i != imageAlign && (i = "custom"), imageVAlign = $("td", $(imageTable)).attr("valign"), "" == imageVAlign && (imageVAlign = "top"), "" == j ? j = imageVAlign : j != imageVAlign && (j = "custom"), "top" == f || "bottom" == f ? e = "100%" : (h = $(".bmeImageTable:first", $(this)).attr("dimension"), "undefined" != typeof h ? e = h : (cW = parseWidth($(captionTable).attr("width")), iW = parseWidth($(imageTable).attr("width")), cW == iW ? e = "50" : cW > iW ? e = "30%" : cW < iW && (e = "70%"))), b[b.length] = { imgid: g, imagesrc: c, imageAlign: imageAlign, imageVAlign: imageVAlign, isVideo: d, captionText: captionText, captionPosition: f, width: e } }), blkObjectData.images = b } var k = blkObjectData.updateImageContainer(blkObjectData);
        $(_editBlock).empty(), $(_editBlock).append(k), blkObjectData.setWidth(blkObjectData.width), blkObjectData.bindDDImage(), blkObjectData.initText(), blkObjectData.assignHeight() }

    function b(a) { var b = this,
            c = '<table width="' + b.width + '" cellspacing="0" cellpadding="0" border="0" class="' + rootBlockClass + '" name="blk_imagecaption" style="'; return "" != b.backgroundColor && "transparent" != b.backgroundColor && (c += "background-color:" + b.backgroundColor + ";"), c += '"><tbody>', c += k(b), c += "</tbody></table>" }

    function c(a) { i(), u(), m(), lastActiveEditorID = null, detectEditorFocus = null, detectEditorInit = null, $(".bmenohilite", _editBlock).removeClass("bmenohilite"), $("#dvSettingBlock").off(), $("#dvSettingBlock").empty(), DisableToolbar(0) }

    function d(a) { if ($(a).parent().hasClass("blk_wrapper")) this.id = GetBlockID(a);
        else { this.id = SetWidgetBlockID(); var b = this.id,
                c = getNewBlockWrapper(b, "blk_imagecaption", $(a).clone().wrap("<div />").parent().html());
            $(a).replaceWith(c) } var d = $("." + rootBlockClass, "#" + this.id);
        this.width = $(d).attr("width"), this.backgroundColor = $(d).css("background-color"); var e = new Array,
            f = null,
            g = "";
        imageSRC = "", imageGAlign = "", isVideo = 0, imageGVAlign = "", imageAlign = "", imageVAlign = "", captionAlign = "", captionText = "", imageWidth = "", cW = "", iW = ""; var h = null,
            i = null,
            j = null; return this.paddingH = $(".bmeCaptionContainer", $(d)).css("padding-left"), "undefined" == typeof this.paddingH && (this.paddingH = 20), "" == this.paddingH.toString() && (this.paddingH = 0), this.paddingV = $(".bmeCaptionContainer", $(d)).css("padding-top"), "undefined" == typeof this.paddingV && (this.paddingV = 10), "" == this.paddingV.toString() && (this.paddingV = 0), this.paddingH = parseWidth(this.paddingH), this.paddingV = parseWidth(this.paddingV), $("table.bmeImageContainer", $(d)).each(function () { "" == captionAlign && (h = $("table:first", $(this)), $(h).hasClass("bmeCaptionTable") ? captionAlign = "top" : "left" == $(h).css("float") ? captionAlign = "right" : "right" == $(h).css("float") ? captionAlign = "left" : captionAlign = "bottom"), i = $(".bmeCaptionTable", $(this)), j = $(".bmeImageTable", $(this)), captionText = $("td[name=tblCell]", $(i)).html(), imageSRC = $("td", $(j)).html(), "" == imageSRC && $("td", $(j)).html(BLANK_IMAGE_CODE), isVideo = 0, 1 == $("var", imageSRC).length && (isVideo = 1), g = $(j).attr("imgid"), imageAlign = $("td", $(j)).attr("align"), "" == imageAlign && (imageAlign = "center"), "" == imageGAlign ? imageGAlign = imageAlign : imageGAlign != imageAlign && (imageGAlign = "custom"), imageVAlign = $("td", $(j)).attr("valign"), "" == imageVAlign && (imageVAlign = "top"), "" == imageGVAlign ? imageGVAlign = imageVAlign : imageGVAlign != imageVAlign && (imageGVAlign = "custom"), "top" == captionAlign || "bottom" == captionAlign ? imageWidth = "100%" : (f = $(".bmeImageTable:first", $(this)).attr("dimension"), "undefined" != typeof f ? imageWidth = f : (cW = parseWidth($(i).attr("width")), iW = parseWidth($(j).attr("width")), cW == iW ? imageWidth = "50" : cW > iW ? imageWidth = "30%" : cW < iW && (imageWidth = "70%"))), e[e.length] = { imgid: g, imagesrc: imageSRC, imageAlign: imageAlign, imageVAlign: imageVAlign, isVideo: isVideo, captionText: captionText, captionPosition: captionAlign, width: imageWidth } }), imageWidth.indexOf("%") == -1 && (imageWidth += "%"), this.imageAlign = imageGAlign, this.imageVAlign = imageGVAlign, this.imageArea = imageWidth, this.aligntype = captionAlign, this.images = e, this.gutter = $(".bmeImageContainerRow:first", d).attr("gutter"), "undefined" == typeof this.gutter && (this.gutter = "10"), this.gutter = parseWidth(this.gutter), "right" != captionAlign && "left" != captionAlign || ($("td[name=tblCell]", d).hasClass("bmeMblCenter") && (this.mobileStyle = "1"), $("td[name=tblCell]", d).hasClass("bmeNoBr") && (this.mobileStyle = "2"), $("td[name=tdContainer]", d).hasClass("bmeMblInline") && (this.mobileStyle = "3")), this }

    function e(a) { $("#imgGAlign").val(a.imageAlign), applyAlignSelectedState("#fld_imgGAlign", a.imageAlign), $("#imgGVAlign").val(a.imageVAlign), applyAlignSelectedState("#fld_imgGVAlign", a.imageVAlign) }

    function f(a) { $("#dvSettingBlock").off(), $("#dvSettingBlock").empty(), $(".sidebar-editblock-name").text(JS_BLOCK_IMAGE_CAPTION); var b = "",
            c = ($(this.imageSrc), chkColorVal(this.backgroundColor)),
            d = ""; "" != c && (d = hexc(c.toLowerCase())), b += "<div id=mainSetting class=current>", b += "<div class='panel-container'>", b += '<div class="subpanel-nav clearfix2"><span class="selected" onclick="javascript:subcontentToggle(this, \'sub1\');">' + JS_SETTINGS + '</span><span class="" onclick="javascript:subcontentToggle(this, \'sub2\');">' + JS_CONTENT + "</span></div>", b += '<div class="subcontent current sub1">', b += template_field_BackgroundColor("imagecaption", d, c, JS_BACKGROUND, "rctrlBGColor", "ctrlBGColor"), b += template_field_Slider("padding-h-slider", JS_H_PADDING), b += template_field_Slider("padding-v-slider", JS_V_PADDING), b += "</div>", b += '<div class="subcontent sub2">', b += '<fieldset><label class="label-small">' + JS_CAPTION_POSITION + '</label><select id="capPos" class="form-control form-control-small" onchange="javascript:selectChangeHandler(\'imagecaption\', this);"><option value=top ' + ("top" == this.aligntype ? "selected" : "") + ">" + JS_POSITION_TOP + "</option><option value=left " + ("left" == this.aligntype ? "selected" : "") + ">" + JS_POSITION_LEFT + "</option><option value=right " + ("right" == this.aligntype ? "selected" : "") + ">" + JS_POSITION_RIGHT + "</option><option value=bottom " + ("bottom" == this.aligntype ? "selected" : "") + ">" + JS_POSITION_BOTTOM + "</option></select></fieldset>", b += '<fieldset><label class="label-small">' + JS_IMAGES + "</label><select id='imgCount' class='form-control form-control-small' onchange=\"javascript:selectChangeHandler('imagecaption', this);\"><option value=\"1\" " + (1 == this.images.length ? "selected" : "") + '>1</option><option value="2" ' + (2 == this.images.length ? "selected" : "") + '>2</option><option value="3" ' + (3 == this.images.length ? "selected" : "") + ">3</option></select></fieldset>", b += '<fieldset id=fldImageArea><label class="label-small">' + JS_IMAGE_AREA + "</label><select id='imgArea' class='form-control form-control-small' onchange=\"javascript:selectChangeHandler('imagecaption', this);\"><option value=\"50%\" " + ("50%" == this.imageArea ? "selected" : "") + ">" + JS_SIZE_50 + '</option><option value="30%" ' + ("30%" == this.imageArea ? "selected" : "") + ">" + JS_SIZE_30 + '</option><option value="70%" ' + ("70%" == this.imageArea ? "selected" : "") + ">" + JS_SIZE_70 + "</option></select></fieldset>", b += template_field_alignment("imagecaption", "horizontal", JS_IMAGE_ALIGN, "imgGAlign", imageGAlign, "fld_imgGAlign"), b += template_field_alignment("imagecaption", "vertical", JS_IMAGE_V_ALIGN, "imgGVAlign", imageGVAlign, "fld_imgGVAlign"), b += template_field_Slider("gutter-slider", JS_GUTTER_WIDTH, "fldGutter"), b += template_field_LineHeight("imagecaption"), b += '<fieldset id="fldMobileStyle" class=\'hidden\'><label class="label-small">' + JS_MOBILE_STYLING + '</label><select id="mobileStyle" class="form-control form-control-small" onchange="javascript:selectChangeHandler(\'imagecaption\', this);"><option value=\'\' ' + ("0" == this.mobileStyle || "" == this.mobileStyle ? " selected" : "") + ">" + JS_NONE + "</option><option value='1' " + ("1" == this.mobileStyle ? " selected" : "") + ">" + JS_CENTER_CONTENT_COLUMN + "</option><option value='2' " + ("2" == this.mobileStyle ? " selected" : "") + ">" + JS_CENTER_CONTENT_NOBR_COLUMN + "</option><option value='3' " + ("3" == this.mobileStyle ? " selected" : "") + ">" + JS_SIDE_BY_SIDE_COLUMN + "</option></select></fieldset>", b += "</div>", b += "</div>", b += template_field_SaveAndClose("imagecaption"), b += "</div>", b += "<div id=mainSettingVeil onclick=\"javascript:colorChangeHandler('imagecaption', this);\"></div>", b += "<div id=itemSetting>", b += "<div class='panel-container'>", b += '<fieldset id=fldImageDetail><label class="label-small"><span id=lblImageName></span><a class=reset-link id=rEdit onclick="javascript:colorChangeHandler(\'imagecaption\', this);"><small>' + JS_EDIT + "</small></a> <a class=reset-link id=rReplace onclick=\"javascript:colorChangeHandler('imagecaption', this);\"><small>" + JS_REPLACE + "</small></a> <a class=reset-link id=rLink onclick=\"javascript:colorChangeHandler('imagecaption', this);\"><small>" + JS_LINK + "</small></a></label></fieldset>", b += template_field_TextInput("imagecaption", JS_ALT_TEXT, "txtAltText", "txtAltText", "", "", "fldImageAltDetail"), b += template_field_alignment("imagecaption", "horizontal", JS_IMAGE_ALIGN, "imgAlign", "", "fld_imgAlign"), b += template_field_alignment("imagecaption", "vertical", JS_IMAGE_V_ALIGN, "imgVAlign", "", "fld_imgVAlign"), b += template_field_removeGroup("imagecaption", JS_REMOVE_IMG_FROM_GRP, "ancRemoveImage", "ancRemoveImage"), b += "</div>", b += template_field_SaveAndBack("imagecaption"), b += "</div>", $("#dvSettingBlock").append(b), thisborderPadding = parseWidth(this.gutter), $("#gutter-slider", "#dvSettingBlock").slider({ value: thisborderPadding, min: 0, max: 20, step: 5, slide: function (a, b) { $(".new-slider-val", $("#gutter-slider", "#dvSettingBlock")).text(b.value), blkObjectData.gutter = b.value, blkObjectData.applyText(), blkObjectData.refreshBlock() }, start: function (a, b) { $(".new-slider-val", $("#gutter-slider", "#dvSettingBlock")).show() }, stop: function (a, b) { $(".new-slider-val", $("#gutter-slider", "#dvSettingBlock")).delay(400).fadeOut(200) } }).find(".ui-slider-handle").append($("<div />").css("display", "none").addClass("new-slider-val")), $(".new-slider-val", $("#gutter-slider", "#dvSettingBlock")).text(thisborderPadding), thisborderPadding = parseWidth(this.paddingH), $("#padding-h-slider", "#dvSettingBlock").slider({ value: thisborderPadding, min: 0, max: 20, step: 5, slide: function (a, b) { $(".new-slider-val", $("#padding-h-slider", "#dvSettingBlock")).text(b.value), blkObjectData.paddingH = b.value, blkObjectData.applyText(), blkObjectData.refreshBlock() }, start: function (a, b) { $(".new-slider-val", $("#padding-h-slider", "#dvSettingBlock")).show() }, stop: function (a, b) { $(".new-slider-val", $("#padding-h-slider", "#dvSettingBlock")).delay(400).fadeOut(200) } }).find(".ui-slider-handle").append($("<div />").css("display", "none").addClass("new-slider-val")), $(".new-slider-val", $("#padding-h-slider", "#dvSettingBlock")).text(thisborderPadding), thisborderPadding = parseWidth(this.paddingV), $("#padding-v-slider", "#dvSettingBlock").slider({ value: thisborderPadding, min: 0, max: 20, step: 5, slide: function (a, b) { $(".new-slider-val", $("#padding-v-slider", "#dvSettingBlock")).text(b.value), blkObjectData.paddingV = b.value, blkObjectData.applyText(), blkObjectData.refreshBlock() }, start: function (a, b) { $(".new-slider-val", $("#padding-v-slider", "#dvSettingBlock")).show() }, stop: function (a, b) { $(".new-slider-val", $("#padding-v-slider", "#dvSettingBlock")).delay(400).fadeOut(200) } }).find(".ui-slider-handle").append($("<div />").css("display", "none").addClass("new-slider-val")), $(".new-slider-val", $("#padding-v-slider", "#dvSettingBlock")).text(thisborderPadding), "top" == this.aligntype || "bottom" == this.aligntype ? ($("#fldImageArea", "#dvSettingBlock").addClass("hidden"), $("#fldMobileStyle", "#dvSettingBlock").addClass("hidden")) : ($("#fldImageArea", "#dvSettingBlock").removeClass("hidden"), $("#fldMobileStyle", "#dvSettingBlock").removeClass("hidden")), this.images.length > 1 ? $("#fldGutter", "#dvSettingBlock").removeClass("hidden") : $("#fldGutter", "#dvSettingBlock").addClass("hidden"), detectEditorLoad = "blkObjectData.assignHeight()", detectEditorInit = "blkObjectData.assignHeight()", LoadToolBar(0), j(), e(this), l(), EditModeOn = !0 }

    function g(a) { m(), 1 == $("a:visible", _editBlockItem).length ? ($("a", _editBlockItem).attr("href", a), IsLink(!0, 0)) : ($("img", _editBlockItem).wrap('<a href="' + a + '" />'), IsLink(!0, 0)), _editBlockItem = null, l() }

    function h(a) { m(), 1 == $("a", _editBlockItem).length && ($("a", _editBlockItem).parent().html($("a", _editBlockItem).html()), IsLink(!1, 0)), _editBlockItem = null, l() }

    function i() { try { var a = tinyMCE.get("txaEditableContent").getContent();
            tinymce.execCommand("mceRemoveControl", !0, "txaEditableContent"), purge($("#txaEditableContent")), purge($("#editTexttxaEditableContent")), $("#txaEditableContent").remove(), $("#editTexttxaEditableContent").remove(), a.indexOf("editTexttxaEditableContent") != -1 && (a = $(a).html()), a = fixSaveTextContent(a), $($("td[name='tblCell']", _editBlock)[0]).html(a) } catch (b) {} $("td[name='tblCell']", _editBlock).length > 1 && (a = tinyMCE.get("txbEditableContent").getContent(), tinymce.execCommand("mceRemoveControl", !0, "txbEditableContent"), purge($("#txbEditableContent")), purge($("#editTexttxbEditableContent")), $("#txbEditableContent").remove(), $("#editTexttxbEditableContent").remove(), a.indexOf("editTexttxbEditableContent") != -1 && (a = $(a).html()), a = fixSaveTextContent(a), $($("td[name='tblCell']", _editBlock)[1]).html(a)), $("td[name='tblCell']", _editBlock).length > 2 && (a = tinyMCE.get("txcEditableContent").getContent(), tinymce.execCommand("mceRemoveControl", !0, "txcEditableContent"), purge($("#txcEditableContent")), purge($("#editTexttxcEditableContent")), $("#txcEditableContent").remove(), $("#editTexttxcEditableContent").remove(), a.indexOf("editTexttxcEditableContent") != -1 && (a = $(a).html()), a = fixSaveTextContent(a), $($("td[name='tblCell']", _editBlock)[2]).html(a)), detectEditorFocus = null }

    function j() { currentEdit = "txaEditableContent", LoadTiny($($("td[name='tblCell']", _editBlock)[0]), currentEdit), $("td[name='tblCell']", _editBlock).length > 1 && (currentEdit = "txbEditableContent", LoadTiny($($("td[name='tblCell']", _editBlock)[1]), currentEdit)), $("td[name='tblCell']", _editBlock).length > 2 && (currentEdit = "txcEditableContent", LoadTiny($($("td[name='tblCell']", _editBlock)[2]), currentEdit)), $(".mceLayout", _editBlock).css({ width: "100%" }) }

    function k(a) { var b = a,
            c = "",
            d = "",
            f = "",
            g = "",
            h = "",
            i = "",
            j = "",
            k = "",
            l = "";
        g = a.width, e(b), "undefined" != typeof b.imageAlign && "" != b.imageAlign || (b.imageAlign = "center"), "undefined" != typeof b.imageVAlign && "" != b.imageVAlign || (b.imageVAlign = "top"), "undefined" != typeof b.imageArea && "" != b.imageArea || (1 == b.images.length ? b.imageArea = "100%" : b.imageArea = "50%"), "undefined" != typeof b.aligntype && "" != b.aligntype || (b.aligntype = "bottom"), (1 == b.images.length || "left" != b.aligntype && "right" != b.aligntype) && (paddingBottom = "10px"), k = '<tr><td class=bmeImageContainerRow valign=top gutter="' + parseWidth(b.gutter) + '">', k += '<table width="100%" cellpadding="0" cellspacing="0" border="0"><tr>', g.toString().indexOf("%") == -1 && (g = parseWidth(g) - 2 * parseWidth(b.paddingH)); for (var m = 0, n = b.images.length; m < n; m++) { if ("" != b.images[m].captionText && b.images[m].captionText != JS_DEFAULT_CAPTION_CONTENT || (b.images[m].captionText = '<div style="line-height:150%;">' + JS_DEFAULT_CAPTION_CONTENT + "</div>"), "" == b.images[m].imagesrc && (b.images[m].imagesrc = BLANK_IMAGE_CODE), "right" == b.aligntype || "left" == b.aligntype ? (h = g, "100" != b.imageArea && "100%" != b.imageArea || (b.imageArea = "50"), "50" == b.imageArea || "50%" == b.imageArea ? h.toString().indexOf("%") == -1 ? (j = fixInt(h / 2), i = fixInt(h / 2)) : (j = "50%", i = "50%") : "30" == b.imageArea || "30%" == b.imageArea ? h.toString().indexOf("%") == -1 ? (j = fixInt(h / 3), i = h - j) : (j = "30%", i = "70%") : "70" != b.imageArea && "70%" != b.imageArea || (h.toString().indexOf("%") == -1 ? (i = fixInt(h / 3), j = h - i) : (j = "70%", i = "30%"))) : (b.imageArea = "100%", h = g.toString().indexOf("%") == -1 ? fixInt(g / b.images.length) : "100%", j = h, i = h), "top" != b.aligntype && "bottom" != b.aligntype || (j.toString().indexOf("%") == -1 && (j -= parseWidth(b.gutter)), i.toString().indexOf("%") == -1 && (i -= parseWidth(b.gutter))), d = "<table cellspacing=0 cellpadding=0 border=0 class=bmeCaptionTable ", "left" == b.aligntype ? d += ' style="float:left;" align="left" width="' + i + '" ' : "right" == b.aligntype ? d += ' style="float:right;" align="right" width="' + i + '" ' : "top" == b.aligntype ? d += ' width="' + i + '" style="padding-bottom:20px; border-collapse:separate;" ' : "bottom" == b.aligntype && (d += ' width="' + i + '" style="padding-top:20px; border-collapse:separate;" '), d += '><tr><td name="tblCell" class="tblCell" valign="top" align="left" style="font-family: Arial,Helvetica,sans-serif; font-size: 14px; font-weight: normal; color: #383838; text-align: left;" ', "bottom" == b.aligntype || "right" != b.aligntype && "left" != b.aligntype || ("1" == b.mobileStyle && (d += " class=bmeMblInline"), "2" == b.mobileStyle && (d += " class='bmeMblInline bmeNoBr'")), d += ">", d += b.images[m].captionText, d += "</td></tr></table>", c = '<table cellspacing=0 cellpadding=0 border=0 class=bmeImageTable dimension="' + b.imageArea + '"', c += " imgid=" + b.images[m].imgid + " ", c += "left" == b.aligntype ? ' style="float:right;" align="right" width="' + j + '" ' : "right" == b.aligntype ? ' style="float:left;" align="left" width="' + j + '" ' : ' width="' + j + '" ', c += '><tr><td name=bmeImgHolder width="' + j + '"', "right" != b.aligntype && "left" != b.aligntype || ("1" == b.mobileStyle && (c += " class=bmeMblInline"), "2" == b.mobileStyle && (c += " class='bmeMblInline bmeNoBr'")), "custom" != b.imageAlign && (b.images[m].imageAlign = b.imageAlign), "custom" != b.imageVAlign && (b.images[m].imageVAlign = b.imageVAlign), "" != b.images[m].imageAlign && "undefined" != b.images[m].imageAlign || (b.images[m].imageAlign = "center"), "" != b.images[m].imageVAlign && "undefined" != b.images[m].imageVAlign || (b.images[m].imageVAlign = "top"), c += ' align="' + b.images[m].imageAlign + '" valign="' + b.images[m].imageVAlign + '" ', l = b.images[m].imagesrc, l.indexOf("<div") == -1 && j.toString().indexOf("%") == -1) { var o = $("<div>");
                $(o).append(l), $("img", $(o)).attr("width", j), l = $(o).html() } c += ">" + l + "</td></tr></table>", m > 0 && ("left" == b.aligntype || "right" == b.aligntype ? (m == b.images.length - 1, k += "</td></tr></table>", k += '</td></tr><tr><td class=trMargin><table cellspacing=0 cellpadding=0 border=0><tr><td height="' + parseWidth(b.gutter) + '"></td></tr></table></td></tr><tr><td class=bmeImageContainerRow valign=top>', k += '<table width="100%" cellpadding="0" cellspacing="0" border="0"><tr>') : (k += "</td>", k += '<td align="center" valign="top" gutter="' + parseWidth(b.gutter) + '" class="bmeImageGutterRow"><table cellspacing="0" cellpadding="0" border="0" width="' + parseWidth(b.gutter) + '"><tbody><tr><td></td></tr></tbody></table></td>')), f = "<table cellspacing=0 cellpadding=0 border=0 class=bmeImageContainer width=" + h, f += 0 == m ? '  align="left" style="float:left;" ' : "left" == b.aligntype || "right" == b.aligntype ? '  align="left" style="float:left;" ' : '  align="right" style="float:right;" ', f += "><tr><td valign=top name=tdContainer ", "right" != b.aligntype && "left" != b.aligntype || "3" == b.mobileStyle && (f += " class=bmeMblInline"), f += ">", f += "top" == b.aligntype ? d + c + "</td></tr></table>" : c + d + "</td></tr></table>", k += '<td class="tdPart" valign="top">' + f + "</td>" } return k += "</td></tr></table>", k += "</td></tr>", k = '<tr><td><table cellspacing="0" cellpadding="0" class="bmeCaptionContainer" width="100%" style="padding-left:' + parseWidth(b.paddingH) + "px; padding-right:" + parseWidth(b.paddingH) + "px; padding-top:" + parseWidth(b.paddingV) + "px; padding-bottom:" + parseWidth(b.paddingV) + 'px;border-collapse:separate;">' + k + "</table></td></tr>" }

    function l() { null != _editBlock && ($("a[name='ancUploadImage']", _editBlock).on("click", p), $(".bmeImageTable", _editBlock).on("click", p), $(".drag-image-box", _editBlock).css({ width: "100%", "max-width": "166px" }), _StartDDImage()) }

    function m() { null != _editBlock && ($("a[name='ancUploadImage']", _editBlock).off("click", p), $(".bmeImageTable", _editBlock).off("click", p)) }

    function n(a) { IsLink(!1, 0), o(a); var b = "";
        $("img", editTarget1).each(function () { b = $(this).attr("src") }), "" == b || b == smImage ? ($("#fldImageDetail, #fldImageAltDetail").addClass("hidden"), panelToggle("second", "hide"), OpenImageDialog("1")) : ($("a", editTarget1).length > 0 ? IsLink(!0, 0) : IsLink(!1, 0), $("#lblImageName", $("#itemSetting")).html("<img src='" + b + "' border=0 style='max-width:100px;max-height:100px;display:block;' />"), $("#fldImageDetail, #fldImageAltDetail").removeClass("hidden"), panelToggle("second")) }

    function o(a) { _editBlockItem = a, editTarget1 = $(".bmeImageTable", a), lastActiveEditorID = $("textarea", a).attr("id"); var b = $(editTarget1).attr("imgid");
        oldBlockContent = { image: $(editTarget1).html(), text: fixLoadTextContent(tinyMCE.get(lastActiveEditorID).getContent()), imageid: b, textid: lastActiveEditorID }; var c = "",
            d = "",
            e = "",
            f = "";
        $("img", editTarget1).each(function () { c = $(this).attr("alt"), "undefined" == c && (c = ""), d = $(this).attr("src") }), $("a#rLink, a#rEdit", "#dvSettingBlock").removeClass("hidden"), panelToggle("second"), e = $("td", editTarget1).attr("align"), "" != e && "undefined" != e || (e = "center"), f = $("td", editTarget1).attr("valign"), "" != f && "undefined" != f || (f = "top"), $(".bmeImageContainer", _editBlock).removeClass("bmenohilite"), $(".bmeImageContainer", _editBlock).addClass("bmenohilite"), $(a).removeClass("bmenohilite"), currentVariable = $("a", editTarget1), $("input[name='txtAltText']", $("#itemSetting", "#dvSettingBlock")).val(c), applyAlignSelectedState("#fld_imgAlign", e), applyAlignSelectedState("#fld_imgVAlign", f), $("select#imgAlign", $("#itemSetting", "#dvSettingBlock")).val(e), $("select#imgVAlign", $("#itemSetting", "#dvSettingBlock")).val(f), $(".bmeImageTable", _editBlock).length > 1 ? ($("a[name='ancRemoveImage']", "#dvSettingBlock").removeClass("hidden"), panelToggle("second", "hide")) : ($("a[name='ancRemoveImage']", "#dvSettingBlock").addClass("hidden"), panelToggle("second")), $("#dvSettingBlock").show(), panelToggle("second") }

    function p(a) { currentImageCtrl = blkObjectData, a.preventDefault(), a.stopPropagation(), detectEditorFocus = "_changeCaptionFocus()"; var b = ""; for (null != editTarget1 && $("img", editTarget1).each(function () { $(this).attr("alt", $("input[name='txtAltText']").attr("value")) }), b = $(this); !$(b).hasClass("bmeImageContainer") && !$(b).hasClass("bmeImageContainer");) b = $(b).parent();
        n(b) }

    function q(a) { var b = $("img", a);
        _editBlockItem = editTarget1, $("td", _editBlockItem).first().html(a); var c = $(_editBlockItem).attr("width"); "50%" == c ? c = $(_editBlockItem).width() : "100%" == c && (c = $(_editBlockItem).width()); var d = 720;
        c.toString().indexOf("px") != -1 && (c = c.replace("px", "")), $("img", _editBlockItem).each(function () { c > d && (c = d), $(this).css({ "max-width": d, display: "block" }), $(this).attr("width", c), $(this).removeAttr("height") }), currentImageCtrl = null, _editBlockItem = null, $("a#rEdit, a#rLink").addClass("hidden"), $("#lblImageName", $("#itemSetting")).html("<img src='" + $(b).attr("src") + "' isVideo=1 border=0 style='max-width:100px;max-height:100px;display:block;' />"), $("#fldImageDetail, #fldImageAltDetail").removeClass("hidden"), panelToggle("second") }

    function r(a) { var b = $(a);
        _editBlockItem = editTarget1; var c = parseWidth($(b).attr("width"));
        0 == c && (c = $(b).width()); var d = 0,
            e = $("a", _editBlockItem).attr("href"); "undefined" != typeof e && "" != e && (a = '<a href="' + e + '">' + a + "</a>"), $("td", _editBlockItem).first().html(a), d = $(_editBlockItem).attr("width"), "50%" == d ? d = $(_editBlockItem).width() : "100%" == d && (d = $(_editBlockItem).width()), d.toString().indexOf("px") != -1 && (d = d.replace("px", "")), $("img", _editBlockItem).each(function () { d > c && (d = c), $(this).css({ "max-width": c, display: "block" }), $(this).attr("width", d), $(this).removeAttr("height") }), currentImageCtrl = null, _editBlockItem = null, $("a#rEdit, a#rLink").removeClass("hidden"), $("#lblImageName", $("#itemSetting")).html("<img src='" + $(b).attr("src") + "' isVideo=0 border=0 style='max-width:100px;max-height:100px;display:block;' />"), $("#fldImageDetail, #fldImageAltDetail").removeClass("hidden"), panelToggle("second") }

    function s() {}

    function t() {}

    function u(a) { "undefined" == typeof a ? blockAssignHeight("dv_" + currentEditID, "imagecaption") : blockAssignHeight($(a).parent().attr("id"), "imagecaption") }

    function v(a, b) {
        $(b).attr("width", a);
        var c = $(b);
        $(this).width = a;
        var d = "",
            e = "",
            f = "",
            g = "",
            h = "",
            i = 0,
            j = null,
            k = null,
            l = $(".bmeImageContainer", c).length,
            m = $(".bmeImageContainerRow", c).length,
            n = $(".bmeCaptionContainer", c).css("padding-left"),
            o = $(".bmeImageContainerRow:first", b).attr("gutter");
        "undefined" == typeof n && (n = "20"), n = parseWidth(n), "undefined" == typeof o && (o = "10"), o = parseWidth(o);
        var p = 0,
            q = "";
        p = 1 == m ? 1 : 0, 1 == p ? 1 == l ? d = "100%" : 2 == l ? d = "50%" : 3 == l && (d = "33%") : d = "100%", a = parseWidth(a) - parseWidth(2 * n);
        var r = a;
        0 == p ? $(".bmeImageContainer", c).attr("width", a) : 1 == l ? $(".bmeImageContainer", c).attr("width", a) : 2 == l ? (i = fixInt((a - o) / 2), $(".bmeImageContainer:first", c).attr("width", i), $(".bmeImageContainer:last", c).attr("width", a - (i + o)), r = a - i - o) : 3 == l && (i = parseInt(fixInt((a - 2 * o) / 3)), $(".bmeImageContainer:first, .bmeImageContainer:last", c).attr("width", i), $(".bmeImageContainer:first", c).next().attr("width", a - 2 * (i + o)), r = a - 2 * (i + o));
        var s = 0,
            t = 0,
            v = 0;
        $(".bmeImageTable", c).attr("height", "").css("height", ""), $(".bmeImageContainer", c).each(function () {
            s++, j = $(".bmeImageTable", $(this)), k = $(".bmeCaptionTable", $(this)), 2 == s && $(this).attr("width", r), g = $(j).attr("width"), h = $(k).attr("width"), d = $(this).attr("width"), "undefined" == typeof d && (d = ""), d.indexOf("%") == -1 && "" != d || (d = $(this).width()), d = parseWidth(d), g = parseWidth(g), h = parseWidth(h), q = "top", "left" != $(j).attr("align") && "right" != $(j).attr("align") && "left" != $(j).css("float") && "right" != $(j).css("float") || (q = "left"),
                e = d, f = d, "top" == q ? (2 == l && (f = e, 2 == s && $("td[name=tdContainer]", this).attr("align", "right")), $(j).attr("width", e), $(k).attr("width", e)) : (g == h ? (e = fixInt(d / 2), 2 * e > d && e--, f = e) : g > h ? (e = d - fixInt(d / 3), f = fixInt(d / 3)) : g < h && (e = fixInt(d / 3), f = parseWidth(d) - parseWidth(e)), e -= 10, f -= 10, $(j).attr("width", e), $(k).attr("width", f)), t = 0, v = 0, setImageSetting(e, j), $("img", j).each(function () { "bmeplcholderimage" != $(this).attr("name") && (t = parseWidth(GetBorderDetail($(this), "max-width")), v = e > t ? t : e, 0 != t && $(this).attr("width", v).attr("border", "0")) }), $("img", k).each(function () { t = parseWidth(GetBorderDetail($(this), "max-width")), 0 != t && (f > t ? $(this).attr("width", t).attr("border", "0").css({ width: "", "max-width": t }) : $(this).attr("width", f).attr("border", "0").css({ width: "", "max-width": t })) })
        }), $(".drag-image-box", c).css({ width: "100%", "max-width": "166px" }), u(c)
    }

    function w(a) { var b = $("." + rootBlockClass, "#" + this.id);
        v(a, b) }

    function x() { var a = $("." + rootBlockClass, "#" + this.id);
        $(a).attr("width", "100%");
        $(".bmeImageTable", a).width();
        $(".bmeImageContainer", a).attr("width", "100%"), $("td[name=bmeImgHolder]", a).removeAttr("height"); var b = parseWidth($(".bmeImageTable:first", a).attr("width")),
            c = parseWidth($(".bmeCaptionTable:first", a).attr("width")); "left" == $(".bmeImageTable", a).css("float") || "left" == $(".bmeImageTable", a).attr("align") || "right" == $(".bmeImageTable", a).css("float") || "right" == $(".bmeImageTable", a).attr("align") ? b == c ? ($(".bmeImageTable", a).attr("width", "10"), $(".bmeCaptionTable", a).attr("width", "10")) : b > c ? ($(".bmeImageTable", a).attr("width", "14"), $(".bmeCaptionTable", a).attr("width", "6")) : b < c && ($(".bmeImageTable", a).attr("width", "6"), $(".bmeCaptionTable", a).attr("width", "14")) : ($(".bmeImageTable", a).attr("width", "100%"), $(".bmeCaptionTable", a).attr("width", "100%")), $("img", $(".bmeImageTable", a)).attr("width", "2"), $("img", $(".bmeCaptionTable", a)).removeAttr("height") } this.width = "100%", this.backgroundColor = "", this.imageArea = "100%", this.imageAlign = "center", this.imageVAlign = "top", this.images = [{ imgid: "1", imagesrc: "", imageAlign: "center", imageVAlign: "top", isVideo: 0, captionText: "", captionPosition: "bottom", width: "100%" }], this.load = d, this.unload = c, this.setWidth = w, this.resetWidth = x, this.renderSetting = f, this.getHTML = b, this.paddingH = 20, this.paddingV = 10, this.gutter = 10, this.updateItem = t, this.rebindItems = s, this.id = "", this.mobileStyle = "", this.insertImage = r, this.insertVideo = q, this.assignHeight = u, this.type = "imagecaption", this.aligntype = "bottom", this.addLink = g, this.removeLink = h, this.selectImageEdit = n, this.showSetting = o, this.bindDDImage = l, this.unbindDDImage = m, this.updateImageContainer = k, this.applyText = i, this.initText = j, this.refreshBlock = a
}

function GenericImageObject() {
    function a(a) { this.imageTable = a, this.uniqueID = randomString(), $(a).attr("uniqueID", this.uniqueID), $("img", a).attr("uniqueID", this.uniqueID) }

    function b(a) { var b = "",
            c = 0,
            d = ""; if (0 == tinyMCE.activeEditor.dom.select("table[uniqueid=" + this.uniqueID + "]").length) { if ("left" == a || "right" == a) { try { b = $(currentImage).attr("imgid") } catch (e) { b = "img" + this.uniqueID } "undefined" == typeof b && (b = "img" + this.uniqueID), b = b.replace("img", ""), tinyMCE.activeEditor.dom.setStyle(tinyMCE.activeEditor.dom.select("img[imgid=img" + b + "]"), "display", "block"), d = "A" == tinyMCE.activeEditor.dom.select("img[imgid=img" + b + "]")[0].parentNode.tagName && 1 == tinyMCE.activeEditor.dom.select("img[imgid=img" + b + "]")[0].parentNode.childNodes.length ? tinyMCE.activeEditor.dom.select("img[imgid=img" + b + "]")[0].parentNode.outerHTML : tinyMCE.activeEditor.dom.select("img[imgid=img" + b + "]")[0].outerHTML, this.uniqueID = b, d = "<table cellspacing=0 cellpadding=0 border=0 class=blk_textimg uniqueid=" + b + " align=" + a + "><tbody><tr><td class=textimg-wrap>" + d + "</td></tr></tbody></table>", tinyMCE.activeEditor.selection.select(tinyMCE.activeEditor.dom.select("img[imgid=img" + b + "]")[0]), isChrome || isSafari ? tinyMCE.activeEditor.selection.setContent(d) : tinyMCE.execCommand("mceReplaceContent", !1, d), c = 1, currentImage = $("img[imgid=" + b + "]", _editBlock) } } else if (("" == a || "none" == a) && tinyMCE.activeEditor.dom.select("table[uniqueid=" + this.uniqueID + "]").length > 0) { try { b = $(currentImage).attr("imgid") } catch (e) { b = "img" + this.uniqueID } "undefined" == typeof b && (b = "img" + this.uniqueID), tinyMCE.activeEditor.dom.setStyle(tinyMCE.activeEditor.dom.select("img[imgid=" + b + "]"), "display", ""), d = "A" == tinyMCE.activeEditor.dom.select("img[imgid=" + b + "]")[0].parentNode.tagName && 1 == tinyMCE.activeEditor.dom.select("img[imgid=" + b + "]")[0].parentNode.childNodes.length ? tinyMCE.activeEditor.dom.select("img[imgid=" + b + "]")[0].parentNode.outerHTML : tinyMCE.activeEditor.dom.select("img[imgid=" + b + "]")[0].outerHTML, tinyMCE.activeEditor.selection.select(tinyMCE.activeEditor.dom.select("table[uniqueid=" + this.uniqueID + "]")[0]), isChrome || isSafari ? tinyMCE.activeEditor.selection.setContent(d) : tinyMCE.execCommand("mceReplaceContent", !1, d), currentImage = $("img[imgid=" + b + "]", _editBlock), c = 1 } 0 == c && tinyMCE.activeEditor.dom.setAttrib(tinyMCE.activeEditor.dom.select("table[uniqueid=" + this.uniqueID + "]"), "align", a), "none" == a || "" == a ? $("#fldImagePadding", "#itemSetting").addClass("hidden") : $("#fldImagePadding", "#itemSetting").removeClass("hidden"), "left" == a ? ($("input[name=txtPaddingTop]", $("#itemSetting")).val("0"), $("input[name=txtPaddingTop]", $("#itemSetting")).change(), $("input[name=txtPaddingBottom]", $("#itemSetting")).val("0"), $("input[name=txtPaddingBottom]", $("#itemSetting")).change(), $("input[name=txtPaddingLeft]", $("#itemSetting")).val("0"), $("input[name=txtPaddingLeft]", $("#itemSetting")).change(), $("input[name=txtPaddingRight]", $("#itemSetting")).val("10"), $("input[name=txtPaddingRight]", $("#itemSetting")).change()) : "right" == a ? ($("input[name=txtPaddingTop]", $("#itemSetting")).val("0"), $("input[name=txtPaddingTop]", $("#itemSetting")).change(), $("input[name=txtPaddingBottom]", $("#itemSetting")).val("0"), $("input[name=txtPaddingBottom]", $("#itemSetting")).change(), $("input[name=txtPaddingLeft]", $("#itemSetting")).val("10"), $("input[name=txtPaddingLeft]", $("#itemSetting")).change(), $("input[name=txtPaddingRight]", $("#itemSetting")).val("0"), $("input[name=txtPaddingRight]", $("#itemSetting")).change()) : "none" != a && "" != a || ($("input[name=txtPaddingTop]", $("#itemSetting")).val("0"), $("input[name=txtPaddingTop]", $("#itemSetting")).change(), $("input[name=txtPaddingBottom]", $("#itemSetting")).val("0"), $("input[name=txtPaddingBottom]", $("#itemSetting")).change(), $("input[name=txtPaddingLeft]", $("#itemSetting")).val("0"), $("input[name=txtPaddingLeft]", $("#itemSetting")).change(), $("input[name=txtPaddingRight]", $("#itemSetting")).val("0"), $("input[name=txtPaddingRight]", $("#itemSetting")).change()) }

    function c(a) { a = Replace(a, " undefined ", ""), a.indexOf(" alt=") == -1 && (a = a.replace(" src=", ' alt="' + $("#txtAltText", "#itemSetting").val() + '" src=')), a = a.replace("<img ", "<img uniqueid='" + this.uniqueID + "' imgid='img" + this.uniqueID + "' "); var b = $(a).attr("src"),
            c = $("#" + currentEdit).parent().width(),
            d = $("<div />"),
            e = null;
        d.append(a), $("img", d).each(function () { e = getImageMaxWidth(this), $(this).css({ "max-width": e + "px" }).attr("border", "0"), c - 10 > e ? $(this).attr("width", e) : $(this).attr("width", c - 10) }), a = d.html(), tinyMCE.activeEditor.selection.select(tinyMCE.activeEditor.dom.select("img[uniqueid='" + this.uniqueID + "']")[0]); try { if ("A" == $(tinyMCE.activeEditor.dom.select("img[uniqueid='" + this.uniqueID + "']")[0]).parent()[0].tagName) { var f = $($(tinyMCE.activeEditor.dom.select("img[uniqueid='" + this.uniqueID + "']")[0]).parent()[0]),
                    g = "",
                    c = $(f).attr("href"); "undefined" != typeof c && (g += ' href="' + c + '" '), c = $(f).attr("name"), "undefined" != typeof c && (g += ' name="' + c + '" '), c = $(f).attr("target"), "undefined" != typeof c && (g += ' target="' + c + '" '), "" != g && (a = "<a" + g + ">" + a + "</a>") } } catch (h) {} tinyMCE.execCommand("mceReplaceContent", !1, a), $("#lblImageName", $("#itemSetting")).html("<img src='" + b + "' id=imgEditAviary border=0 style='max-width:100px;max-height:100px;display:block;' />"), isIE || $("#txtAltText", "#itemSetting").focus(), currentImage = $("img[imgid=img" + this.uniqueID + "]", _editBlock), window.setTimeout(checkEditorSize, 1e3), currentImageCtrl = null }

    function d(a, b) { var c = "",
            d = ""; "undefined" != typeof a && null != a && "" != a && (c = a), "undefined" != typeof b && null != b && "" != b && (d = b); var e = this.uniqueID;
        tinyMCE.activeEditor.selection.select(tinyMCE.activeEditor.dom.select('img[uniqueid="' + e + '"]')[0]); var f = tinyMCE.activeEditor.selection.getContent(),
            g = ""; "" != c && (g += ' href="' + c + '"'), "" != d && (g += ' name="' + d + '"'), "" != g && (f = "<a" + g + ">" + f + "</a>"); try { if ("A" == $(tinyMCE.activeEditor.dom.select('img[uniqueid="' + e + '"]')[0]).parent()[0].tagName) { var h = tinyMCE.activeEditor.dom.select("a"); for (aCntr = 0; aCntr < h.length; aCntr++) h[aCntr].innerHTML.indexOf(e) != -1 && h[aCntr].innerHTML.indexOf("<img") != -1 && tinyMCE.activeEditor.selection.select(h[aCntr]) } } catch (i) {} isChrome || isSafari ? tinyMCE.activeEditor.selection.setContent(f) : tinyMCE.execCommand("mceReplaceContent", !1, f), isIE || $("#txtAltText", "#itemSetting").focus(), currentImage = $("img[imgid=img" + e + "]", _editBlock), currentImageCtrl = null }

    function e(a) { var b = this.uniqueID;
        0 == tinyMCE.activeEditor.dom.select("table[uniqueid=" + b + "]").length ? tinyMCE.activeEditor.dom.setAttrib(tinyMCE.activeEditor.dom.select("img[uniqueid=" + b + "]"), "alt", a) : tinyMCE.activeEditor.dom.setAttrib(tinyMCE.activeEditor.dom.select("table[uniqueid=" + b + "] img"), "alt", a) }

    function f(a, b) { tinyMCE.activeEditor.dom.setStyle(tinyMCE.activeEditor.dom.select("table[uniqueid=" + this.uniqueID + "] td"), "padding-" + a, b), window.setTimeout(checkEditorSize, 1e3) }

    function g() { tinyMCE.activeEditor.dom.setStyle(tinyMCE.activeEditor.dom.select("table[uniqueid=" + this.uniqueID + "] td"), "padding-top", "0"), tinyMCE.activeEditor.dom.setStyle(tinyMCE.activeEditor.dom.select("table[uniqueid=" + this.uniqueID + "] td"), "padding-bottom", "0"), tinyMCE.activeEditor.dom.setStyle(tinyMCE.activeEditor.dom.select("table[uniqueid=" + this.uniqueID + "] td"), "padding-left", "0"), tinyMCE.activeEditor.dom.setStyle(tinyMCE.activeEditor.dom.select("table[uniqueid=" + this.uniqueID + "] td"), "padding-right", "0"), $("input[name='txtPaddingLeft']", "#itemSetting").val("0"), $("input[name='txtPaddingRight']", "#itemSetting").val("0"), $("input[name='txtPaddingTop']", "#itemSetting").val("0"), $("input[name='txtPaddingBottom']", "#itemSetting").val("0") } this.type = "genericimage", this.imageTable = null, this.load = a, this.insertImage = c, this.imageAlign = b, this.imagePadding = f, this.resetPadding = g, this.altText = e, this.imageLink = d, this.uniqueID = "" }

function deleteImage(a) { for (var b = $(a), c = 0, d = null; 0 == c && null != $(b).html();) $(b).parent().hasClass("blk_textimg") && (c = 1, d = $(b).parent()), 0 == c && (b = $(b).parent());
    1 == c && ($(d).remove(), oldBlockContent = null), cancelImage(a) }

function editImage(a) { var b = null,
        c = $(a),
        d = 0;
    b = $(a).closest("table.blk_textimg"), b.length > 0 && (d = 1); var e = !1; try { "blk_text" != _editBlock.attr("name") && "blk_boxtext" != _editBlock.attr("name") || (e = !0) } catch (f) {} if ((null == _editImageTable || _editImageTable.uniqueID != $(b).attr("uniqueid")) && 1 == e) { _editImageTable = null, _ClearImageSettingCtrl(), _editImageTable = new GenericImageObject, _editImageTable.load(b), oldBlockContent = tinyMCE.activeEditor.getContent(), 1 == d ? _editImageTable.load(b) : _editImageTable.load(c); var g = "";
        $(c).attr("alt") && (g = $(c).attr("alt")), "undefined" == g && (g = ""); var h = "";
        $(b).attr("align") && (h = $(b).attr("align")), "undefined" == h && (h = ""); var i = $("td.textimg-wrap", $(b)).css("padding-right"); "undefined" == i && (i = "0"), i = parseWidth(i); var j = $("td.textimg-wrap", $(b)).css("padding-left"); "undefined" == j && (j = "0"), j = parseWidth(j); var k = $("td.textimg-wrap", $(b)).css("padding-top"); "undefined" == k && (k = "0"), k = parseWidth(k); var l = $("td.textimg-wrap", $(b)).css("padding-bottom"); "undefined" == l && (l = "0"), l = parseWidth(l); var m = "";
        m += "<fieldset id=fldImageDetail><label class=label-small>", m += '<span id=lblImageName><img src="' + $(c).attr("src") + '" id=imgEditAviary border=0 style="max-width:100px;max-height:100px;"></span>', m += '<a class="reset-link" onclick="javascript:colorChangeHandler(\'imagesetting\', this);" id="rEdit"><small>' + JS_EDIT + "</small></a>", m += '<a class="reset-link" id="rReplace" onclick="javascript:colorChangeHandler(\'imagesetting\', this);"><small>' + JS_REPLACE + "</small></a>", m += '<a class="reset-link" id="rLink" onclick="javascript:colorChangeHandler(\'imagesetting\', this);"><small>' + JS_LINK + "</small></a></label></fieldset>", m += template_field_TextInput("imagesetting", JS_ALT_TEXT, "txtAltText", "txtAltText", g, ""), m += '<fieldset><label class="label-small">' + JS_IMAGE_ALIGN + '</label><select class="form-control form-control-small" id="ddlAlign" onchange="javascript:selectChangeHandler(\'imagesetting\', this);"><option value="none"' + ("" == h ? " selected" : "") + ">" + JS_NONE + '</option><option value="left"' + ("left" == h ? " selected" : "") + ">" + JS_ALIGN_LEFT + '</option><option value="right"' + ("right" == h ? " selected" : "") + ">" + JS_ALIGN_RIGHT + "</option></select></fieldset>", m += '<fieldset id=fldImagePadding class="' + ("" == h ? "hidden" : "") + '"><label class="label-small">' + JS_PADDING + '<a class="reset-link"  id="rResetPadding" onclick="javascript:colorChangeHandler(\'imagesetting\', this);"><small>' + JS_RESET + "</small></a></label>", m += template_input_padding("imagesetting", JS_POSITION_LEFT, "txtPaddingLeft", j), m += template_input_padding("imagesetting", JS_POSITION_TOP, "txtPaddingTop", k), m += template_input_padding("imagesetting", JS_POSITION_RIGHT, "txtPaddingRight", i), m += template_input_padding("imagesetting", JS_POSITION_BOTTOM, "txtPaddingBottom", l), m += "</fieldset>", $("#itemSetting .panel-container").html(m), $(tinyMCE.activeEditor.dom.select(".content-block-nav")).addClass("hidden"), LoadToolBar("genericimage"), panelToggle("second") } try { if ("a" == $(c).parent()[0].nodeName.toLowerCase())
            if (currentVariable = $(c).parent()[0], currentSelection = currentVariable, "1" == $(currentVariable).attr("survey")) IsSurvey(!0, 1), breakout = !0;
            else if ("1" == $(currentVariable).attr("forward")) IsForward(!0, 1), breakout = !0;
        else if ("1" == $(currentVariable).attr("event")) IsEvent(!0, 1), breakout = !0;
        else { var n = $(currentVariable).attr("name"),
                o = 0;
            n && n.length > 0 && (IsBookmark(!0, 1), o = 1, breakout = !0), 0 == o && IsLink(!0, 1) } } catch (p) {} isIE || $("#txtAltText", "#itemSetting").focus() }

function saveImage(a) { oldBlockContent = null, cancelImage(a) }

function cancelImage(a) { var b = 0; try { "text" != blkObjectData.type && "boxtext" != blkObjectData.type || (tinyMCE.activeEditor.dom.remove(tinyMCE.activeEditor.dom.select(".content-block-nav")), _ClearImageSettingCtrl(), b = 1) } catch (c) {} null != _editImageTable && 1 == b && (_editImageTable = null, null != oldBlockContent && (tinyMCE.activeEditor.setContent(oldBlockContent), "text" != blkObjectData.type && "boxtext" != blkObjectData.type || tinyMCE.activeEditor.dom.remove(tinyMCE.activeEditor.dom.select(".content-block-nav")))), $("#itemSetting").hasClass("current") && (panelToggle("first"), oldBlockContent = null), "text" != blkObjectData.type && "boxtext" != blkObjectData.type || LoadToolBar(0) }

function Block_NavBar() {
    function a(a) { var b = this;
        null != a && (b = a); var c = '<table width="' + b.width + '" cellspacing="0" cellpadding="0" border="0" class="' + rootBlockClass + '" name="blk_navbar" style="'; return "" != b.backgroundColor && "transparent" != b.backgroundColor && (c += "background-color:" + b.backgroundColor + ";"), c += '"><tbody><tr><td><table border="0" cellspacing="0" cellpadding="0" class="bmeContainerRow" width="100%"><tbody><tr><td align="left" valign="top" style="', "" == b.paddingH.toString() && (b.paddingH = 20), "" == b.paddingV.toString() && (b.paddingV = 20), c += "padding-right:" + b.paddingH + "px; padding-left:" + b.paddingH + "px; padding-top:" + b.paddingV + "px; padding-bottom:" + b.paddingV + "px;", c += '">', c += l(b), c += "</td></tr></tbody></table></td></tr></tbody></table>" }

    function b(a) { n(), lastActiveEditorID = null, detectEditorFocus = null, detectEditorInit = null, $("td:first", $(".bmeLinkTable", _editBlock)).removeAttr("old-width").removeAttr("old-style").removeAttr("old-color"), $(".bmenohilite", _editBlock).removeClass("bmenohilite"), $("#dvSettingBlock").off(), $("#dvSettingBlock").empty(), DisableToolbar(0) }

    function c(a, b) { var c = new Array,
            e = "",
            f = "",
            g = "",
            h = "",
            i = "";
        $(".bmeLinkTable", _editBlock).each(function () { e = $("td:first", this).html(), f = $(this).attr("linkid"), "" == e ? e = '<a href="#" style="text-decoration:none;"><span style="font-family:Arial; font-size: 14px;color:#64656c;">' + JS_LINK + "</span></a>" : d($("td:first", this)), g = $("td", this).css("border-right-style"), h = GetBorderDetail($("td", this), "right-width"), i = $("td", this).css("border-right-color"), "undefined" == typeof g && (g = ""), "undefined" == typeof h && (h = ""), "undefined" == typeof i && (i = ""), "none" == g && (g = ""), "0" != h && "0px" != h || (h = ""), "" != i && "transparent" != i || (i = ""), c[c.length] = { linkid: f, linkSRC: e, linkBorderStyle: g, linkBorderColor: i, linkBorderWidth: h } }), b.links = c }

    function d(a) { var b = "",
            c = "",
            d = "",
            e = "";
        b = $("a", a), c = $("span", b), 0 == c.length && (d = $(b).html(), e = $(b).attr("style"), $(b).attr("style", "text-decoration:none;"), e = Replace(e, "text-decoration:none;", ""), $(b).html('<span style="' + e + '">' + d + "</span>")) }

    function e(a) { if ($(a).parent().hasClass("blk_wrapper")) this.id = GetBlockID(a);
        else { this.id = SetWidgetBlockID(); var b = this.id,
                c = getNewBlockWrapper(b, "blk_navbar", $(a).clone().wrap("<div />").parent().html());
            $(a).replaceWith(c) } var e = $("." + rootBlockClass, "#" + this.id);
        this.width = $(e).attr("width"), this.backgroundColor = $(e).css("background-color"), this.paddingH = $("td:first", $(".bmeContainerRow", e)).css("padding-right"), this.paddingV = $("td:first", $(".bmeContainerRow", e)).css("padding-top"), this.paddingH = parseWidth(this.paddingH), this.paddingV = parseWidth(this.paddingV), this.gutter = $("td:first", $(".bmeLinkTable", e)).attr("gutter"), "undefined" != typeof this.gutter && "" != this.gutter || (this.gutter = $("td:first", $(".bmeLinkTable", e)).css("padding-right")), "undefined" != typeof this.gutter && "" != this.gutter || (this.gutter = "10"), this.gutter = parseWidth(this.gutter), this.linkVAlign = $("td:first", $(".bmeLinkTable", e)).attr("valign"), "undefined" != typeof this.linkVAlign && "" != this.linkVAlign || (this.linkVAlign = "center"), this.linkAlign = "left"; var f = $("td:first", $("table:first", $(".bmeContainerRow", e))).attr("width"); "30%" == f ? this.linkStyle = 2 : "70%" == f ? this.linkStyle = 1 : (this.linkStyle = 0, this.linkAlign = $(".bmeLinkContainer", e).first().attr("align")), this.mobileStyle = "0", $(".bmeLinkTable:first", $(e)).hasClass("tdPart") && ($("td:first", $(".bmeLinkTable:first", $(e))).hasClass("bmeMblCenter") ? this.mobileStyle = "2" : this.mobileStyle = "1"); var g = new Array,
            h = "",
            i = "",
            j = "",
            k = "",
            l = ""; return $(".bmeLinkTable", $(e)).each(function () { h = $("td:first", this).html(), i = $(this).attr("linkid"), "" == h ? h = '<a href="#" style="text-decoration:none;"><span style="font-family:Arial; font-size: 14px;color:#64656c;">' + JS_LINK + "</span></a>" : d($("td:first", this)), k = $("td", this).css("border-right-style"), j = GetBorderDetail($("td", this), "right-width"), l = $("td", this).css("border-right-color"), "undefined" == typeof k && (k = ""), "undefined" == typeof j && (j = ""), "undefined" == typeof l && (l = ""), "none" == k && (k = ""), "0" != j && "0px" != j || (j = ""), "" != l && "transparent" != l || (l = ""), g[g.length] = { linkid: i, linkSRC: h, linkBorderStyle: k, linkBorderColor: l, linkBorderWidth: j } }), this.links = g, this }

    function f() { if ($("input[name='chkApplyAllItem']", "#itemSetting").prop("checked")) { if (!blkObjectData.clicked) { var a = parseWidth($("#ctrlBorder", "#itemSetting").val()),
                    b = $("#ctrlBGBorder", "#itemSetting").next().next("input").val(),
                    c = $("#ctrlBorderStyle", "#itemSetting").val(),
                    d = "",
                    e = "",
                    f = "";
                $("td:first", $(".bmeLinkTable", _editBlock)).each(function () { d = parseWidth(GetBorderDetail($(this), "right-width")), f = $(this).css("border-right-style"), e = $(this).css("border-right-color"), $(this).attr("old-width", d).attr("old-style", f).attr("old-color", e), $(this).css({ "border-right-width": a + "px", "border-right-color": b, "border-right-style": c }) }); var g = $("span", $("a", _editBlockItem)).css("font-family"),
                    h = $("span", $("a", _editBlockItem)).css("font-size"),
                    i = $("span", $("a", _editBlockItem)).css("color"),
                    j = $("span", $("a", _editBlockItem)).css("text-decoration"),
                    k = $("span", $("a", _editBlockItem)).css("font-weight");
                k = "bold" == k || 700 == k ? "bold" : "normal"; var l = $("span", $("a", _editBlockItem)).css("font-style");
                $("span", $("a", _editBlock)).css({ "font-family": g, "font-size": h, color: i, "text-decoration": j, "font-weight": k, "font-style": l }), this.clicked = !0 } } else $("td:first", $(".bmeLinkTable", _editBlock)).each(function () { d = $(this).attr("old-width"), f = $(this).attr("old-style"), e = $(this).attr("old-color"), $(this).css({ "border-right-width": d + "px", "border-right-color": e, "border-right-style": f }) }), this.clicked = !1;
        null != _editBlock && q(_editBlock) }

    function g() { $("td:first", $(".bmeLinkTable", _editBlock)).each(function () { oldWidthVal = $(this).attr("old-width"), oldStyleVal = $(this).attr("old-style"), oldClrVal = $(this).attr("old-color"), $(this).css({ "border-right-width": oldWidthVal + "px", "border-right-color": oldClrVal, "border-right-style": oldStyleVal }) }) }

    function h(b) { $("#dvSettingBlock").off(), $("#dvSettingBlock").empty(); var c = "";
        $(this.imageSrc);
        clr = chkColorVal(this.backgroundColor), clrD = "", "" != clr && (clrD = hexc(clr.toLowerCase())); var d = !1;
        0 != this.linkStyle && (d = !0), $(".sidebar-editblock-name").text(JS_BLOCK_NAVBAR), c += "<div id=mainSetting class=current>", c += "<div class='panel-container'>", c += '<div class="subpanel-nav clearfix2"><span class="selected" onclick="javascript:subcontentToggle(this, \'sub1\');">' + JS_SETTINGS + '</span><span class="" onclick="javascript:subcontentToggle(this, \'sub2\');">' + JS_CONTENT + "</span></div>", c += '<div class="subcontent current sub1">', c += template_field_BackgroundColor("navbar", clrD, clr, JS_BACKGROUND, "rctrlBGColor", "ctrlBGColor"), c += template_field_Slider("padding-h-slider", JS_H_PADDING), c += template_field_Slider("padding-v-slider", JS_V_PADDING), c += "</div>", c += '<div class="subcontent sub2">', c += template_field_addGroup("navbar", JS_ADD_LINK, "ancAddLink", "ancAddLink"), c += "<fieldset><label class=label-small>" + JS_LAYOUT + "</label><ul class=nav-option-blocks>", c += '<li><a class="nav-row' + (0 == this.linkStyle ? " selected" : "") + '" name=ancLayout value=0 onclick="javascript:colorChangeHandler(\'navbar\', this);"></a></li>', c += '<li><a class="nav-row-logor' + (1 == this.linkStyle ? " selected" : "") + '" name=ancLayout value=1 onclick="javascript:colorChangeHandler(\'navbar\', this);"></a></li>', c += '<li><a class="nav-row-logol' + (2 == this.linkStyle ? " selected" : "") + '" name=ancLayout value=2 onclick="javascript:colorChangeHandler(\'navbar\', this);"></a></li>', c += "</ul></fieldset>", c += template_field_alignment("navbar", "horizontal", JS_ALIGN, "ddlAlign", this.linkAlign, "fld_ddlAlign", d), c += template_field_alignment("navbar", "vertical", JS_LINK_VERTICAL_ALIGNMENT, "selVAlign", this.linkVAlign, "fld_selVAlign"), c += template_field_Slider("gutter-slider", JS_GUTTER_WIDTH), c += '<fieldset><label class="label-small">' + JS_MOBILE_STYLING + '</label><select id="mobileStyle" class="form-control form-control-small" onchange="javascript:selectChangeHandler(\'navbar\', this);"><option value=\'\' ' + ("0" == this.mobileStyle || "" == this.mobileStyle ? " selected" : "") + ">" + JS_DEFAULT + "</option><option value='1' " + ("1" == this.mobileStyle ? " selected" : "") + ">" + JS_VERTICAL_STACK + "</option><option value='2' " + ("2" == this.mobileStyle ? " selected" : "") + ">" + JS_VERTICAL_STACK_CENTER + "</option></select></fieldset>", c += "</div>", c += "</div>", c += template_field_SaveAndClose("navbar"), c += "</div>", c += "<div id=mainSettingVeil onclick=\"javascript:colorChangeHandler('navbar', this);\"></div>", c += "<div id=itemSetting>", c += "<div class='panel-container'>", c += '<fieldset><label class="label-small">' + JS_LINK_TYPE + "</label><select id='lnkType' class='form-control form-control-small' onchange=\"javascript:selectChangeHandler('navbar', this);\"><option value=\"text\">" + JS_TEXT + '</option><option value="image">' + JS_IMAGE + "</option></select></fieldset>", c += '<fieldset id=fldImageDetail><label class="label-small"><span id=lblImageName></span><a class=reset-link id=rEdit onclick="javascript:colorChangeHandler(\'navbar\', this);"><small>' + JS_EDIT + "</small></a> <a class=reset-link id=rReplace onclick=\"javascript:colorChangeHandler('navbar', this);\"><small>" + JS_REPLACE + "</small></a> <a class=reset-link id=rLink onclick=\"javascript:colorChangeHandler('navbar', this);\"><small>" + JS_LINK + "</small></a></label></fieldset>", c += template_field_TextInput("navbar", JS_ALT_TEXT, "txtAltText", "txtAltText", "", "", "fldImageAltDetail"), c += template_field_TextInput("navbar", JS_LINK_TEXT, "txtLinkText", "txtLinkText", "", "", "fldLinkText"), c += template_field_TextInput("navbar", JS_LINK_URL, "txtLinkURL", "txtLinkURL", "", JS_LINK_PLACEHOLDER), c += template_field_BorderStyles("navbar", "", "", "", "", JS_BORDER_RIGHT), c += template_field_chkApplyAllItem("navbar", JS_APPLY_STYLE_TO_OTHER_LINKS), c += template_field_removeGroup("navbar", JS_REMOVE_LINK, "ancRemoveLink", "ancRemoveLink"), c += "</div>", c += template_field_SaveAndBack("navbar"), c += "</div>", $("#dvSettingBlock").append(c); var e = this.gutter;
        e = parseWidth(e), $("#gutter-slider", "#dvSettingBlock").slider({ value: e, min: 0, max: 20, step: 5, slide: function (a, c) { $(".new-slider-val", $("#gutter-slider", "#dvSettingBlock")).text(c.value); var d = c.value;
                $("td", $(".bmeLinkTable", b)).css({ "padding-right": d + "px", "padding-left": d + "px" }), $("td", $(".bmeLinkTable", b)).attr("gutter", d), blkObjectData.gutter = c.value, $("td", $(".bmeLinkTable", b)).first().css("padding-left", "0px") }, start: function (a, b) { $(".new-slider-val", $("#gutter-slider", "#dvSettingBlock")).show() }, stop: function (a, b) { $(".new-slider-val", $("#gutter-slider", "#dvSettingBlock")).delay(400).fadeOut(200) } }).find(".ui-slider-handle").append($("<div />").css("display", "none").addClass("new-slider-val")), $(".new-slider-val", $("#gutter-slider", "#dvSettingBlock")).text(e), e = this.paddingH, e = parseWidth(e), $("#padding-h-slider", "#dvSettingBlock").slider({ value: e, min: 0, max: 20, step: 5, slide: function (a, b) { $(".new-slider-val", $("#padding-h-slider", "#dvSettingBlock")).text(b.value); var c = b.value;
                $("td:first", $(".bmeContainerRow", _editBlock)).css({ "padding-right": c + "px", "padding-left": c + "px" }), blkObjectData.paddingH = b.value }, start: function (a, b) { $(".new-slider-val", $("#padding-h-slider", "#dvSettingBlock")).show() }, stop: function (a, b) { $(".new-slider-val", $("#padding-h-slider", "#dvSettingBlock")).delay(400).fadeOut(200) } }).find(".ui-slider-handle").append($("<div />").css("display", "none").addClass("new-slider-val")), $(".new-slider-val", $("#padding-h-slider", "#dvSettingBlock")).text(e), e = this.paddingV, e = parseWidth(e), $("#padding-v-slider", "#dvSettingBlock").slider({ value: e, min: 0, max: 20, step: 5, slide: function (a, b) { $(".new-slider-val", $("#padding-v-slider", "#dvSettingBlock")).text(b.value); var c = b.value;
                blkObjectData.paddingV = b.value, $("td:first", $(".bmeContainerRow", _editBlock)).css({ "padding-top": c + "px", "padding-bottom": c + "px" }) }, start: function (a, b) { $(".new-slider-val", $("#padding-v-slider", "#dvSettingBlock")).show() }, stop: function (a, b) { $(".new-slider-val", $("#padding-v-slider", "#dvSettingBlock")).delay(400).fadeOut(200) } }).find(".ui-slider-handle").append($("<div />").css("display", "none").addClass("new-slider-val")), $(".new-slider-val", $("#padding-v-slider", "#dvSettingBlock")).text(e), LoadToolBar(-1), n(), $(_editBlock).html($(a(this)).html()), m(), q(_editBlock), $("img", _editBlock).css("display", "inline-block"), EditModeOn = !0 }

    function i(a) { var b = currentVariable.prop("tagName").toLowerCase(); "span" == b ? $(currentVariable).parent().attr("href", a) : $(currentVariable).attr("href", a), $("input[name='txtLinkURL']", "#itemSetting").val(a), IsLink(!0, 0) }

    function j(a) { $(currentVariable).attr("href", ""), $("input[name='txtLinkURL']", "#itemSetting").val(""), IsLink(!1, 0) }

    function k(a) { var b = $(a);
        n(); var c = "",
            d = parseWidth($(b).attr("width"));
        0 == d && (d = $(b).width()), $(editTarget1).html(a), $("img", editTarget1).attr("alt", $("input[name='txtAltText']", "#itemSetting").val()), $("#lblImageName", $("#itemSetting")).html("<img src='" + $(b).attr("src") + "' isvideo=0 border=0 style='max-width:100px;max-height:100px;display:block;' />"), c = $("img", _editBlockItem).attr("alt"), "undefined" == typeof c && (c = ""), $("input[name='txtLinkText']", "#itemSetting").val(c), $("#rLink, #rEdit").removeClass("hidden"), $("#fldLinkText").addClass("hidden"), $("#fldImageDetail, #fldImageAltDetail").removeClass("hidden"), panelToggle("second"), m(), currentImageCtrl = null }

    function l(a) { var b = a,
            c = "",
            d = "",
            e = "",
            f = ""; "undefined" == typeof b.linkVAlign && (b.linkVAlign = ""), f = '<table align="left" border="0" cellpadding="0" cellspacing="0" width="100%"><tr>', 0 == b.linkStyle ? (c = '<td width="99%" ', d = '<td width="1%" ') : 1 == b.linkStyle ? (c = '<td width="70%" ', d = '<td width="30%" ') : 2 == b.linkStyle && (c = '<td width="30%" ', d = '<td width="70%" '), "" != b.linkVAlign && (c += 'valign="' + b.linkVAlign + '" ', d += 'valign="' + b.linkVAlign + '" '), "" == b.linkAlign && (b.linkAlign = "left"), "2" == b.mobileStyle ? (c += "align=" + b.linkAlign + ' class="tdPart mblStackCenter">', d += "align=" + b.linkAlign + ' class="tdPart mblStackCenter">') : (c += "align=" + b.linkAlign + ' class="tdPart">', d += "align=" + b.linkAlign + ' class="tdPart">'), c += '<table cellpadding="0" cellspacing="0" border="0" ', c += ' align="' + b.linkAlign + '"', "2" == b.mobileStyle ? (c += ' class="tdPart tblPart bmeLinkContainer"><tr><td valign="top">', d += '<table cellpadding="0" cellspacing="0" border="0" align="right" class="tdPart tblPart bmeLinkContainer"><tr><td valign="top">') : (c += ' class="bmeLinkContainer"><tr><td valign="top">', d += '<table cellpadding="0" cellspacing="0" border="0" align="right" class="bmeLinkContainer"><tr><td valign="top">'); for (var g = 0, h = b.links.length; g < h; g++) e = '<!--[if gte mso 6]></td><td align="left" valign="top"><![endif]-->', e += '<table cellspacing="0" cellpadding="0" border="0" style="float:left;" align="left" ', e += 'linkid="' + b.links[g].linkid + '" ', e += "1" == b.mobileStyle || "2" == b.mobileStyle ? 'class="bmeLinkTable tdPart" ' : 'class="bmeLinkTable" ', e += ' onclick="javascript:return clickItem(event, \'navbar\', this);"><tbody><tr><td align="left" gutter="' + b.gutter + '" style="font-family:Arial; font-size: 14px; color:#64656c; text-decoration:none;', b.gutter > 0 && (e += g > 0 ? "padding-left: " + b.gutter + "px;" : "padding-left: 0px;", e += "padding-right: " + b.gutter + "px;"), "" != b.links[g].linkBorderStyle && "" != b.links[g].linkBorderWidth && "" != b.links[g].linkBorderColor && ("" != b.links[g].linkBorderStyle && (e += "border-right-style:" + b.links[g].linkBorderStyle + ";"), b.links[g].linkBorderWidth = parseWidth(b.links[g].linkBorderWidth), "" != b.links[g].linkBorderWidth && (e += "border-right-width:" + b.links[g].linkBorderWidth + "px;"), "" != b.links[g].linkBorderColor && (e += "border-right-color:" + b.links[g].linkBorderColor + ";")), e += '"', "2" == b.mobileStyle && (e += ' class="bmeMblCenter"'), "" != b.linkVAlign && (e += ' valign="' + b.linkVAlign + '"'), "" == b.links[g].linkSRC && (b.links[g].linkSRC = '<a href="#" style="text-decoration:none;"><span style="font-family:Arial; font-size: 14px; color:#64656c;">' + JS_LINK + "</span></a>"), e += ">" + b.links[g].linkSRC, e += "</td></tr></tbody></table>", 0 == b.linkStyle ? c += e : 1 == b.linkStyle ? g == h - 1 ? d += e : c += e : 2 == b.linkStyle && (0 == g ? c += e : d += e); return f += c + "</td></tr></table></td>" + d + "</td></tr></table></td></tr></table>" }

    function m() { $("img", _editBlock).on("click", p), $(".nav-logo", _editBlock).on("click", p), _StartDDImage() }

    function n() { $(".nav-logo", _editBlock).off("click", p), $("img", _editBlock).off("click", p) }

    function o(a) {
        _editBlockItem = $(a), oldBlockContent = $(_editBlockItem).html(), $(".bmeLinkTable", _editBlock).addClass("bmenohilite");
        for (var b = _editBlockItem, c = 0, d = 0, e = 0; 0 == c;) $(b).hasClass("bmeLinkTable") ? (c = 1, d = 1) : (b = $(b).parent(), e++), e > 10 && (c = 1);
        1 == d && $(b, _editBlock).removeClass("bmenohilite");
        var f = "",
            g = null,
            h = "",
            i = "",
            j = "",
            k = "",
            l = "";
        if ($("a", _editBlockItem).length > 0 && (g = $("a", _editBlockItem), f = $(g).attr("href"), editTarget1 = $("span", g)), "" != f && "#" != f || (f = ""), currentVariable = $("a", _editBlockItem), l = $("a", _editBlockItem).attr("href"), "" != l && "#" != l || (l = ""), $("input[name='txtLinkURL']", "#itemSetting").val(f), $("input[name='chkApplyAllItem']", "#itemSetting").removeAttr("checked"), 0 == $("img", _editBlockItem).length && 0 == $("div", _editBlockItem).length ? ($("#lnkType", "#itemSetting").val("text"), $("#fldImageDetail, #fldImageAltDetail").addClass("hidden"), $("#fldLinkText").removeClass("hidden"), panelToggle("second"), null != g && $("input[name='txtLinkText']", "#itemSetting").val($("span", g).html()), j = $("span", $("a", _editBlockItem)).css("font-family"), k = $("span", $("a", _editBlockItem)).css("font-size"), SetFontFamily(j), SetFontSize(k), f = $("span", $("a", _editBlockItem)).css("font-weight"),
                "bold" == f || 700 == f ? IsBold(!0, 0) : IsBold(!1, 0), f = $("span", $("a", _editBlockItem)).css("font-style"), "italic" == f ? IsItalic(!0, 0) : IsItalic(!1, 0), f = $("span", $("a", _editBlockItem)).css("text-decoration"), f.indexOf("underline") != -1 ? IsUnderline(!0, 0) : IsUnderline(!1, 0), h = chkColorVal($("span", $("a", _editBlockItem)).css("color")), "transparent" == h && (color = ""), $("#toolbarColor").spectrum("set", h), LoadToolBar("navbar")) : ($("#fldImageDetail, #fldImageAltDetail").removeClass("hidden"), $("#fldLinkText").addClass("hidden"), panelToggle("second", "hide"), $("#lnkType", "#itemSetting").val("image"), f = "", 0 == $("div", _editBlockItem).length && (i = $("img", _editBlockItem).attr("src")), "undefined" == i || "" == i ? ($("#fldImageDetail, #fldImageAltDetail").addClass("hidden"), panelToggle("second", "hide")) : ($("#lblImageName", $("#itemSetting")).html("<img src='" + i + "' border=0 style='max-width:100px;max-height:100px;display:block;' />"), f = $("img", _editBlockItem).attr("alt"), "undefined" == typeof f && (f = "")), $("input[name='txtAltText']", "#itemSetting").val(f), $(".format-font-style, .format-textcolor, .format-size").removeClass("tool-disabled").addClass("tool-disabled"), LoadToolBar(-1), "" == i && OpenImageDialog("1")), "#" != l && "" != l ? IsLink(!0, 0) : IsLink(!1, 0), f = parseWidth(GetBorderDetail($("td", _editBlockItem), "right-width").replace("px", "")), $("#ctrlBorder", "#itemSetting").val(f), h = chkColorVal($("td", _editBlockItem).css("border-right-color")), "transparent" != h && 0 != f || (h = ""), "" == h ? ($("#ctrlBGBorder", "#itemSetting").css({ "background-color": "transparent" }), $("#ctrlBGBorder", "#itemSetting").next().next("input").val(""), $("#ctrlBGBorder", "#itemSetting").next().next("input").change()) : ($("#ctrlBGBorder", "#itemSetting").css({ "background-color": h }), $("#ctrlBGBorder", "#itemSetting").next().next("input").val(hexc(h.toLowerCase())), $("#ctrlBGBorder", "#itemSetting").next().next("input").change()), "" == h || 0 == f) $("#ctrlBorderStyle", "#itemSetting").val("none"), $("#btnBorderStyle").children("span").replaceWith("<span name='selected-border-icon' class='border-style-icons border-style-icons-none'></span>");
        else { var m = $("td", _editBlockItem).css("border-right-style");
            $("#ctrlBorderStyle", "#itemSetting").val(m), $("#btnBorderStyle").children("span").replaceWith("<span name='selected-border-icon' class='border-style-icons border-style-icons-" + m + "'></span>") } panelToggle("second")
    }

    function p(a) { a.preventDefault(), a.stopPropagation(); var b = ""; for (currentImageCtrl = blkObjectData, null != editTarget1 && $("img", editTarget1).each(function () { $(this).attr("alt", $("input[name='txtAltText']").attr("value")) }), b = $(this); !$(b).hasClass("bmeLinkTable") && !$(b).hasClass("bmeLinkTable");) b = $(b).parent();
        o(b) }

    function q(a) { var b = 0,
            c = 0;
        $(".bmeLinkContainer", a).each(function () { $("td", $(".bmeLinkTable", this)).each(function () { b = parseWidth($(this).height()), b > c && (c = b) }) }), $("td", $(".bmeLinkTable", a)).attr("height", c) }

    function r(a, b) { $(b).attr("width", a);
        $(b);
        $(this).width = a, maxW = 0, newW = 0; var c = a;
        $("img", b).each(function () { maxW = parseWidth(GetBorderDetail($(this), "max-width")), c > maxW ? newW = maxW : newW = c, $(this).attr("width", newW).attr("border", "0") }), q(b) }

    function s(a) { var b = $("." + rootBlockClass, "#" + this.id);
        r(a, b) }

    function t() { var a = $("." + rootBlockClass, "#" + this.id);
        $(a).attr("width", "100%"), $("img", a).attr("width", "2"), $("td", $(".bmeLinkTable", a)).removeAttr("height") } this.width = "100%", this.backgroundColor = "", this.paddingH = 20, this.paddingV = 10, this.gutter = 10, this.linkStyle = 0, this.linkVAlign = "center", this.linkAlign = "", this.clicked = !1, this.links = [{ linkid: "1", linkSRC: "", linkBorderStyle: "solid", linkBorderWidth: "1", linkBorderColor: "#16a7e0" }, { linkid: "2", linkSRC: "", linkBorderStyle: "solid", linkBorderWidth: "1", linkBorderColor: "#16a7e0" }, { linkid: "3", linkSRC: "", linkBorderStyle: "solid", linkBorderWidth: "1", linkBorderColor: "#16a7e0" }, { linkid: "4", linkSRC: "", linkBorderStyle: "", linkBorderWidth: "", linkBorderColor: "" }], this.load = e, this.unload = b, this.loadListItem = c, this.setWidth = s, this.setHeight = q, this.resetWidth = t, this.renderSetting = h, this.getHTML = a, this.id = "", this.mobileStyle = "", this.type = "navbar", this.addLink = i, this.removeLink = j, this.selectLinkEdit = o, this.bindLink = m, this.unbindLink = n, this.updateLinkContainer = l, this.insertImage = k, this.applyAll = f, this.unApplyAll = g
}

function Block_Permission() {
    function a(a) { var b = this,
            c = '<table width="' + b.width + '" cellspacing="0" cellpadding="0" border="0" class="' + rootBlockClass + '" name="blk_permission" style="'; return "" != b.backgroundColor && "transparent" != b.backgroundColor && (c += "background-color:" + b.backgroundColor + ";"), "" == b.align && (b.align = "left"), c += '"><tbody><tr><td name="tblCell" class="tblCell" style="', "" == b.padding ? (b.padding = "20", c += "padding:20px;") : c += "padding:" + b.padding + "px;", c += '" valign="top" align="left"><table cellpadding=0 cellspacing=0 border=0 width="100%"><tr><td name="bmePermissionText" style="text-align:' + b.align + ';" align="' + b.align + '">', c += '<span style="font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-size: 11px;line-height: 140%;">', c += JS_PERMISSION, c += "</span></td></tr>", c += "</table></td></tr></table>" }

    function b(a) { $("#dvSettingBlock").off(), $("#dvSettingBlock").empty(), DisableToolbar(0) }

    function c(a) { if ($(a).parent().hasClass("blk_wrapper")) this.id = GetBlockID(a);
        else { this.id = SetWidgetBlockID(); var b = this.id,
                c = getNewBlockWrapper(b, "blk_permission", $(a).clone().wrap("<div />").parent().html());
            $(a).replaceWith(c) } var d = $("." + rootBlockClass, "#" + this.id);
        this.width = $(d).attr("width"), this.backgroundColor = $(d).css("background-color"), this.padding = $("td[name=tblCell]", d).css("padding-left"), this.align = $("td[name=bmePermissionText]", d).attr("align"), "" == this.padding && (this.padding = "0"), "" == this.align && (this.align = "left") }

    function d(a) { $("#dvSettingBlock").off(), $("#dvSettingBlock").empty(); var b = chkColorVal(blkObjectData.backgroundColor),
            c = ""; "" != b && (c = hexc(b.toLowerCase())); var d = chkColorVal($("a", _editBlock).css("color")),
            e = ""; "" != d && (e = hexc(d.toLowerCase())); var f = "";
        $(".sidebar-editblock-name").text(JS_BLOCK_PERMISSION), f += "<div class='panel-container'>", f += template_field_BackgroundColor("permission", c, b, JS_BACKGROUND, "rctrlBGColor", "ctrlBGColor"), f += template_field_Slider("padding-slider", JS_PADDING), f += template_field_alignment("permission", "horizontal", JS_ALIGN, "ddlAlign", this.align, "fld_ddlAlign"), f += template_field_BackgroundColor("permission", e, d, JS_LINK_COLOR, "rctrlLinkColor", "ctrlLinkColor"), f += "</div>", f += template_field_SaveAndClose("permission"), $("#dvSettingBlock").append(f); var g = this.padding.replace("px", "");
        $("#padding-slider", "#dvSettingBlock").slider({ value: g, min: 0, max: 20, step: 5, slide: function (a, b) { $(".new-slider-val", $("#padding-slider", "#dvSettingBlock")).text(b.value), $("td[name=tblCell]", _editBlock).css({ padding: b.value + "px" }) }, start: function (a, b) { $(".new-slider-val", $("#padding-slider", "#dvSettingBlock")).show() }, stop: function (a, b) { $(".new-slider-val", $("#padding-slider", "#dvSettingBlock")).delay(400).fadeOut(200) } }).find(".ui-slider-handle").append($("<div />").css("display", "none").addClass("new-slider-val")), $(".new-slider-val", $("#padding-slider", "#dvSettingBlock")).text(g), editTarget1 = $("span", $("td[name=bmePermissionText]", _editBlock)), LoadToolBar("permission"), IsBold(!1, 0), IsItalic(!1, 0), tmpText = $(editTarget1).css("font-weight"), "bold" != tmpText && 700 != tmpText || IsBold(!0, 0), tmpText = $(editTarget1).css("font-style"), "italic" == tmpText && IsItalic(!0, 0) }

    function e(a) { var b = $("." + rootBlockClass, "#" + this.id);
        $(b).attr("width", a), $(this).width = a }

    function f() { var a = $("." + rootBlockClass, "#" + this.id);
        $(a).attr("width", "100%") } this.width = "100%", this.backgroundColor = "", this.padding = "", this.align = "", this.type = "permission", this.load = c, this.unload = b, this.setWidth = e, this.resetWidth = f, this.renderSetting = d, this.getHTML = a, this.id = "" }

function Block_RSSFeed() {
    function a(a) { var b = this; "" == b.paddingV && (b.paddingV = "10"), "" == b.paddingH && (b.paddingH = "20"), "" == b.align && (b.align = "left"); var c = '<table width="' + b.width + '" cellspacing="0" cellpadding="0" border="0" class="' + rootBlockClass + '" name="blk_rss_feed" style="'; return "" != b.backgroundColor && "transparent" != b.backgroundColor && (c += "background-color:" + b.backgroundColor + ";"), c += '"><tbody><tr><td name="tblCell" class="tblCell" style="', c += "padding-top:" + b.paddingV + "px;padding-bottom:" + b.paddingV + "px; padding-left:" + b.paddingH + "px; padding-right:" + b.paddingH + "px;", c += '" valign="top" align="left"><table cellpadding=0 cellspacing=0 border=0 width="100%"><tbody><tr><td name="bmeRSSFeedText" style="text-align:' + b.align + '; font-family: Arial, Helvetica, sans-serif;" align="' + b.align + '" valign=top>[RSSItem:Start]', c += '<br /><div style="font-weight: normal; font-size: 14px;line-height: 150%;font-weight: bold;" onclick="javascript:selectItem(\'rssfeed\', this);">[RSSItem:Title]</div>', c += '<div style="font-size: 12px; line-height: 150%;" onclick="javascript:selectItem(\'rssfeed\', this);">[RSSItem:Content]</div>', c += '<span style="font-size: 12px; color:#31ade0; line-height: 150%;" onclick="javascript:selectItem(\'rssfeed\', this);"><a href="[RSSItem:Link]" target=_new style="color:inherit;">' + JS_READ_MORE + "</a></span>", c += "<br /><br />[RSSItem:End]</td></tr></tbody>", c += "</table></td></tr></tbody></table>" }

    function b() { if (currentEdit = "txaEditableContent", null != _editBlock) { var a = $("td[name='bmeRSSFeedText']", _editBlock).html();
            null != a && (a = a.replace(" onclick=\"javascript:selectItem('rssfeed', this);\"", ""), $("td[name='bmeRSSFeedText']", _editBlock).html(a)), $("fieldset#fldFeedLinkTitle", "#dvSettingBlock").addClass("hidden"), $("#chkLinkTitle", "#dvSettingBlock").removeAttr("checked"), $("td[name='bmeRSSFeedText']", _editBlock).attr("custom", "1"), LoadTiny($("td[name='bmeRSSFeedText']", _editBlock)) } }

    function c() { if (null != tinymce.activeEditor) try { var a = tinyMCE.get("txaEditableContent").getContent();
            tinymce.execCommand("mceRemoveControl", !0, "txaEditableContent"), purge($("#txaEditableContent")), $("#txaEditableContent").remove(), purge($("#editTexttxaEditableContent")), $("#editTexttxaEditableContent").remove(), a.indexOf("editTexttxaEditableContent") != -1 && (a = $(a).html()), a = fixSaveTextContent(a), $("td[name='bmeRSSFeedText']", _editBlock).html(a), $("#chkLinkTitle", "#dvSettingBlock").removeAttr("checked"); var b = "";
            $("div, span", _editBlock).each(function () { b = $(this).html(), b.indexOf("[RSSItem:Title]") != -1 && $("a", this).length > 0 && $("#chkLinkTitle", "#dvSettingBlock").attr("checked", "checked") }), $("fieldset#fldFeedLinkTitle", "#dvSettingBlock").removeClass("hidden") } catch (c) {} }

    function d(a) { c(), $("#dvSettingBlock").off(), $("#dvSettingBlock").empty(), DisableToolbar(0) }

    function e(a) { if ($(a).parent().hasClass("blk_wrapper")) this.id = GetBlockID(a);
        else { this.id = SetWidgetBlockID(); var b = this.id,
                c = getNewBlockWrapper(b, "blk_rss_feed", $(a).clone().wrap("<div />").parent().html());
            $(a).replaceWith(c) } var d = $("." + rootBlockClass, "#" + this.id);
        this.width = $(d).attr("width"), this.backgroundColor = $(d).css("background-color"), this.paddingV = $("td[name=tblCell]", d).first().css("padding-top"), this.paddingH = $("td[name=tblCell]", d).first().css("padding-left"), this.paddingV.toString().indexOf("px") && (this.paddingV = this.paddingV.replace("px", "")), this.paddingH.toString().indexOf("px") && (this.paddingH = this.paddingH.replace("px", "")), "" == this.paddingV && (this.paddingV = "0"), "" == this.paddingH && (this.paddingH = "0"), this.align = $("td[name=bmeRSSFeedText]", d).attr("align"), "" == this.align && (this.align = "left"); var e = 0,
            f = 0,
            g = 0,
            h = "",
            i = ""; "undefined" == typeof $("td[name=bmeRSSFeedText]", d).attr("custom") && $("div, span", d).each(function () { h = $(this).html(), i = $(this).attr("onclick"), "undefined" == typeof i && (i = ""), h.indexOf("[RSSItem:Title]") == -1 && h.indexOf("[RSSItem:Content]") == -1 && h.indexOf("[RSSItem:Link]") == -1 && h.indexOf("[RSSItem:Date]") == -1 && h.indexOf("[RSSItem:Description]") == -1 || "" == i && $(this).attr("onclick", "javascript:selectItem('rssfeed', this);") }), $("div, span", d).each(function () { h = $(this).html(), i = $(this).attr("onclick"), "undefined" == typeof i && (i = ""), g = 0, h.indexOf("[RSSItem:Title]") != -1 ? (g = 1, e += 1, $("a", this).length > 0 && (f = 1)) : h.indexOf("[RSSItem:Description]") != -1 ? (g = 1, e += 4) : h.indexOf("[RSSItem:Content]") != -1 ? (g = 1, e += 2) : h.indexOf("[RSSItem:Author]") != -1 && (g = 1, e += 8), 1 == g && i.indexOf("javascript:selectItem('rssfeed', this);") == -1 && (e = 16) }), 1 == e ? this.displayType = "1" : e < 4 ? this.displayType = "2" : e < 8 ? this.displayType = "3" : e < 16 ? this.displayType = "4" : e >= 16 && (this.displayType = "5"), this.linkTitle = f }

    function f(a) { $("#dvSettingBlock").off(), $("#dvSettingBlock").empty(); var b = chkColorVal(blkObjectData.backgroundColor),
            c = ""; "" != b && (c = hexc(b.toLowerCase())); var d = chkColorVal($("a", _editBlock).css("color")),
            e = ""; "" != d && (e = hexc(d.toLowerCase())); var f = "";
        $(".sidebar-editblock-name").text(JS_BLOCK_RSS_FEED), f += "<div class='panel-container'>", f += '<div class="subpanel-nav clearfix2"><span class="selected" onclick="javascript:subcontentToggle(this, \'sub1\');">' + JS_SETTINGS + '</span><span class="" onclick="javascript:subcontentToggle(this, \'sub2\');">' + JS_CONTENT + "</span></div>", f += '<div class="subcontent current sub1">', f += template_field_BackgroundColor("rssfeed", c, b, JS_BACKGROUND, "rctrlBGColor", "ctrlBGColor"), f += template_field_Slider("padding-h-slider", JS_H_PADDING), f += template_field_Slider("padding-v-slider", JS_V_PADDING), f += "</div>", f += '<div class="subcontent sub2">', f += '<fieldset><label class="label-small">' + JS_RSS_FEED_CONTENT + "</label><select name='ddlDisplayType' id='ddlDisplayType' class='form-control form-control-small' onchange=\"javascript:selectChangeHandler('rssfeed', this);\"><option value=1 " + ("1" == this.displayType ? "selected" : "") + ">" + JS_RSS_FEED_TITLE_ONLY + "</option><option value=2 " + ("2" == this.displayType || "" == this.displayType ? "selected" : "") + ">" + JS_RSS_FEED_TITLE_EXCERPT + "</option><option value=3 " + ("3" == this.displayType ? "selected" : "") + ">" + JS_RSS_FEED_TITLE_PARA + "</option><option value=4 " + ("4" == this.displayType ? "selected" : "") + ">" + JS_RSS_FEED_FULL_CONTENT + "</option><option value=5 " + ("5" == this.displayType ? "selected" : "") + ">" + JS_CUSTOM + "</option></select></fieldset>", f += template_field_LineHeight("rssfeed"), f += '<fieldset id="fldFeedLinkTitle"><input class="form-checkbox" type="checkbox" onchange="javascript:colorChangeHandler(\'rssfeed\', this);" name="chkLinkTitle" id="chkLinkTitle" value="1" ' + ("1" == this.linkTitle ? "checked" : "") + ' /><label for="chkLinkTitle" class="form-option form-option-small">' + JS_RSS_FEED_LINK_TITLE + "</label></fieldset>", f += "</div>", f += "</div>", f += template_field_SaveAndClose("rssfeed"), $("#dvSettingBlock").append(f); var g = this.paddingH.replace("px", "");
        $("#padding-h-slider", "#dvSettingBlock").slider({ value: g, min: 0, max: 20, step: 5, slide: function (a, b) { $(".new-slider-val", $("#padding-h-slider", "#dvSettingBlock")).text(b.value); var c = b.value;
                $("td[name=tblCell]", _editBlock).css({ "padding-left": c + "px", "padding-right": c + "px" }) }, start: function (a, b) { $(".new-slider-val", $("#padding-h-slider", "#dvSettingBlock")).show() }, stop: function (a, b) { $(".new-slider-val", $("#padding-h-slider", "#dvSettingBlock")).delay(400).fadeOut(200) } }).find(".ui-slider-handle").append($("<div />").css("display", "none").addClass("new-slider-val")), $(".new-slider-val", $("#padding-h-slider", "#dvSettingBlock")).text(g), g = this.paddingV.replace("px", ""), $("#padding-v-slider", "#dvSettingBlock").slider({ value: g, min: 0, max: 20, step: 5, slide: function (a, b) { $(".new-slider-val", $("#padding-v-slider", "#dvSettingBlock")).text(b.value); var c = b.value;
                $("td[name=tblCell]", _editBlock).css({ "padding-top": c + "px", "padding-bottom": c + "px" }) }, start: function (a, b) { $(".new-slider-val", $("#padding-v-slider", "#dvSettingBlock")).show() }, stop: function (a, b) { $(".new-slider-val", $("#padding-v-slider", "#dvSettingBlock")).delay(400).fadeOut(200) } }).find(".ui-slider-handle").append($("<div />").css("display", "none").addClass("new-slider-val")), $(".new-slider-val", $("#padding-v-slider", "#dvSettingBlock")).text(g), "5" == this.displayType ? (blkObjectData.applyEditor(), LoadToolBar("rssfeedcustom")) : (editTarget1 = $("div, span, a", $("td[name=bmeRSSFeedText]", _editBlock)), LoadToolBar("rssfeed"), IsBold(!1, 0), IsItalic(!1, 0), IsUnderline(!1, 0), tmpText = $(editTarget1).css("font-weight"), "bold" != tmpText && 700 != tmpText || IsBold(!0, 0), tmpText = $(editTarget1).css("font-style"), "italic" == tmpText && IsItalic(!0, 0), tmpText = $(editTarget1).css("text-decoration"), tmpText.indexOf("underline") != -1 && IsUnderline(!0, 0)) }

    function g(a) { var b = $("." + rootBlockClass, "#" + this.id);
        $(b).attr("width", a), $(this).width = a }

    function h() { var a = $("." + rootBlockClass, "#" + this.id);
        $(a).attr("width", "100%") } this.width = "100%", this.backgroundColor = "", this.paddingH = "", this.paddingV = "", this.displayType = "", this.linkTitle = "", this.linkImage = "", this.align = "", this.type = "rssfeed", this.load = e, this.unload = d, this.setWidth = g, this.resetWidth = h, this.renderSetting = f, this.getHTML = a, this.applyEditor = b, this.applyText = c, this.id = "" }

function Block_RSSHead() {
    function a(a) { var b = this; "" == b.paddingV && (b.paddingV = "10"), "" == b.paddingH && (b.paddingH = "20"), "" == b.align && (b.align = "left"); var c = '<table width="' + b.width + '" cellspacing="0" cellpadding="0" border="0" class="' + rootBlockClass + '" name="blk_rss_head" style="'; return "" != b.backgroundColor && "transparent" != b.backgroundColor && (c += "background-color:" + b.backgroundColor + ";"), c += '"><tbody><tr><td name="tblCell" class="tblCell" style="', c += "padding-top:" + b.paddingV + "px;padding-bottom:" + b.paddingV + "px; padding-left:" + b.paddingH + "px; padding-right:" + b.paddingH + "px;", c += '" valign="top" align="left"><table cellpadding=0 cellspacing=0 border=0 width="100%"><tbody><tr><td name="bmeRSSHeaderText" style="text-align:' + b.align + '; font-family: Arial, Helvetica, sans-serif;" align="' + b.align + '" valign=top>', c += '<div style="font-weight: bold; font-size: 30px;line-height: 150%;" onclick="javascript:selectItem(\'rsshead\', this);">[RSS:Title]</div>', c += '<div style="font-weight: normal; font-size: 16px;line-height: 150%;" onclick="javascript:selectItem(\'rsshead\', this);">[RSS:Description]</div>', c += "</td></tr></tbody>", c += "</table></td></tr></tbody></table>" }

    function b() { if (currentEdit = "txaEditableContent", null != _editBlock) { var a = $("td[name='bmeRSSHeaderText']", _editBlock).html();
            null != a && (a = a.replace(" onclick=\"javascript:selectItem('rsshead', this);\"", ""), $("td[name='bmeRSSHeaderText']", _editBlock).html(a)), $("td[name='bmeRSSHeaderText']", _editBlock).attr("custom", "1"), LoadTiny($("td[name='bmeRSSHeaderText']", _editBlock)) } }

    function c() { if (null != tinymce.activeEditor) try { var a = tinyMCE.get("txaEditableContent").getContent();
            tinymce.execCommand("mceRemoveControl", !0, "txaEditableContent"), purge($("#txaEditableContent")), $("#txaEditableContent").remove(), purge($("#editTexttxaEditableContent")), $("#editTexttxaEditableContent").remove(), a.indexOf("editTexttxaEditableContent") != -1 && (a = $(a).html()), a = fixSaveTextContent(a), $("td[name='bmeRSSHeaderText']", _editBlock).html(a) } catch (b) {} }

    function d(a) { c(), $("#dvSettingBlock").off(), $("#dvSettingBlock").empty(), DisableToolbar(0) }

    function e(a) { if ($(a).parent().hasClass("blk_wrapper")) this.id = GetBlockID(a);
        else { this.id = SetWidgetBlockID(); var b = this.id,
                c = getNewBlockWrapper(b, "blk_rss_head", $(a).clone().wrap("<div />").parent().html());
            $(a).replaceWith(c) } var d = $("." + rootBlockClass, "#" + this.id);
        this.width = $(d).attr("width"), this.backgroundColor = $(d).css("background-color"), this.paddingV = $("td[name=tblCell]", d).first().css("padding-top"), this.paddingH = $("td[name=tblCell]", d).first().css("padding-left"), this.paddingV.toString().indexOf("px") && (this.paddingV = this.paddingV.replace("px", "")), this.paddingH.toString().indexOf("px") && (this.paddingH = this.paddingH.replace("px", "")), "" == this.paddingV && (this.paddingV = "0"), "" == this.paddingH && (this.paddingH = "0"), this.align = $("td[name=bmeRSSHeaderText]", d).attr("align"), "" == this.align && (this.align = "left"); var e = 0,
            f = "",
            g = "",
            h = 0; "undefined" == typeof $("td[name=bmeRSSHeaderText]", d).attr("custom") && $("div, span", d).each(function () { f = $(this).html(), g = $(this).attr("onclick"), "undefined" == typeof g && (g = ""), f.indexOf("[RSS:Title]") == -1 && f.indexOf("[RSS:Description]") == -1 && f.indexOf("[RSS:Date]") == -1 || "" == g && $(this).attr("onclick", "javascript:selectItem('rsshead', this);") }), $("div", d).each(function () { f = $(this).html(), g = $(this).attr("onclick"), "undefined" == typeof g && (g = ""), h = 0, f.indexOf("[RSS:Title]") != -1 ? (h = 1, e += 1) : f.indexOf("[RSS:Description]") != -1 ? (h = 1, e += 2) : f.indexOf("[RSS:Date]") != -1 ? (h = 1, e += 4) : e = 8, g.indexOf("javascript:selectItem('rsshead', this);") == -1 && (e = 8) }), 1 == e ? this.displayType = "1" : 3 == e ? this.displayType = "2" : 5 == e ? this.displayType = "3" : 7 == e ? this.displayType = "4" : this.displayType = "5" }

    function f(a) { $("#dvSettingBlock").off(), $("#dvSettingBlock").empty(); var b = chkColorVal(blkObjectData.backgroundColor),
            c = ""; "" != b && (c = hexc(b.toLowerCase())); var d = chkColorVal($("a", _editBlock).css("color")),
            e = ""; "" != d && (e = hexc(d.toLowerCase())); var f = "";
        $(".sidebar-editblock-name").text(JS_BLOCK_RSS_HEAD), f += "<div class='panel-container'>", f += '<div class="subpanel-nav clearfix2"><span class="selected" onclick="javascript:subcontentToggle(this, \'sub1\');">' + JS_SETTINGS + '</span><span class="" onclick="javascript:subcontentToggle(this, \'sub2\');">' + JS_CONTENT + "</span></div>", f += '<div class="subcontent current sub1">', f += template_field_BackgroundColor("rsshead", c, b, JS_BACKGROUND, "rctrlBGColor", "ctrlBGColor"), f += template_field_Slider("padding-h-slider", JS_H_PADDING), f += template_field_Slider("padding-v-slider", JS_V_PADDING), f += "</div>", f += '<div class="subcontent sub2">', f += '<fieldset><label class="label-small">' + JS_RSS_HEADER_CONTENT + "</label>", f += "<select name='ddlDisplayType' id='ddlDisplayType' class='form-control form-control-small' onchange=\"javascript:selectChangeHandler('rsshead', this);\">", f += "<option value=1 " + ("1" == this.displayType ? "selected" : "") + ">" + JS_RSS_HEADER_TITLE_ONLY + "</option>", f += "<option value=2 " + ("2" == this.displayType ? "selected" : "") + ">" + JS_RSS_HEADER_TITLE_DESCRIPTION + "</option>", f += "<option value=3 " + ("3" == this.displayType ? "selected" : "") + ">" + JS_RSS_HEADER_TITLE_DATE + "</option>", f += "<option value=4 " + ("4" == this.displayType ? "selected" : "") + ">" + JS_RSS_HEADER_TITLE_DESCRIPTON_DATE + "</option>", f += "<option value=5 " + ("5" == this.displayType ? "selected" : "") + ">" + JS_CUSTOM + "</option>", f += "</select>", f += "</fieldset>", f += template_field_LineHeight("rsshead"), f += "</div>", f += "</div>", f += template_field_SaveAndClose("rsshead"), $("#dvSettingBlock").append(f); var g = this.paddingH.replace("px", "");
        $("#padding-h-slider", "#dvSettingBlock").slider({ value: g, min: 0, max: 20, step: 5, slide: function (a, b) { $(".new-slider-val", $("#padding-h-slider", "#dvSettingBlock")).text(b.value); var c = b.value;
                $("td[name=tblCell]", _editBlock).css({ "padding-left": c + "px", "padding-right": c + "px" }) }, start: function (a, b) { $(".new-slider-val", $("#padding-h-slider", "#dvSettingBlock")).show() }, stop: function (a, b) { $(".new-slider-val", $("#padding-h-slider", "#dvSettingBlock")).delay(400).fadeOut(200) } }).find(".ui-slider-handle").append($("<div />").css("display", "none").addClass("new-slider-val")), $(".new-slider-val", $("#padding-h-slider", "#dvSettingBlock")).text(g), g = this.paddingV.replace("px", ""), $("#padding-v-slider", "#dvSettingBlock").slider({ value: g, min: 0, max: 20, step: 5, slide: function (a, b) { $(".new-slider-val", $("#padding-v-slider", "#dvSettingBlock")).text(b.value); var c = b.value;
                $("td[name=tblCell]", _editBlock).css({ "padding-top": c + "px", "padding-bottom": c + "px" }) }, start: function (a, b) { $(".new-slider-val", $("#padding-v-slider", "#dvSettingBlock")).show() }, stop: function (a, b) { $(".new-slider-val", $("#padding-v-slider", "#dvSettingBlock")).delay(400).fadeOut(200) } }).find(".ui-slider-handle").append($("<div />").css("display", "none").addClass("new-slider-val")), $(".new-slider-val", $("#padding-v-slider", "#dvSettingBlock")).text(g), "5" == this.displayType ? (LoadToolBar("rssheadcustom"), blkObjectData.applyEditor()) : (LoadToolBar("rsshead"), IsBold(!1, 0), IsItalic(!1, 0), IsUnderline(!1, 0), editTarget1 = $("div", $("td[name=bmeRSSHeaderText]", _editBlock)), tmpText = $(editTarget1).css("font-weight"), "bold" != tmpText && 700 != tmpText || IsBold(!0, 0), tmpText = $(editTarget1).css("font-style"), "italic" == tmpText && IsItalic(!0, 0), tmpText = $(editTarget1).css("text-decoration"), tmpText.indexOf("underline") != -1 && IsUnderline(!0, 0)) }

    function g(a) { var b = $("." + rootBlockClass, "#" + this.id);
        $(b).attr("width", a), $(this).width = a }

    function h() { var a = $("." + rootBlockClass, "#" + this.id);
        $(a).attr("width", "100%") } this.width = "100%", this.backgroundColor = "", this.paddingH = "", this.paddingV = "", this.displayType = "", this.align = "", this.type = "rsshead", this.load = e, this.unload = d, this.applyText = c, this.applyEditor = b, this.setWidth = g, this.resetWidth = h, this.renderSetting = f, this.getHTML = a, this.id = "" }

function Block_SocialFollow() {
    function a() { b(), $(".tdItemContainer", _editBlock).sortable({ items: "table.bmeFollowItem", helper: "clone", handle: ".draglistitem", start: function (a, b) { b.item.show(), $(b.placeholder).attr("align", "left") }, cursorAt: { left: 1 }, update: function (a, b) { c() } }) }

    function b() {}

    function c() { var a = blkObjectData.gutter; "1" == blkObjectData.layout ? ($(".bmeFollowItemIcon", _editBlock).css({ "padding-right": a + "px" }), $(".bmeFollowItemText", _editBlock).css({ "padding-right": a + "px", "font-family": "Arial, Helvetica, sans-serif", "font-size": "14px", "font-weight": "normal", "text-align": "left" }), $(".bmeFollowItemIcon", _editBlock).last().css({ "padding-right": "0px" }), $(".bmeFollowItemText", _editBlock).last().css({ "padding-right": "0px", "font-family": "Arial, Helvetica, sans-serif", "font-size": "14px", "font-weight": "normal", "text-align": "left" })) : "2" == blkObjectData.layout ? ("1" == blkObjectData.displayType && $(".bmeFollowItemIcon", _editBlock).css("padding-bottom", a + "px"), $(".bmeFollowItemText", _editBlock).css({ "padding-bottom": a + "px", "font-family": "Arial, Helvetica, sans-serif", "font-size": "14px", "font-weight": "normal", "text-align": "left" }), "1" == blkObjectData.displayType ? $(".bmeFollowItemIcon", _editBlock).last().css("padding-bottom", "0px") : $(".bmeFollowItemText", _editBlock).last().css({ "padding-bottom": "0px", "font-family": "Arial, Helvetica, sans-serif", "font-size": "14px", "font-weight": "normal", "text-align": "left" })) : "3" == blkObjectData.layout ? ("1" == blkObjectData.displayType && $(".bmeFollowItemIcon", _editBlock).css({ "padding-right": a + "px" }), $(".bmeFollowItemText", _editBlock).css({ "padding-right": a + "px", "font-family": "Arial, Helvetica, sans-serif", "font-size": "14px", "font-weight": "normal", "text-align": "left" }), $(".bmeFollowItemText", _editBlock).last().css({ "padding-right": "0px", "font-family": "Arial, Helvetica, sans-serif", "font-size": "14px", "font-weight": "normal", "text-align": "left" })) : "4" == blkObjectData.layout && ("1" == blkObjectData.displayType && $(".bmeFollowItemIcon", _editBlock).css("padding-bottom", a + "px"), $(".bmeFollowItemText", _editBlock).css({ "padding-bottom": a + "px", "font-family": "Arial, Helvetica, sans-serif", "font-size": "14px", "font-weight": "normal", "text-align": "left" }), $(".bmeFollowItemIcon", _editBlock).css("padding-bottom", a + "px"), "1" == blkObjectData.displayType ? $(".bmeFollowItemIcon", _editBlock).last().css("padding-bottom", "0px") : ($(".bmeFollowItemText", _editBlock).last().css({ "padding-bottom": "0px", "font-family": "Arial, Helvetica, sans-serif", "font-size": "14px", "font-weight": "normal", "text-align": "left" }), $(".bmeFollowItemIcon", _editBlock).last().css("padding-bottom", "0px"))) }

    function d(c) { if (blkObjectData.links.length > 1) { b(); var d = $(c).parentsUntil(".bmeFollowItem").parent();
            purge($(d)), $(d).remove(), f(0, blkObjectData), $(_editBlock).html($(g(blkObjectData)).html()), a() } else "undefined" == typeof JS_ALERT_DELETE_SOCIAL_ICONS && (JS_ALERT_DELETE_SOCIAL_ICONS = "You cannot delete all social icons. Try deleting the block instead."), showAlert(JS_ALERT_DELETE_SOCIAL_ICONS) }

    function e() { k(_editBlock), b(), $(_editBlock).html($(g(blkObjectData)).html()), a() }

    function f(a, b) { var c = new Array,
            d = 0,
            e = 0,
            f = 0;
        0 == a && (null != _editBlock ? ($("table.bmeFollowItem", _editBlock).each(function () { 0 == d && ($("td.bmeFollowItemIcon", this).html().length > 0 && (e = 1), $("td.bmeFollowItemText", this).length > 0 && (e = 3), f = "left" == $(this).css("float") ? $("img", $(this)).width() > 30 ? 1 : 3 : $("img", $(this)).width() > 30 ? 2 : 4, d = 1), testURL = $("a", this).first().attr("href"), testURL = checkURL(testURL), c[c.length] = { type: $(this).attr("type"), url: testURL, linktext: $("img", this).first().attr("alt"), buttonBGColor: $("a", this).first().css("background-color"), borderStyle: $("a", this).first().css("border-top-style"), borderWidth: GetBorderDetail($("a", this).first(), "width"), borderColor: $("a", this).first().css("border-top-color"), borderRadius: $("a", this).first().css("border-top-left-radius"), fontSize: $("div", this).last().css("font-size"), fontFamily: $("div", this).last().css("font-family"), fontDecoration: $("div", this).last().css("text-decoration"), fontWeight: $("div", this).last().css("font-weight"), fontStyle: $("div", this).last().css("font-style"), fontColor: $("div", this).last().css("color") } }), b.links = c, b.layout = f, b.displayType = e) : ($("table.bmeFollowItem", _editBlock).each(function () { 0 == d && ($("td.bmeFollowItemIcon", this).html().length > 0 && (e = 1), $("td.bmeFollowItemText", this).length > 0 && (e = 3), f = 3, d = 1), testURL = $("a", this).first().attr("href"), testURL = checkURL(testURL), c[c.length] = { type: $(this).attr("type"), url: testURL, linktext: $("img", this).first().attr("alt"), buttonBGColor: $("a", this).first().css("background-color"), borderStyle: $("a", this).first().css("border-top-style"), borderWidth: GetBorderDetail($("a", this).first(), "width"), borderColor: $("a", this).first().css("border-top-color"), borderRadius: $("a", this).first().css("border-top-left-radius"), fontSize: $("div", this).last().css("font-size"), fontFamily: $("div", this).last().css("font-family"), fontDecoration: $("div", this).last().css("text-decoration"), fontWeight: $("div", this).last().css("font-weight"), fontStyle: $("div", this).last().css("font-style"), fontColor: $("div", this).last().css("color") } }), b.links = c, b.layout = f, b.displayType = e)) }

    function g(a) {
        var b = this;
        null != a && (b = a);
        var c = '<table width="' + b.width + '" cellspacing="0" cellpadding="0" border="0" class="' + rootBlockClass + '" name="blk_social_follow" style="';
        "" != b.backgroundColor && "transparent" != b.backgroundColor && (c += "background-color:" + b.backgroundColor + ";"), c += '"><tbody><tr><td class="tblCellMain" ', "center" == b.align && (c += ' align="' + b.align + '" '), c += ' style="', "" == b.paddingH.toString() && (b.paddingH = 20), "" == b.paddingV.toString() && (b.paddingV = 10), "" == b.gutter.toString() && (b.gutter = 10), c += "padding-top:" + b.paddingV + "px; padding-bottom:" + b.paddingV + "px; padding-left:" + b.paddingH + "px; padding-right:" + b.paddingH + "px;", c += '"><table class="', 2 == b.mobileStyle && (c += "bmeMblFollowCenter "), c += 'tblContainer mblSocialContain" cellspacing=0 cellpadding=0 border=0 ', "" != b.align && (c += ' align="' + b.align + '" '), c += ' style="', "center" == b.align && (c += "text-align:" + b.align + ";"), "0" != b.borderWidth && "" != b.borderWidth && (c += "border-width:" + b.borderWidth + "px; ", "" == b.borderColor && (b.borderColor = "#000000;"), c += "border-color:" + b.borderColor + ";", "" == b.borderStyle && (b.borderStyle = "solid"), c += "border-style:" + b.borderStyle + ";"), c += '"><tr><td class=tdItemContainer onclick="javascript:selectItem(\'socialfollow\', this);" ', 2 == b.mobileStyle && (c += "align=center"), c += ">", 0 == b.links.length && (b.links = [{ type: "twitter", url: "http://twitter.com", linktext: "Twitter", buttonBGColor: "", borderWidth: "", borderStyle: "", borderColor: "", borderRadius: "", fontSize: "12px", fontFamily: "", fontDecoration: "", fontWeight: "", fontStyle: "", fontColor: "" }]), "0" == b.layout && ($("a[name=ancLayout]", "#mainSetting").each(function () { $(this).parent().hasClass("layout-selected") && (b.layout = $(this).attr("value")) }), "0" == b.layout && (b.layout = "3")), b.layout = "" + b.layout, b.displayType = "" + b.displayType, "0" == b.displayType && (b.displayType = $("#ctrlDisplayStyle", "#mainSetting").val());
        b.width - 2 * b.paddingH;
        c += '<table cellspacing="0" cellpadding="0" border="0" border="0" class=mblSocialContain style="table-layout: auto;"><tr><td valign="top" name="bmeSocialTD" ' + (1 == b.mobileStyle ? ' class="bmeSocialTD bmeMblStack" ' : 2 == b.mobileStyle ? ' class="bmeSocialTD bmeMblStackCenter" align="" ' : "") + ">";
        for (var d = 0, e = b.links.length; d < e; d++) "1" == b.layout ? (c += '<!--[if gte mso 6]></td><td align="left" valign="top"><![endif]-->', c += '<table cellspacing=0 cellpadding=0 border=0 class=bmeFollowItem type="' + b.links[d].type + '" style="float:left;" align="left" onmousemove="javascript:focusItem(\'socialfollow\', this);" onclick="javascript:return clickItem(event, \'socialfollow\', this);">',
            c += "<tr><td align=left class=bmeFollowItemIcon gutter=" + b.gutter + ' width=55 style="', d < b.links.length - 1 && (c += "padding-right:" + b.gutter + "px;"), c += 'height:55px;"><a href="' + b.links[d].url + '" ' + j(b.links[d]) + " target=_blank>" + h(b.links[d], b.layout) + "</a></td></tr>", "1" != b.displayType && (c += ' <tr><td align=left valign=middle class=bmeFollowItemText style="', d < b.links.length - 1 && (c += "padding-right:" + b.gutter + "px;"), c += 'font-family: Arial, Helvetica, sans-serif; font-size: 14px; font-weight: normal; text-align: left;">' + i(b.links[d]) + "</td></tr>"), c += "</table>") : "2" == b.layout ? (c += '<table cellspacing=0 cellpadding=0 border=0 class=bmeFollowItem type="' + b.links[d].type + '" onmousemove="javascript:focusItem(\'socialfollow\', this);" onclick="javascript:return clickItem(event, \'socialfollow\', this);">', c += "<tr><td align=left class=bmeFollowItemIcon gutter=" + b.gutter + ' width=55 style="', "1" != b.displayType ? c += "padding-bottom:5px;" : d < e - 1 && (c += "padding-bottom:" + b.gutter + "px;"), c += 'height:55px;"', c += '><a href="' + b.links[d].url + '" ' + j(b.links[d]) + " target=_blank>" + h(b.links[d], b.layout) + "</a></td></tr>", "1" != b.displayType && (c += '<tr><td align=left valign=middle class=bmeFollowItemText style="padding-bottom:' + b.gutter + 'px;font-family: Arial, Helvetica, sans-serif; font-size: 14px; font-weight: normal; text-align: left;"', c += ">" + i(b.links[d]) + "</td>", c += "</tr>"), c += "</table>") : "3" == b.layout ? (c += '<!--[if gte mso 6]></td><td align="left" valign="top"><![endif]-->', c += '<table cellspacing=0 cellpadding=0 border=0 class=bmeFollowItem type="' + b.links[d].type + '" style="float:left;" align="left" onmousemove="javascript:focusItem(\'socialfollow\', this);" onclick="javascript:return clickItem(event, \'socialfollow\', this);">', c += "<tr><td align=left class=bmeFollowItemIcon gutter=" + b.gutter + ' width=20 style="', "1" != b.displayType ? c += "padding-right:5px;" : d < e - 1 && (c += "padding-right:" + b.gutter + "px;"), c += 'height:20px;"', c += '><a href="' + b.links[d].url + '" ' + j(b.links[d]) + " target=_blank>" + h(b.links[d], b.layout) + "</a></td>", "1" != b.displayType && (c += ' <td align=left valign=middle class=bmeFollowItemText style="', d < b.links.length - 1 && (c += "padding-right:" + b.gutter + "px;"), c += 'font-family: Arial, Helvetica, sans-serif; font-size: 14px; font-weight: normal; text-align: left;">' + i(b.links[d]) + "</td>"), c += "</tr></table>") : "4" == b.layout && (c += '<table cellspacing=0 cellpadding=0 border=0 class=bmeFollowItem type="' + b.links[d].type + '" onmousemove="javascript:focusItem(\'socialfollow\', this);" onclick="javascript:return clickItem(event, \'socialfollow\', this);">', c += "<tr><td align=left class=bmeFollowItemIcon gutter=" + b.gutter + ' width=20 style="', d < e - 1 && (c += "padding-bottom:" + b.gutter + "px;"), "1" != b.displayType && (c += "padding-right:5px;"), c += 'height:20px;"', c += '><a href="' + b.links[d].url + '" ' + j(b.links[d]) + " target=_blank>" + h(b.links[d], b.layout) + "</a></td>", "1" != b.displayType && (c += '<td align=left valign=middle class=bmeFollowItemText style="', d < e - 1 && (c += "padding-bottom:" + b.gutter + "px;"), c += 'font-family: Arial, Helvetica, sans-serif; font-size: 14px; font-weight: normal; text-align: left;"', c += ">" + i(b.links[d]) + "</td>"), c += "</table>");
        return c += "</td></tr></table>", c += "</td></tr></table></td></tr></tbody></table>"
    }

    function h(a, b) { var c = "",
            d = "",
            e = "https://ui.benchmarkemail.com/images/editor/socialicons/"; return "facebook" == a.type ? (c += '<img src="' + e + 'fb_btn.png" ', d = "Facebook") : "twitter" == a.type ? (c += '<img src="' + e + 'tw_btn.png" ', d = "Twitter") : "email" == a.type ? (c += '<img src="' + e + 'em_btn.png" ', d = "Email") : "linkedin" == a.type ? (c += '<img src="' + e + 'li_btn.png" ', d = "LinkedIn") : "youtube" == a.type ? (c += '<img src="' + e + 'yt_btn.png" ', d = "YouTube") : "pinterest" == a.type ? (c += '<img src="' + e + 'pi_btn.png" ', d = "Pinterest") : "googleplus" == a.type ? (c += '<img src="' + e + 'gp_btn.png" ', d = "Google Plus") : "tumblr" == a.type ? (c += '<img src="' + e + 'tm_btn.png" ', d = "Tumblr") : "vimeo" == a.type ? (c += '<img src="' + e + 'vm_btn.png" ', d = "Vimeo") : "instapaper" == a.type ? (c += '<img src="' + e + 'ip_icn.png" ', d = "Instapaper") : "website" == a.type ? (c += '<img src="' + e + 'wb_btn.png" ', d = JS_WEBSITE) : "rss" == a.type ? (c += '<img src="' + e + 'rss_btn.png" ', d = "RSS") : "myspace" == a.type ? (c += '<img src="' + e + 'ms_btn.png" ', d = "Myspace") : "instagram" == a.type ? (c += '<img src="' + e + 'in_btn.png" ', d = "Instagram") : "soundcloud" == a.type ? (c += '<img src="' + e + 'sc_btn.png" ', d = "Soundcloud") : "yelp" == a.type ? (c += '<img src="' + e + 'yelp_btn.png" ', d = "Yelp") : "slideshare" == a.type ? (c += '<img src="' + e + 'ss_btn.png" ', d = "Slideshare") : "flickr" == a.type ? (c += '<img src="' + e + 'flickr_btn.png" ', d = "Flickr") : "tripadvisor" == a.type ? (c += '<img src="' + e + 'tripadvisor_btn.png" ', d = "Trip Advisor") : "blogger" == a.type ? (c += '<img src="' + e + 'blogger_btn.png" ', d = "Blogger") : "snapchat" == a.type ? (c += '<img src="' + e + 'snapchat_btn.png" ', d = "Snapchat") : "reddit" == a.type && (c += '<img src="' + e + 'reddit_btn.png" ', d = "Reddit"), "" == a.linktext && (a.linktext = d), c += ' alt="' + a.linktext + '" ', c += ' style="display:block;" ', c += "1" == b || "2" == b ? " border=0 width=57 height=57 />" : " border=0 width=24 height=24 />" }

    function i(a) { var b = ""; return "" != a.fontFamily && "undefined" != a.fontFamily && "undefined" != typeof a.fontFamily || (a.fontFamily = "Arial, Verdana"), "" != a.fontSize && "undefined" != a.fontSize || (a.fontSize = "12px"), "" != a.fontWeight && "undefined" != a.fontWeight || (a.fontWeight = "normal"), "" != a.fontStyle && "undefined" != a.fontStyle || (a.fontStyle = "normal"), "" != a.fontDecoration && "undefined" != a.fontDecoration || (a.fontDecoration = "none"), "" != a.fontColor && "undefined" != a.fontColor || (a.fontColor = "#16A7E0"), b = '<a href="' + a.url + '" target=_blank style="text-decoration:none;"><div style="font-family:' + a.fontFamily.replace(/"/g, "'") + "; font-size:" + a.fontSize + "; font-weight:" + a.fontWeight + "; font-style:" + a.fontStyle + "; text-decoration:" + a.fontDecoration + ";", "" != a.fontColor && (b += "color:" + a.fontColor + ";"), "null" == a.linktext && ("facebook" == a.type ? a.linktext = "Facebook" : "twitter" == a.type ? a.linktext = "Twitter" : "email" == a.type ? a.linktext = "Email" : "linkedin" == a.type ? a.linktext = "LinkedIn" : "youtube" == a.type ? a.linktext = "YouTube" : "pinterest" == a.type ? a.linktext = "Pinterest" : "googleplus" == a.type ? a.linktext = "Google Plus" : "tumblr" == a.type ? a.linktext = "Tumblr" : "vimeo" == a.type ? a.linktext = "Vimeo" : "instapaper" == a.type ? a.linktext = "Instapaper" : "website" == a.type ? a.linktext = JS_WEBSITE : "rss" == a.type ? a.linktext = "RSS" : "myspace" == a.type ? a.linktext = "Myspace" : "instagram" == a.type ? a.linktext = "Instagram" : "soundcloud" == a.type ? a.linktext = "Soundcloud" : "yelp" == a.type ? a.linktext = "Yelp" : "flickr" == a.type ? a.linktext = "Flickr" : "slideshare" == a.type && (a.linktext = "Slideshare")), b += '">' + a.linktext + "</div></a>" }

    function j(a) { var b = ""; return b = 'style="', b += "display: inline-block;", "" == a.buttonBGColor && ("facebook" == a.type ? a.buttonBGColor = "#355ba1" : "twitter" == a.type ? a.buttonBGColor = "#32cbff" : "linkedin" == a.type ? a.buttonBGColor = "#004763" : "youtube" == a.type ? a.buttonBGColor = "#d12016" : "pinterest" == a.type ? a.buttonBGColor = "#ca1f27" : "website" == a.type ? a.buttonBGColor = "#FFA500" : "email" == a.type ? a.buttonBGColor = "#656F8C" : "rss" == a.type ? a.buttonBGColor = "#ff6600" : "vimeo" == a.type ? a.buttonBGColor = "#048fb6" : "googleplus" == a.type ? a.buttonBGColor = "#d6492e" : "instapaper" == a.type ? a.buttonBGColor = "#527fa6" : "instagram" == a.type ? a.buttonBGColor = "#e4405f" : "tumblr" == a.type ? a.buttonBGColor = "#2a445f" : "myspace" == a.type ? a.buttonBGColor = "#333333" : "soundcloud" == a.type ? a.buttonBGColor = "#ff5500" : "yelp" == a.type ? a.buttonBGColor = "#c41200" : "slideshare" == a.type ? a.buttonBGColor = "#0077b5" : "flickr" == a.type ? a.buttonBGColor = "#0061e2" : "tripadvisor" == a.type ? a.buttonBGColor = "#589442" : "blogger" == a.type ? a.buttonBGColor = "#f58220" : "snapchat" == a.type ? a.buttonBGColor = "#fffc00" : "reddit" == a.type && (a.buttonBGColor = "#ff4500")), "" != a.buttonBGColor && "transparent" != a.buttonBGColor && (b += "background-color: " + a.buttonBGColor + ";"), "" == a.borderRadius && (a.borderRadius = "0"), b += "border-radius: " + a.borderRadius.replace("px", "") + "px;", "" == a.borderWidth && (a.borderWidth = "0", a.borderStyle = "transparent", "facebook" == a.type ? a.borderColor = "#243d6b" : "flickr" == a.type ? a.borderColor = "transparent" : "twitter" == a.type ? a.borderColor = "#2694b9" : "linkedin" == a.type ? a.borderColor = "#002a3a" : "youtube" != a.type && "pinterest" != a.type && "website" != a.type && "email" != a.type && "rss" != a.type && "vimeo" != a.type && "googleplus" != a.type && "instapaper" != a.type && "instagram" != a.type && "soundcloud" != a.type && "yelp" != a.type && "youtube" != a.type && "tumblr" != a.type && "slideshare" != a.type && "myspace" != a.type && "tripadvisor" != a.type || (a.borderColor = "#000000")), "" != a.borderWidth && 0 != a.borderWidth && ("" == a.borderStyle && (a.borderStyle = "solid"), "" == a.borderColor && (a.borderColor = "black"), b += "border-style: " + a.borderStyle.replace("px", "") + "; border-width: " + a.borderWidth.replace("px", "") + "px; border-color: " + a.borderColor + ";"), b += '" ' }

    function k(c) { if ($(c).parent().hasClass("blk_wrapper")) this.id = GetBlockID(c);
        else { this.id = SetWidgetBlockID(); var d = this.id,
                e = getNewBlockWrapper(d, "blk_social_follow", $(c).clone().wrap("<div />").parent().html());
            $(c).replaceWith(e) } var g = $("." + rootBlockClass, "#" + this.id);
        this.width = $(g).attr("width"), this.backgroundColor = $(g).css("background-color"), this.align = $("table.tblContainer", g).attr("align"), this.borderWidth = parseWidth($("table.tblContainer", g).css("border-width")), this.borderStyle = $("table.tblContainer", g).css("border-top-style"), this.borderColor = $("table.tblContainer", g).css("border-top-color"), $(".bmeFollowItemText", g).first().is(":visible") ? this.displayType = 2 : this.displayType = 1, "0px" == $("td.tblCellMain", g).css("padding-top") && "10px" == $("td.tblCellMain", g).css("padding-bottom") ? (this.paddingH = 20, this.paddingV = 10, this.gutter = 5) : (this.paddingH = $("td.tblCellMain", g).css("padding-left"), "" == this.paddingH ? this.paddingH = 0 : this.paddingH = parseWidth(this.paddingH), this.paddingV = $("td.tblCellMain", g).css("padding-top"), "" == this.paddingV ? this.paddingV = 0 : this.paddingV = parseWidth(this.paddingV), this.gutter = $("td.bmeFollowItemIcon:first", g).attr("gutter"), "undefined" == typeof this.gutter && (this.gutter = 5), "" == this.gutter.toString() ? this.gutter = 5 : this.gutter = parseWidth(this.gutter)), this.mobileStyle = 0, $("td[name='bmeSocialTD']", g).hasClass("bmeMblStack") ? this.mobileStyle = 1 : $("td[name='bmeSocialTD']", g).hasClass("bmeMblStackCenter") && (this.mobileStyle = 2), f(0, this), 1 == this.layout || 2 == this.layout ? $("td.bmeFollowItemIcon", g).attr("width", "57") : $("td.bmeFollowItemIcon", g).attr("width", "24"), $("table.bmeFollowItem", g).each(function () { "left" == $(this).css("float") ? $(this).css("display", "block") : $(this).css("display", "") }), b(), a() }

    function l(a) { b(), blkObjectEditor = null, $(".bmeFollowItemIcon", _editBlock).each(function () { $(this).removeAttr("old-radius") }), $(".bmenohilite", _editBlock).removeClass("bmenohilite"), purge($(".content-block-nav")), $(".editor-slider", "#itemSetting").slider("destroy"), $(".editor-slider", "#itemSetting").remove(), $("#padding-h-slider", "#dvSettingBlock").slider("destroy"), $("#padding-h-slider", "#dvSettingBlock").remove(), $("#padding-v-slider", "#dvSettingBlock").slider("destroy"), $("#padding-v-slider", "#dvSettingBlock").remove(), $("#gutter-slider", "#dvSettingBlock").slider("destroy"), $("#gutter-slider", "#dvSettingBlock").remove(), $("#mainSetting", "#dvSettingBlock").remove(), $("#itemSetting", "#dvSettingBlock").remove(), $(".content-block-nav").remove(), $("#dvSettingBlock").off(), $("#dvSettingBlock").empty(), DisableToolbar(0) }

    function m(d) { $("#dvSettingBlock").off(), $("#dvSettingBlock").empty(); var e = chkColorVal(this.backgroundColor),
            f = ""; "" != e && (f = hexc(e.toLowerCase())); var h = chkColorVal(this.borderColor),
            i = "",
            j = ""; "" != h && (i = hexc(h.toLowerCase())), $(".sidebar-editblock-name").text(JS_BLOCK_SOCIAL_FOLLOW), j = "<div id=mainSetting class=current>", j += "<div class='panel-container'>", j += '<div class="subpanel-nav clearfix2"><span class="selected" onclick="javascript:subcontentToggle(this, \'sub1\');">' + JS_SETTINGS + '</span><span class="" onclick="javascript:subcontentToggle(this, \'sub2\');">' + JS_CONTENT + "</span></div>", j += '<div class="subcontent current sub1">', j += template_field_BackgroundColor("socialfollow", f, e, JS_BACKGROUND, "rctrlBGColorMain", "ctrlBGColorMain"), j += template_field_Slider("padding-h-slider", JS_H_PADDING), j += template_field_Slider("padding-v-slider", JS_V_PADDING), j += "</div>", j += '<div class="subcontent sub2">', j += "<fieldset><label class=label-small>" + JS_ADD_SERVICE + "</label><div class=\"sidebar-select-item sidebar-select-item-add\"><select name='ctrlService' id='ctrlService' class='form-control form-control-small' onchange=\"javascript:selectChangeHandler('socialfollow', this);\"><option value=''>" + JS_SELECT + "</option><option value=facebook>Facebook</option><option value=twitter>Twitter</option><option value=linkedin>Linkedin</option><option value=youtube>YouTube</option><option value=pinterest>Pinterest</option><option value=website>" + JS_WEBSITE + "</option><option value=email>Subscribe to Email</option><option value=rss>RSS</option><option value=vimeo>Vimeo</option><option value=instagram>Instagram</option><option value=soundcloud>Soundcloud</option><option value=tumblr>Tumblr</option><option value=myspace>MySpace</option><option value=slideshare>Slideshare</option><option value=flickr>Flickr</option><option value=yelp>Yelp</option><option value=tripadvisor>Trip Advisor</option><option value=blogger>Blogger</option><option value=snapchat>Snapchat</option><option value=reddit>Reddit</option></select></div><a class='sm-btn standard-btn add-service disabled left' id=ancAddService onclick=\"javascript:colorChangeHandler('socialfollow', this);\" ></a></fieldset>", j += "<fieldset><label class=label-small>" + JS_DISPLAY + "</label><select name='ctrlDisplayStyle' id='ctrlDisplayStyle' onchange=\"javascript:selectChangeHandler('socialfollow', this);\" class='form-control form-control-small'><option value=3 " + ("3" == this.displayType || "" == this.displayType ? "selected" : "") + ">" + JS_ICON_TEXT + "</option><option value=1 " + ("1" == this.displayType ? "selected" : "") + ">" + JS_ICON_ONLY + "</option></select></fieldset>", j += "<fieldset><label class=label-small>" + JS_LAYOUT + '</label><ul class="layout-option-blocks social-share">', j += "<li id=ancLayoutRow " + (1 == this.layout || 3 == this.layout ? " class=layout-selected" : "") + '><a class=icons-row-small name=ancLayout data-value="row" onclick="javascript:colorChangeHandler(\'socialfollow\', this);"></a></li>', j += "<li id=ancLayoutStack " + (2 == this.layout || 4 == this.layout ? " class=layout-selected" : "") + '><a class=icons-stack-small name=ancLayout data-value="stack" onclick="javascript:colorChangeHandler(\'socialfollow\', this);"></a></li>', j += "</ul></fieldset>", j += '<fieldset id="ancLayout_fld"><label class="label-small">' + JS_ICON_SIZE + "</label>", j += '<select id=ancLayoutSize class="form-control form-control-small" onchange="javascript:colorChangeHandler(\'socialfollow\', this);">', j += "<option value='small' " + (3 == this.layout || 4 == this.layout ? " selected" : "") + ">" + JS_ICON_SMALL + "</option>", j += "<option value='large' " + (1 == this.layout || 2 == this.layout ? " selected" : "") + ">" + JS_ICON_LARGE + "</option>", j += "</select>", j += "</fieldset>", j += template_field_alignment("socialfollow", "horizontal", JS_ALIGN, "ddlAlign", this.align, "fldAlign"), j += template_field_Slider("gutter-slider", JS_GUTTER_WIDTH), j += '<fieldset><label class="label-small">' + JS_MOBILE_STYLING + '</label><select id="mobileStyle" class="form-control form-control-small" onchange="javascript:selectChangeHandler(\'socialfollow\', this);"><option value=\'\' ' + ("0" == this.mobileStyle || "" == this.mobileStyle ? " selected" : "") + ">" + JS_DEFAULT + "</option><option value='1' " + ("1" == this.mobileStyle ? " selected" : "") + ">" + JS_VERTICAL_STACK + "</option><option value='2' " + ("2" == this.mobileStyle ? " selected" : "") + ">" + JS_VERTICAL_STACK_CENTER + "</option></select></fieldset>", j += "</div>", j += "</div>", j += template_field_SaveAndClose("socialfollow"), j += "</div>", j += "<div id=mainSettingVeil onclick=\"javascript:colorChangeHandler('socialfollow', this);\"></div>", j += "<div id=itemSetting>", j += "<div class='panel-container'>", j += template_field_TextInput("socialfollow", JS_LINK_TEXT, "fldLinkText", "txtLinkText", "", ""), j += template_field_TextInput("socialfollow", JS_LINK_URL, "fldLinkURL", "txtLinkURL", "", JS_LINK_PLACEHOLDER), j += template_field_BackgroundColor("socialfollow", "", e, JS_ICON_COLOR, "rctrlBGColor", "ctrlBGColor"), j += template_field_BorderStyles("socialfollow", "", "", "", "", JS_BORDER), j += template_field_Slider("border-radius-slider", JS_BORDER_RADIUS), j += template_field_chkApplyAllItem("socialfollow", JS_APPLY_RADIUS_TO_ALL_BLOCK), j += "</div>", j += template_field_SaveAndBack("socialfollow"), j += "</div>", $("#dvSettingBlock").append(j), $(".editor-slider", "#itemSetting").slider({ min: 0, max: 28, step: 2, value: this.borderWidth, slide: function (a, b) { $(".new-slider-val", $(".editor-slider", "#itemSetting")).text(b.value); var c = b.value;
                $("input[name='chkApplyAllItem']", "#itemSetting").prop("checked") ? $(".bmeFollowItemIcon", _editBlock).each(function () { $("a", this).first().css({ "border-radius": c + "px" }) }) : $("a", _editBlockItem).first().css({ "border-radius": c + "px" }) }, start: function (a, b) { $(".new-slider-val", $(".editor-slider", "#itemSetting")).show() }, stop: function (a, b) { $(".new-slider-val", $(".editor-slider", "#itemSetting")).delay(400).fadeOut(200) } }).find(".ui-slider-handle").append($("<div />").css("display", "none").addClass("new-slider-val")), $(".new-slider-val", $(".editor-slider", "#itemSetting")).text(this.borderWidth); var k = parseWidth(this.paddingH);
        $("#padding-h-slider", "#dvSettingBlock").slider({ value: k, min: 0, max: 20, step: 5, slide: function (a, b) { $(".new-slider-val", $("#padding-h-slider", "#dvSettingBlock")).text(b.value); var c = b.value;
                blkObjectData.paddingH = c, $("td.tblCellMain", _editBlock).css({ "padding-left": c + "px", "padding-right": c + "px" }) }, start: function (a, b) { $(".new-slider-val", $("#padding-h-slider", "#dvSettingBlock")).show() }, stop: function (a, b) { $(".new-slider-val", $("#padding-h-slider", "#dvSettingBlock")).delay(400).fadeOut(200) } }).find(".ui-slider-handle").append($("<div />").css("display", "none").addClass("new-slider-val")), $(".new-slider-val", $("#padding-h-slider", "#dvSettingBlock")).text(k), k = parseWidth(this.paddingV), $("#padding-v-slider", "#dvSettingBlock").slider({ value: k, min: 0, max: 20, step: 5, slide: function (a, b) { $(".new-slider-val", $("#padding-v-slider", "#dvSettingBlock")).text(b.value); var c = b.value;
                blkObjectData.paddingV = c, $("td.tblCellMain", _editBlock).css({ "padding-top": c + "px", "padding-bottom": c + "px" }) }, start: function (a, b) { $(".new-slider-val", $("#padding-v-slider", "#dvSettingBlock")).show() }, stop: function (a, b) { $(".new-slider-val", $("#padding-v-slider", "#dvSettingBlock")).delay(400).fadeOut(200) } }).find(".ui-slider-handle").append($("<div />").css("display", "none").addClass("new-slider-val")), $(".new-slider-val", $("#padding-v-slider", "#dvSettingBlock")).text(k), k = parseWidth(this.gutter), $("#gutter-slider", "#dvSettingBlock").slider({ value: k, min: 0, max: 20, step: 5, slide: function (a, b) { $(".new-slider-val", $("#gutter-slider", "#dvSettingBlock")).text(b.value); var d = b.value;
                blkObjectData.gutter = d, $(".bmeFollowItemIcon", _editBlock).attr("gutter", d), c() }, start: function (a, b) { $(".new-slider-val", $("#gutter-slider", "#dvSettingBlock")).show() }, stop: function (a, b) { $(".new-slider-val", $("#gutter-slider", "#dvSettingBlock")).delay(400).fadeOut(200) } }).find(".ui-slider-handle").append($("<div />").css("display", "none").addClass("new-slider-val")), $(".new-slider-val", $("#gutter-slider", "#dvSettingBlock")).text(k), LoadToolBar(this.type), $(".tool-link").addClass("tool-disabled"), editTarget = $("div", _editBlock), editTarget1 = $("div", _editBlock), EditModeOn = !0, 1 == this.displayType ? $("#dvEditTool").addClass("hidden") : $("#dvEditTool").removeClass("hidden"), b(), $(_editBlock).html($(g(this)).html()), a() }

    function n(a) { var b = $("." + rootBlockClass, "#" + this.id);
        $(b).attr("width", a), $(this).width = a }

    function o() { var a = $("." + rootBlockClass, "#" + this.id);
        $(a).attr("width", "100%") } this.width = "100%", this.displayType = 1, this.align = "left", this.type = "socialfollow", this.layout = 3, this.iconStyle = 1, this.backgroundColor = "", this.clicked = !1, this.links = [{ type: "facebook", url: "http://www.facebook.com", linktext: "Facebook", buttonBGColor: "", borderWidth: "", borderStyle: "", borderColor: "", borderRadius: "", fontSize: "12px", fontFamily: "", fontDecoration: "", fontWeight: "", fontStyle: "", fontColor: "#16a7e0" }, { type: "twitter", url: "http://twitter.com", linktext: "Twitter", buttonBGColor: "", borderWidth: "", borderStyle: "", borderColor: "", borderRadius: "", fontSize: "12px", fontFamily: "", fontDecoration: "", fontWeight: "", fontStyle: "", fontColor: "#16a7e0" }], this.load = k, this.unload = l, this.setWidth = n, this.resetWidth = o, this.renderSetting = m, this.getHTML = g, this.updateItem = e, this.deleteListItem = d, this.loadListItem = f, this.id = "", this.paddingH = 20, this.paddingV = 10, this.gutter = 10, this.mobileStyle = 0, this.bindSort = a, this.unbindSort = b
}

function Block_SocialShare() {
    function a() {}

    function b() { $(".tdItemContainer", _editBlock).sortable({ items: "table.bmeShareItem", helper: "clone", handle: ".draglistitem", start: function (a, b) { b.item.show(), $(b.placeholder).attr("align", "left") }, cursorAt: { left: 1 }, update: function (a, b) { c() } }) }

    function c() { var a = blkObjectData.gutter;
        $("td:last", $("tr:first", $(".bmeShareItem", _editBlock))).attr("gutter", a), "1" == $("a", $("li.layout-selected", "#dvSettingBlock")).attr("value") ? ($("td:last", $("tr:first", $(".bmeShareItem", _editBlock))).attr("width", a), $("td:last", $("tr:first", $(".bmeShareItem", _editBlock))).last().attr("width", "0px")) : $("td:last", $("tr.trMargin", $(".bmeShareItem", _editBlock))).css("padding-bottom", a + "px") }

    function d(c) { if (blkObjectData.links.length > 1) { var d = $(c).parentsUntil(".bmeShareItem").parent();
            purge($(d)), $(d).remove(), f(0, blkObjectData), a(), $(_editBlock).html($(g(blkObjectData)).html()), b() } else showAlert("You cannot delete all social icons. Try deleting the block instead.") }

    function e() { k(_editBlock), a(), $(_editBlock).html($(g(blkObjectData)).html()), b() }

    function f(a, b) { var c = new Array,
            d = 0,
            e = 0,
            f = "";
        0 == a && (null != _editBlock ? ($("table.bmeShareItem", _editBlock).each(function () { 0 == d && (e = "left" == $(this).css("float") ? 1 : 2, d = 1), f = $("a", this).first().attr("href"), f = checkURL(f), c[c.length] = { type: $(this).attr("type"), url: f, linktext: $("span, div", this).html(), buttonBGColor: $("table.bmeShareItemBtn", this).first().css("background-color"), borderRadius: $("table.bmeShareItemBtn", this).first().css("border-top-left-radius"), fontSize: $("span, div", this).last().css("font-size"), fontFamily: $("span, div", this).last().css("font-family"), fontDecoration: $("span, div", this).last().css("text-decoration"), fontWeight: $("span, div", this).last().css("font-weight"), fontStyle: $("span, div", this).last().css("font-style"), fontColor: $("span, div", this).last().css("color") } }), b.links = c, b.layout = e) : ($("table.bmeShareItem", _editBlock).each(function () { 0 == d && (e = "left" == $(this).css("float") ? 1 : 2, d = 1), f = $("a", this).first().attr("href"), f = checkURL(f), c[c.length] = { type: $(this).attr("type"), url: f, linktext: $("span, div", this).html(), buttonBGColor: $("table.bmeShareItemBtn", this).first().css("background-color"), borderRadius: $("table.bmeShareItemBtn", this).first().css("border-top-left-radius"), fontSize: $("span, div", this).last().css("font-size"), fontFamily: $("span, div", this).last().css("font-family"), fontDecoration: $("span, div", this).last().css("text-decoration"), fontWeight: $("span, div", this).last().css("font-weight"), fontStyle: $("span, div", this).last().css("font-style"), fontColor: $("span, div", this).last().css("color") } }), b.links = c, b.layout = e)) }

    function g(a) { var b = this;
        null != a && (b = a); var c = '<table width="' + b.width + '" cellspacing="0" cellpadding="0" border="0" class="' + rootBlockClass + '" name="blk_social_share" style="'; "" != b.backgroundColor && "transparent" != b.backgroundColor && (c += "background-color:" + b.backgroundColor + ";"), c += '"><tbody><tr><td class="tblCellMain" style="', "" == b.paddingH.toString() && (b.paddingH = 20), "" == b.paddingV.toString() && (b.paddingV = 10), "" == b.gutter.toString() && (b.gutter = 10), vGutter = 0, c += "padding-top:" + b.paddingV + "px; padding-bottom:" + b.paddingV + "px; padding-left:" + b.paddingH + "px; padding-right:" + b.paddingH + "px;", c += '"><table class="', 2 == b.mobileStyle && (c += "bmeMblShareCenter "), c += 'tblContainer mblSocialContain" cellspacing=0 cellpadding=0 border=0', "" == b.align || "left" == b.align ? c += ' align="left" style="text-align:left;"' : "center" == b.align ? c += ' align="center" style="text-align:center; margin:0 auto;"' : "right" == b.align && (c += ' align="right" style="text-align:right;"'), c += "><tr><td class=tdItemContainer", 2 == b.mobileStyle && (c += ' align="center"'), c += " onclick=\"javascript:selectItem('socialshare', this);\">", 0 == b.links.length && (b.links = [{ type: "twitter", url: "[ShareTwitterURL]", linktext: "Tweet", buttonBGColor: "", borderRadius: "", fontSize: "12px", fontFamily: "", fontDecoration: "", fontWeight: "", fontStyle: "", fontColor: "#FFFFFF" }]), "" == b.layout && (b.layout = "1"), b.layout = "" + b.layout; var d = "";
        d = "1" == b.layout ? ' style="float:left;table-layout:auto;" align="left" ' : ' style="table-layout:auto;" ';
        parseWidth(b.width);
        c += '<table cellspacing="0" cellpadding="0" border="0"><tbody>', "1" == b.layout && (c += '<tr><td name="bmeShareTD" ' + (1 == b.mobileStyle ? 'class="bmeShareTD bmeMblStack"' : 2 == b.mobileStyle ? 'class="bmeShareTD bmeMblStackCenter"' : "") + "  valign=top>"); for (var e = 0, f = b.links.length; e < f; e++) "1" != b.layout && (c += "<tr>", c += '<td name="bmeShareTD" ' + (1 == b.mobileStyle ? 'class="bmeShareTD bmeMblStack"' : 2 == b.mobileStyle ? 'class="bmeShareTD bmeMblStackCenter"' : "") + " valign=top>"), c += '<table cellspacing=0 cellpadding=0 border=0 class=bmeShareItem type="' + b.links[e].type + '" ' + d + "><tr><td align=center><table cellspacing=0 cellpadding=0 class=bmeShareItemBtn border=0 " + j(b.links[e]) + '  onmousemove="javascript:focusItem(\'socialshare\', this);"  onclick="javascript:return clickItem(event, \'socialshare\', this);" ><tr><td style="padding: 5px 15px;">', c += '<table cellspacing=0 cellpadding=0 border=0 style="table-layout:auto;"><tr><td align=left width=20>', c += '<a href="' + b.links[e].url + '" target=_blank>' + h(b.links[e], b.layout) + '</a></td><td width=10><img src="https://www.benchmarkemail.com/images/blank.gif" border=0 height=5 width=10 /></td><td class=bmeShareItemText style="font-family: Arial, Helvetica, sans-serif; font-size: 12px; color: #ffffff;">', c += i(b.links[e]) + "</td></tr></table>", c += "</td></tr></table></td>", c += "1" == b.layout ? e < f - 1 ? "<td gutter=" + b.gutter + " width=" + b.gutter + " class=tdMblHide></td></tr><tr class=trMargin><td colspan=2>" : "<td gutter=" + b.gutter + " class=tdMblHide></td></tr><tr class=trMargin><td colspan=2>" : "<td gutter=" + b.gutter + ' class=tdMblHide></td></tr><tr class=trMargin><td colspan=2 style="padding-bottom:' + b.gutter + 'px;">', c += "</td></tr></table>", "1" == b.layout && (c += '<!--[if gte mso 6]></td><td align="left" valign="top"><![endif]-->'), "1" != b.layout && (c += "</td>", c += "</tr>"); return "1" == b.layout && (c += "</td>", c += "</tr>"), c += "</tbody></table>", c += "</td></tr></table></td></tr></tbody></table>" }

    function h(a, b) { var c = ""; return "facebook" == a.type ? c += '<img src="https://ui.benchmarkemail.com/images/editor/socialicons/fb_icn_new.png" width="16" height="16" alt="Facebook"' : "twitter" == a.type ? c += '<img src="https://ui.benchmarkemail.com/images/editor/socialicons/tw_icn2.png" width="16" height="16" alt="Twitter"' : "email" == a.type ? c += '<img src="https://ui.benchmarkemail.com/images/editor/socialicons/em_icn.png" width="16" height="12" alt="email"' : "linkedin" == a.type ? c += '<img src="https://ui.benchmarkemail.com/images/editor/socialicons/li_icn_new.png" width="16" height="16" alt="LinkedIn"' : "googleplus" == a.type ? c += '<img src="https://ui.benchmarkemail.com/images/editor/socialicons/gp_icn2.png" width="16" height="16" alt="Google Plus"' : "instapaper" == a.type ? c += '<img src="https://ui.benchmarkemail.com/images/editor/socialicons/ip_icn_new.png" width="16" height="16" alt="Instapaper"' : "myspace" == a.type && (c += '<img src="https://ui.benchmarkemail.com/images/editor/socialicons/ms_icn_new.png" width="16" height="16" alt="MySpace"'), c += ' border="0" style="display:block;" />' }

    function i(a) { var b = ""; return "" == a.fontFamily && (a.fontFamily = "Arial, Verdana"), "" == a.fontSize && (a.fontSize = "12px"), "" == a.fontWeight && (a.fontWeight = "normal"), "" == a.fontStyle && (a.fontStyle = "normal"), "" == a.fontDecoration && (a.fontDecoration = "none"), "" == a.fontColor && (a.fontColor = "#FFFFFF"), b = '<a href="' + a.url + '" style="text-decoration:none;" target=_blank><span style="font-family:' + a.fontFamily.replace(/"/g, "'") + "; font-size:" + a.fontSize + "; font-weight:" + a.fontWeight + "; font-style:" + a.fontStyle + "; text-decoration:" + a.fontDecoration + "; color:" + a.fontColor + '">' + a.linktext + "</span></a>" }

    function j(a) { var b = ""; return b = 'style="', b += "display: inline-block;", "" == a.buttonBGColor && ("facebook" == a.type ? (a.buttonBGColor = "#355ba1", a.fontColor = "#FFFFFF") : "twitter" == a.type ? (a.buttonBGColor = "#32cbff", a.fontColor = "#FFFFFF") : "linkedin" == a.type ? (a.buttonBGColor = "#004763", a.fontColor = "#FFFFFF") : "youtube" == a.type ? (a.buttonBGColor = "#d12016", a.fontColor = "#FFFFFF") : "pinterest" == a.type ? (a.buttonBGColor = "#ca1f27", a.fontColor = "#FFFFFF") : "website" == a.type ? (a.buttonBGColor = "#FFA500", a.fontColor = "#FFFFFF") : "email" == a.type ? (a.buttonBGColor = "#656F8C", a.fontColor = "#FFFFFF") : "rss" == a.type ? (a.buttonBGColor = "#ff6600", a.fontColor = "#FFFFFF") : "vimeo" == a.type ? (a.buttonBGColor = "#048fb6", a.fontColor = "#FFFFFF") : "googleplus" == a.type ? (a.buttonBGColor = "#d6492e", a.fontColor = "#FFFFFF") : "instapaper" == a.type ? (a.buttonBGColor = "#527fa6", a.fontColor = "#FFFFFF") : "tumblr" == a.type ? (a.buttonBGColor = "#2a445f", a.fontColor = "#FFFFFF") : "myspace" == a.type && (a.buttonBGColor = "#333333", a.fontColor = "#FFFFFF")), "" != a.buttonBGColor && "transparent" != a.buttonBGColor && (b += "background-color: " + a.buttonBGColor + ";"), "" != a.fontColor && "transparent" != a.fontColor && (b += "color: " + a.fontColor + ";"), "" == a.borderRadius && (a.borderRadius = "10"), b += "border-radius: " + a.borderRadius.replace("px", "") + "px;", b += '" ' }

    function k(c) { if ($(c).parent().hasClass("blk_wrapper")) this.id = GetBlockID(c);
        else { this.id = SetWidgetBlockID(); var d = this.id,
                e = getNewBlockWrapper(d, "blk_social_share", $(c).clone().wrap("<div />").parent().html());
            $(c).replaceWith(e) } var g = $("." + rootBlockClass, "#" + this.id);
        this.width = $(g).attr("width"), this.backgroundColor = $(g).css("background-color"), this.borderStyle = $("table.tblContainer", g).css("border-style"), this.align = $("table.tblContainer", g).attr("align"), this.paddingH = $("td.tblCellMain", g).css("padding-left"), "" == this.paddingH ? this.paddingH = 0 : this.paddingH = parseWidth(this.paddingH), this.paddingV = $("td.tblCellMain", g).css("padding-top"), "" == this.paddingV ? this.paddingV = 0 : this.paddingV = parseWidth(this.paddingV), this.gutter = $("td:last", $("tr:first", $(".bmeShareItem", g))).attr("gutter"), "undefined" == typeof this.gutter && (this.gutter = 10), "" == this.gutter.toString() ? this.gutter = 10 : this.gutter = parseWidth(this.gutter), this.mobileStyle = 0, null == $("td[name='bmeShareTD']", g).html() ? (this.paddingH = 20, this.paddingV = 10, this.gutter = 10) : $("td[name='bmeShareTD']", g).hasClass("bmeMblStack") ? this.mobileStyle = 1 : $("td[name='bmeShareTD']", g).hasClass("bmeMblStackCenter") && (this.mobileStyle = 2), $("table.bmeShareItem", g).each(function () { "left" == $(this).css("float") ? $(this).css("display", "block") : $(this).css("display", "") }), f(0, this), $("td[width='100%']", $(".bmeShareItem", g)).attr("width", "10"), a(), b() }

    function l(b) { a(), $(".bmeShareItem", _editBlock).each(function () { $(".bmeShareItemBtn", this).removeAttr("old-radius") }), $(".bmenohilite", _editBlock).removeClass("bmenohilite"), purge($(".content-block-nav")), $(".content-block-nav").remove(), $("#gutter-slider", "#dvSettingBlock").slider("destroy"), $("#gutter-slider", "#dvSettingBlock").remove(), $("#padding-h-slider", "#dvSettingBlock").slider("destroy"), $("#padding-h-slider", "#dvSettingBlock").remove(), $("#padding-v-slider", "#dvSettingBlock").slider("destroy"), $("#padding-v-slider", "#dvSettingBlock").remove(), $(".editor-slider", "#itemSetting").slider("destroy"), $(".editor-slider", "#itemSetting").remove(), $("#itemSetting", "#dvSettingBlock").remove(), $("#mainSetting", "#dvSettingBlock").remove(), $("#dvSettingBlock").off(), $("#dvSettingBlock").empty(), DisableToolbar(0) }

    function m(d) {
        $("#dvSettingBlock").off(), $("#dvSettingBlock").empty(), $(".sidebar-editblock-name").text(JS_BLOCK_SOCIAL_SHARE);
        var e = chkColorVal(this.backgroundColor),
            f = "";
        "" != e && (f = hexc(e.toLowerCase()));
        var h = chkColorVal(this.borderColor),
            i = "";
        "" != h && (i = hexc(h.toLowerCase()));
        var j = "";
        j = "<div id=mainSetting class=current>", j += "<div class='panel-container'>", j += '<div class="subpanel-nav clearfix2"><span class="selected" onclick="javascript:subcontentToggle(this, \'sub1\');">' + JS_SETTINGS + '</span><span class="" onclick="javascript:subcontentToggle(this, \'sub2\');">' + JS_CONTENT + "</span></div>", j += '<div class="subcontent current sub1">', j += template_field_BackgroundColor("socialshare", f, e, JS_BACKGROUND, "rctrlBGColorMain", "ctrlBGColorMain"), j += template_field_Slider("padding-h-slider", JS_H_PADDING), j += template_field_Slider("padding-v-slider", JS_V_PADDING), j += "</div>", j += '<div class="subcontent sub2">', j += "<fieldset><label class=label-small>" + JS_ADD_SERVICE + "</label><div class=\"sidebar-select-item sidebar-select-item-add\"><select name=ctrlService id=ctrlService class='form-control form-control-small' onchange=\"javascript:selectChangeHandler('socialshare', this);\"><option value=''>" + JS_SELECT + "</option><option value=facebook>Facebook</option><option value=twitter>Twitter</option><option value=linkedin>Linkedin</option><option value=myspace>Myspace</option><option value=instapaper>Instapaper</option></select></div><a class='sm-btn standard-btn add-service disabled left' id=ancAddService onclick=\"javascript:colorChangeHandler('socialshare', this);\"></a></fieldset>", j += "<fieldset><label class=label-small>" + JS_LAYOUT + '</label><ul class="layout-option-blocks social-share">', j += "<li " + (1 == this.layout ? " class=layout-selected" : "") + "><a class=icons-row-small name=ancLayout value=1 onclick=\"javascript:colorChangeHandler('socialshare', this);\"></a></li>", j += "<li " + (2 == this.layout ? " class=layout-selected" : "") + "><a class=icons-stack-small name=ancLayout value=2 onclick=\"javascript:colorChangeHandler('socialshare', this);\"></a></li>", j += "</ul></fieldset>", j += template_field_alignment("socialfollow", "horizontal", JS_ALIGN, "ddlAlign", this.align, "fldAlign"), j += template_field_Slider("gutter-slider", JS_GUTTER_WIDTH), j += '<fieldset><label class="label-small">' + JS_MOBILE_STYLING + '</label><select id="mobileStyle" class="form-control form-control-small" onchange="javascript:selectChangeHandler(\'socialshare\', this);"><option value=\'\' ' + ("0" == this.mobileStyle || "" == this.mobileStyle ? " selected" : "") + ">" + JS_DEFAULT + "</option><option value='1' " + ("1" == this.mobileStyle ? " selected" : "") + ">" + JS_VERTICAL_STACK + "</option><option value='2' " + ("2" == this.mobileStyle ? " selected" : "") + ">" + JS_VERTICAL_STACK_CENTER + "</option></select></fieldset>", j += "</div>", j += "</div>", j += template_field_SaveAndClose("socialshare"), j += "</div>", j += "<div id=mainSettingVeil onclick=\"javascript:colorChangeHandler('socialfollow', this);\"></div>", j += "<div id=itemSetting>", j += "<div class='panel-container'>", j += template_field_TextInput("socialshare", JS_BUTTON_TEXT, "fldButtonText", "txtButtonText", "", ""), j += template_field_BackgroundColor("socialshare", "", "", JS_BUTTON_COLOR, "rctrlBGColor", "ctrlBGColor"), j += template_field_Slider("border-slider", JS_BORDER_RADIUS), j += template_field_chkApplyAllItem("socialshare", JS_APPLY_RADIUS_TO_ALL_BLOCK), j += "</div>", j += template_field_SaveAndBack("socialshare"), j += "</div>", $("#dvSettingBlock").append(j);
        var k = parseWidth(this.paddingH);
        $("#padding-h-slider", "#dvSettingBlock").slider({ value: k, min: 0, max: 20, step: 5, slide: function (a, b) { $(".new-slider-val", $("#padding-h-slider", "#dvSettingBlock")).text(b.value); var c = b.value;
                blkObjectData.paddingH = c, $("td.tblCellMain", _editBlock).css({ "padding-left": c + "px", "padding-right": c + "px" }) }, start: function (a, b) { $(".new-slider-val", $("#padding-h-slider", "#dvSettingBlock")).show() }, stop: function (a, b) { $(".new-slider-val", $("#padding-h-slider", "#dvSettingBlock")).delay(400).fadeOut(200) } }).find(".ui-slider-handle").append($("<div />").css("display", "none").addClass("new-slider-val")), $(".new-slider-val", $("#padding-h-slider", "#dvSettingBlock")).text(k), k = parseWidth(this.paddingV), $("#padding-v-slider", "#dvSettingBlock").slider({ value: k, min: 0, max: 20, step: 5, slide: function (a, b) { $(".new-slider-val", $("#padding-v-slider", "#dvSettingBlock")).text(b.value); var c = b.value;
                blkObjectData.paddingV = c, $("td.tblCellMain", _editBlock).css({ "padding-top": c + "px", "padding-bottom": c + "px" }) }, start: function (a, b) { $(".new-slider-val", $("#padding-v-slider", "#dvSettingBlock")).show() }, stop: function (a, b) { $(".new-slider-val", $("#padding-v-slider", "#dvSettingBlock")).delay(400).fadeOut(200) } }).find(".ui-slider-handle").append($("<div />").css("display", "none").addClass("new-slider-val")), $(".new-slider-val", $("#padding-v-slider", "#dvSettingBlock")).text(k), k = parseWidth(this.gutter), $("#gutter-slider", "#dvSettingBlock").slider({ value: k, min: 0, max: 20, step: 5, slide: function (a, b) { $(".new-slider-val", $("#gutter-slider", "#dvSettingBlock")).text(b.value); var d = b.value;
                blkObjectData.gutter = d, c() }, start: function (a, b) { $(".new-slider-val", $("#gutter-slider", "#dvSettingBlock")).show() }, stop: function (a, b) { $(".new-slider-val", $("#gutter-slider", "#dvSettingBlock")).delay(400).fadeOut(200) } }).find(".ui-slider-handle").append($("<div />").css("display", "none").addClass("new-slider-val")), $(".new-slider-val", $("#gutter-slider", "#dvSettingBlock")).text(k), $(".editor-slider", "#itemSetting").slider({ min: 0, max: 12, step: 2, value: this.borderRadius, slide: function (a, b) { $(".new-slider-val", $(".editor-slider", "#itemSetting")).text(b.value); var c = b.value;
                $("input[name='chkApplyAllItem']", "#itemSetting").prop("checked") ? $(".bmeShareItem", _editBlock).each(function () { $(".bmeShareItemBtn", this).css({ "border-radius": c + "px" }) }) : $(_editBlockItem).css({ "border-radius": c + "px" }) }, start: function (a, b) { $(".new-slider-val", $(".editor-slider", "#itemSetting")).show() }, stop: function (a, b) { $(".new-slider-val", $(".editor-slider", "#itemSetting")).delay(400).fadeOut(200) } }).find(".ui-slider-handle").append($("<div />").css("display", "none").addClass("new-slider-val")), $(".new-slider-val", $(".editor-slider", "#itemSetting")).text(this.borderRadius), SetFontFamily(JS_FONT), SetFontSize(JS_SIZE), LoadToolBar(this.type), $(".tool-link").addClass("tool-disabled"), editTarget = $("span, div", _editBlock), editTarget1 = $("span, div", _editBlock), EditModeOn = !0, a(), $(_editBlock).html($(g(this)).html()), b()
    }

    function n(a) { var b = $("." + rootBlockClass, "#" + this.id);
        $(b).attr("width", a), $(this).width = a }

    function o() { var a = $("." + rootBlockClass, "#" + this.id);
        $(a).attr("width", "100%") } this.width = "100%", this.align = "left", this.layout = 1, this.backgroundColor = "", this.type = "socialshare", this.links = [{ type: "twitter", url: "[ShareTwitterURL]", linktext: "Share", buttonBGColor: "", borderRadius: "4px", fontSize: "12px", fontFamily: "", fontDecoration: "", fontWeight: "", fontStyle: "", fontColor: "" }, { type: "facebook", url: "[ShareFacebookURL]", linktext: "Share", buttonBGColor: "", borderRadius: "4px", fontSize: "12px", fontFamily: "", fontDecoration: "", fontWeight: "", fontStyle: "", fontColor: "" }], this.load = k, this.unload = l, this.setWidth = n, this.resetWidth = o, this.renderSetting = m, this.getHTML = g, this.paddingH = 20, this.paddingV = 10, this.gutter = 10, this.mobileStyle = 0, this.updateItem = e, this.deleteListItem = d, this.loadListItem = f, this.id = "", this.bindSort = b, this.unbindSort = a
}

function Block_Text() {
    function a() { var a = this; "" == a.backgroundColor && (a.backgroundColor = "transparent"); var b = '<table width="' + a.width + '" cellspacing="0" cellpadding="0" border="0" class="' + rootBlockClass + '" name="blk_text"><tbody><tr><td><table cellpadding=0 cellspacing=0 border=0 width="100%" class=bmeContainerRow><tbody><tr><td class=tdPart valign=top align=center><table cellspacing=0 cellpadding=0 border=0 width="' + this.width + '" name="tblText" class="tblText" style="float:left; background-color:' + a.backgroundColor + ';" align="left"><tbody><tr><td valign="top" align="left" name="tblCell" class="tblCell" style="padding-top: ' + this.paddingV + "px; padding-bottom:" + this.paddingV + "px; padding-left:" + this.paddingH + "px; padding-right:" + this.paddingH + 'px; font-family: Arial,Helvetica,sans-serif; font-size: 14px; font-weight: normal; color: #383838; text-align: left;"><div style="line-height: 150%;">' + JS_DEFAULT_TEXT_CONTENT + "</div></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table>"; return a = null, b }

    function b() { try { var a = tinyMCE.get("txaEditableContent").getContent();
            tinymce.execCommand("mceRemoveControl", !0, "txaEditableContent"), purge($("#txaEditableContent")), $("#txaEditableContent").remove(), purge($("#editTexttxaEditableContent")), $("#editTexttxaEditableContent").remove(), a.indexOf("editTexttxaEditableContent") != -1 && (a = $(a).html()), a = fixSaveTextContent(a), $("td[name='tblCell']:first", _editBlock).html(a) } catch (b) {} $("td[name='tblCell']", _editBlock).length > 1 && (a = tinyMCE.get("txbEditableContent").getContent(), tinymce.execCommand("mceRemoveControl", !0, "txbEditableContent"), purge($("#txbEditableContent")), $("#txbEditableContent").remove(), purge($("#editTexttxbEditableContent")), $("#editTexttxbEditableContent").remove(), a.indexOf("editTexttxbEditableContent") != -1 && (a = $(a).html()), a = fixSaveTextContent(a), $("td[name='tblCell']:last", _editBlock).html(a)) }

    function c() { currentEdit = "txaEditableContent", LoadTiny($("td[name='tblCell']:first", _editBlock)), $("td[name='tblCell']", _editBlock).length > 1 && (currentEdit = "txbEditableContent", LoadTiny($("td[name='tblCell']:last", _editBlock), "txbEditableContent")) }

    function d(a) { if ($(a).parent().hasClass("blk_wrapper")) this.id = GetBlockID(a);
        else { this.id = SetWidgetBlockID(); var b = this.id,
                c = getNewBlockWrapper(b, "blk_text", $(a).clone().wrap("<div />").parent().html());
            $(a).replaceWith(c) } var d = $("." + rootBlockClass, "#" + this.id);
        this.width = $(d).attr("width"), this.paddingV = $("td[name=tblCell]", d).first().css("padding-top"), this.paddingH = $("td[name=tblCell]", d).first().css("padding-left"), "undefined" == typeof this.paddingV ? this.paddingV = 0 : this.paddingV = parseWidth(this.paddingV), "undefined" == typeof this.paddingH ? this.paddingH = 0 : this.paddingH = parseWidth(this.paddingH); var e = $("td[name=tblCell]:first", d).css("font-size"),
            f = $("td[name=tblCell]:first", d).css("font-weight"),
            g = $("td[name=tblCell]:last", d).css("font-size"); try { parseWidth(e) > 40 && (e = "14px;"), "undefined" == typeof g && (g = "14px;") } catch (h) {} if (1 == $("table[name=tblText]", d).length) $("td[name=tblCell]", d).css({ "font-family": "Arial,Helvetica,sans-serif", "font-size": e, "font-weight": f, color: "#383838", "text-align": "left", "padding-top": this.paddingV + "px", "padding-bottom": this.paddingV + "px", "padding-left": this.paddingH + "px", "padding-right": this.paddingH + "px" }), this.columns = 1, this.gutter = 0, this.division = 100;
        else if (2 == $("table[name=tblText]", d).length) { $("td[name=tblCell]:first", d).css({ "font-family": "Arial,Helvetica,sans-serif", "font-size": e, "font-weight": f, color: "#383838", "text-align": "left", "padding-top": this.paddingV + "px", "padding-bottom": this.paddingV + "px", "padding-left": this.paddingH + "px", "padding-right": this.paddingH + "px" }), $("td[name=tblCell]:last", d).css({ "font-family": "Arial,Helvetica,sans-serif", "font-size": g, "font-weight": f, color: "#383838", "text-align": "left", "padding-top": this.paddingV + "px", "padding-bottom": this.paddingV + "px", "padding-left": this.paddingH + "px", "padding-right": this.paddingH + "px" }), this.columns = 2, this.gutter = $("table[name=tblGtr]", d).attr("width"); var i = parseWidth($("table[name=tblText]:first", d).attr("width")),
                j = parseWidth($("table[name=tblText]:last", d).attr("width"));
            checkEqual(i, j, 5) ? this.division = 50 : i > j ? this.division = 70 : j > i && (this.division = 30) } 2 == this.columns && ($("td[name=tblCell]", d).hasClass("bmeMblCenter") && (this.mobileStyle = "1"), $("td[name=tblCell]", d).hasClass("bmeNoBr") && (this.mobileStyle = "2"), $("td.tdPart", d).hasClass("bmeMblInline") && (this.mobileStyle = "3"));
        $("img", d).each(function () { if ("undefined" == typeof $(this).attr("imgid")) { var a = randomString();
                $(this).attr("imgid", "img" + a), $(this).attr("uniqueID", a) } }), detectEditorFocus = null, detectEditorLoad = null, detectEditorInit = null }

    function e(a) { b(), cancelImage(), $("#gutter-slider", "#dvSettingBlock").slider("destroy"), $("#gutter-slider", "#dvSettingBlock").remove(), $("#padding-h-slider", "#dvSettingBlock").slider("destroy"), $("#padding-h-slider", "#dvSettingBlock").remove(), $("#padding-v-slider", "#dvSettingBlock").slider("destroy"), $("#padding-v-slider", "#dvSettingBlock").remove(), $("#blockSettingContainer", "#dvSettingBlock").remove(), $("#dvSettingBlock").off(), $("#dvSettingBlock").empty(), content = null, DisableToolbar(0) }

    function f(a) { var b = $("." + rootBlockClass, "#" + this.id),
            c = 0,
            d = 0;
        $(b).attr("width", a), $(this).width = a; var e = $("td[name=tblCell]:first", b).css("font-size"),
            f = $("td[name=tblCell]:first", b).css("font-weight"),
            g = $("td[name=tblCell]:last", b).css("font-size"); try { parseWidth(e) > 40 && (e = "14px;"), "undefined" == typeof g && (g = "14px;") } catch (h) {} if (1 == $("table[name=tblText]", $(b)).length) $("table[name=tblText]", $(b)).attr("width", parseInt(a)), $("td[name=tblCell]", $(b)).css({ "font-family": "Arial,Helvetica,sans-serif", "font-size": e, "font-weight": f, color: "#383838", "text-align": "left", "padding-left": this.paddingH + "px", "padding-right": this.paddingH + "px", "padding-top": this.paddingV + "px", "padding-bottom": this.paddingV + "px" }), c = $("td[name=tblCell]", $(b)).width(), $("img", $(b)).each(function () { d = getImageMaxWidth(this), 0 != d && ($(this).css({ "max-width": d + "px" }).attr("border", "0").removeAttr("width"), c - 10 > d ? $(this).attr("width", d) : $(this).attr("width", c - 10)) });
        else { var i = $("table[name=tblGtr]", $(b)).attr("width"); "undefined" == typeof i && (i = "20"), i.toString().indexOf("px") != -1 && (i = i.replace("px", "")); var j = parseInt(a) - parseInt(i),
                k = $("table[name=tblText]:first", $(b)).attr("width"),
                l = $("table[name=tblText]:last", $(b)).attr("width"),
                m = 0;
            $("table[name=tblGtr]", $(b)).attr("width", i), checkEqual(k, l, 5) ? m = fixInt(j / 2) : k > l ? m = fixInt(j / 3 * 2) : k < l && (m = fixInt(j / 3)), $("table[name=tblText]:first", $(b)).attr("width", m), $("table[name=tblText]:last", $(b)).attr("width", j - m), $("td[name=tblCell]:first", $(b)).css({ "font-family": "Arial,Helvetica,sans-serif", "font-size": e, "font-weight": f, color: "#383838", "text-align": "left", "padding-left": this.paddingH + "px", "padding-right": this.paddingH + "px", "padding-top": this.paddingV + "px", "padding-bottom": this.paddingV + "px" }), c = $("td[name=tblCell]:first", $(b)).width(), $("img", $("td[name=tblCell]:first", $(b))).each(function () { d = getImageMaxWidth(this), 0 == d && (d = parseWidth(GetBorderDetail($(this), "width"))), 0 != d && ($(this).css({ "max-width": d + "px" }).attr("border", "0").removeAttr("width"), c - 10 > d ? $(this).attr("width", d) : $(this).attr("width", c - 10)) }), $("td[name=tblCell]:last", $(b)).css({ "font-family": "Arial,Helvetica,sans-serif", "font-size": g, "font-weight": f, color: "#383838", "text-align": "left", "padding-left": this.paddingH + "px", "padding-right": this.paddingH + "px", "padding-top": this.paddingV + "px", "padding-bottom": this.paddingV + "px" }), c = $("td[name=tblCell]:last", $(b)).width(), $("img", $("td[name=tblCell]:last", $(b))).each(function () { d = getImageMaxWidth(this), 0 == d && (d = parseWidth(GetBorderDetail($(this), "width"))), 0 != d && ($(this).css({ "max-width": d + "px" }).attr("border", "0").removeAttr("width"), c - 10 > d ? $(this).attr("width", d) : $(this).attr("width", c - 10)) }) } }

    function g() { var a = $("." + rootBlockClass, "#" + this.id); if ($(a).attr("width", "100%"), 1 == $("table[name=tblText]", $(a)).length) this.columns = 1, $("table[name=tblText]", $(a)).attr("width", "");
        else { this.columns = 2; var b = $("table[name=tblText]:first", $(a)).attr("width"),
                c = $("table[name=tblText]:last", $(a)).attr("width");
            b == c || Math.abs(b - c) < 5 ? ($("table[name=tblText]:first", $(a)).attr("width", "10"), $("table[name=tblText]:last", $(a)).attr("width", "10")) : b > c ? ($("table[name=tblText]:first", $(a)).attr("width", "20"), $("table[name=tblText]:last", $(a)).attr("width", "10")) : b < c && ($("table[name=tblText]:first", $(a)).attr("width", "10"), $("table[name=tblText]:last", $(a)).attr("width", "20")) } $("img", $(a)).attr("width", "2").removeAttr("height"), a = null }

    function h(a) { var d = this.gutter;
        $("#dvSettingBlock").off(), $("#dvSettingBlock").empty(); var e = chkColorVal($("table[name='tblText']", _editBlock).css("background-color")),
            f = ""; "" != e && (f = hexc(e.toLowerCase())), this.backgroundColor = e, $(".sidebar-editblock-name").text(JS_BLOCK_TEXT); var g = "";
        g += "<div id=mainSetting class=current>", g += "<div class='panel-container'>", g += '<div class="subpanel-nav clearfix2"><span class="selected" onclick="javascript:subcontentToggle(this, \'sub1\');">' + JS_SETTINGS + '</span><span class="" onclick="javascript:subcontentToggle(this, \'sub2\');">' + JS_CONTENT + "</span></div>", g += '<div class="subcontent current sub1">', g += template_field_BackgroundColor("text", f, e, JS_BACKGROUND, "rctrlBGColor", "ctrlBGColor"), g += template_field_Slider("padding-h-slider", JS_H_PADDING, "fldHPadding"), g += template_field_Slider("padding-v-slider", JS_V_PADDING), g += "</div>", g += '<div class="subcontent sub2">', g += '<fieldset><label class="label-small">' + JS_NUMBER_OF_COLUMNS + '</label><select id="numCols" class="form-control form-control-small" onchange="javascript:selectChangeHandler(\'text\', this);"><option value=1 ' + (1 == this.columns ? " selected" : "") + ">1</option><option value=2  " + (2 == this.columns ? " selected" : "") + ">2</option></select></fieldset>", g += template_field_columnLayout("text", JS_COLUMN_SPLIT, this.columns, this.division), g += template_field_Slider("gutter-slider", JS_GUTTER_WIDTH, "", "layout-cols-option"), g += template_field_LineHeight("text"), g += "<fieldset id=fldMobileStyle class='hidden'><label class=\"label-small\">" + JS_MOBILE_STYLING + "</label><select id=mobileStyle class=\"form-control form-control-small\" onchange=\"javascript:selectChangeHandler('text', this);\"><option value='' " + ("0" == this.mobileStyle || "" == this.mobileStyle ? " selected" : "") + ">" + JS_NONE + "</option><option value='1' " + ("1" == this.mobileStyle ? " selected" : "") + ">" + JS_CENTER_CONTENT_COLUMN + "</option><option value='2' " + ("2" == this.mobileStyle ? " selected" : "") + ">" + JS_CENTER_CONTENT_NOBR_COLUMN + "</option><option value='3' " + ("3" == this.mobileStyle ? " selected" : "") + ">" + JS_SIDE_BY_SIDE_COLUMN + "</option></select></fieldset>", g += "</div>", g += "</div>", g += template_field_SaveAndClose("text"), g += "</div>", g += "<div id=mainSettingVeil onclick=\"javascript:colorChangeHandler('imagesetting', this);\"></div>", g += "<div id=itemSetting>", g += "<div class='panel-container'>", g += "</div>", g += template_field_SaveAndBack("imagesetting"), g += "</div>", $("#dvSettingBlock").append(g), "undefined" == typeof this.paddingV ? this.paddingV = 0 : this.paddingV = parseWidth(this.paddingV), "undefined" == typeof this.paddingH ? this.paddingH = 0 : this.paddingH = parseWidth(this.paddingH), "undefined" == typeof this.gutter ? this.gutter = 0 : this.gutter = parseWidth(this.gutter); var h = this.paddingH;
        $("#padding-h-slider", "#dvSettingBlock").slider({ value: h, min: 0, max: 20, step: 5, slide: function (a, d) { b(), $(".new-slider-val", $("#padding-h-slider", "#dvSettingBlock")).text(d.value); var e = d.value;
                $("td[name=tblCell]", _editBlock).css({ "padding-left": e + "px", "padding-right": e + "px" }), c() }, start: function (a, b) { $(".new-slider-val", $("#padding-h-slider", "#dvSettingBlock")).show() }, stop: function (a, b) { $(".new-slider-val", $("#padding-h-slider", "#dvSettingBlock")).delay(400).fadeOut(200) } }).find(".ui-slider-handle").append($("<div />").css("display", "none").addClass("new-slider-val")), $(".new-slider-val", $("#padding-h-slider", "#dvSettingBlock")).text(h), h = this.paddingV, $("#padding-v-slider", "#dvSettingBlock").slider({ value: h, min: 0, max: 20, step: 5, slide: function (a, b) { $(".new-slider-val", $("#padding-v-slider", "#dvSettingBlock")).text(b.value); var c = b.value;
                $("td[name=tblCell]", _editBlock).css({ "padding-top": c + "px", "padding-bottom": c + "px" }) }, start: function (a, b) { $(".new-slider-val", $("#padding-v-slider", "#dvSettingBlock")).show() }, stop: function (a, b) { $(".new-slider-val", $("#padding-v-slider", "#dvSettingBlock")).delay(400).fadeOut(200) } }).find(".ui-slider-handle").append($("<div />").css("display", "none").addClass("new-slider-val")), $(".new-slider-val", $("#padding-v-slider", "#dvSettingBlock")).text(h), $("#gutter-slider", "#dvSettingBlock").slider({ value: d, min: 0, max: 20, step: 5, slide: function (a, d) { $(".new-slider-val", $("#gutter-slider", "#dvSettingBlock")).text(d.value), $("table[name='tblGtr']", _editBlock).attr("width", d.value + "px"), b(), _gtr = d.value, _width = $(_editBlock).attr("width"), $(".layout-selected", "#dvSettingBlock").each(function () { $("a", this).hasClass("col-half") ? i(_editBlock, _width, 2, "50%", _gtr, $("td[name=tblCell]:first", _editBlock).css("padding-left"), $("td[name=tblCell]:first", _editBlock).css("padding-top")) : $("a", this).hasClass("col-one-third") ? i(_editBlock, _width, 2, "30%", _gtr, $("td[name=tblCell]:first", _editBlock).css("padding-left"), $("td[name=tblCell]:first", _editBlock).css("padding-top")) : $("a", this).hasClass("col-two-third") && i(_editBlock, _width, 2, "70%", _gtr, $("td[name=tblCell]:first", _editBlock).css("padding-left"), $("td[name=tblCell]:first", _editBlock).css("padding-top")) }), c() }, start: function (a, b) { $(".new-slider-val", $("#gutter-slider", "#dvSettingBlock")).show() }, stop: function (a, b) { $(".new-slider-val", $("#gutter-slider", "#dvSettingBlock")).delay(400).fadeOut(200) } }).find(".ui-slider-handle").append($("<div />").css("display", "none").addClass("new-slider-val")), $(".new-slider-val", $("#gutter-slider", "#dvSettingBlock")).text(d), LoadToolBar(0), 1 == this.columns ? (i(_editBlock, this.width, this.columns, "100%", 0, this.paddingH, this.paddingV), $("fieldset.layout-cols-option", "#dvSettingBlock").addClass("hidden"), $("fieldset#fldMobileStyle", "#dvSettingBlock").addClass("hidden"), c()) : ($("fieldset.layout-cols-option", "#dvSettingBlock").removeClass("hidden"), this.gutter.toString().indexOf("px") != -1 && (this.gutter = this.gutter.toString().replace("px", "")), _gtr = parseInt(this.gutter), $(".new-slider-val", $("#gutter-slider", "#dvSettingBlock")).text(_gtr), _paddingH = parseInt(this.paddingH), _paddingV = parseInt(this.paddingV), _width = $(_editBlock).width(), i(_editBlock, _width, 2, this.division, _gtr, _paddingH, _paddingV), $("fieldset#fldMobileStyle", "#dvSettingBlock").removeClass("hidden"), c()), blkObjectEditor = tinymce.activeEditor, detectEditorFocus = null, detectEditorLoad = null, detectEditorInit = null, _editBlockItem = null }

    function i(a, b, c, d, e, f, g) { var h = b - e,
            i = 0,
            j = 0,
            k = 0; if (paddingArea = 20, 2 == c) { var l = $("td[name=tblCell]:first", a).css("font-size"),
                m = $("td[name=tblCell]:first", a).css("font-weight"),
                n = $("td[name=tblCell]:last", a).css("font-size"); try { parseWidth(l) > 40 && (l = "14px;"), "undefined" == typeof n && (n = "14px;") } catch (o) {} $("td[name=tblCell]:first", a).css({ "font-family": "Arial,Helvetica,sans-serif", "font-size": l, "font-weight": m, color: "#383838", "text-align": "left", "padding-left": f + "px", "padding-right": f + "px", "padding-top": g + "px", "padding-bottom": g + "px" }), $("td[name=tblCell]:last", a).css({ "font-family": "Arial,Helvetica,sans-serif", "font-size": n, "font-weight": m, color: "#383838", "text-align": "left", "padding-left": f + "px", "padding-right": f + "px", "padding-top": g + "px", "padding-bottom": g + "px" }), $("table[name=tblText]:first", a).css({ "float": "left" }), $("table[name=tblText]:last", a).css({ "float": "right" }), $("table[name=tblGtr]", a).attr("width", e), $("img", a).each(function () { j = getImageMaxWidth(this), 0 != j && $(this).css({ "max-width": j + "px" }).attr("border", "0").attr("width", "1") }), "50%" == d || 50 == d ? i = fixInt(h / 2) : "30%" == d || 30 == d ? i = fixInt(h / 3) : "70%" != d && 70 != d || (i = fixInt(h / 3 * 2)), $("table[name=tblText]:first", a).attr("width", i), $("table[name=tblText]:last", a).attr("width", h - i), $(".mceLayout", a).length > 0 && ($(".mceLayout:first", a).css({ width: i - paddingArea + "px" }), $(".mceLayout:last", a).css({ width: h - i - paddingArea + "px" })), k = $("td[name=tblCell]:first", $(a)).width(), k -= 10, $("img", $("table[name=tblText]:first", a)).each(function () { j = getImageMaxWidth(this), 0 == j && (j = parseWidth(GetBorderDetail($(this), "width"))), 0 != j && ($(this).css({ "max-width": j + "px" }).attr("border", "0").removeAttr("width"), k > j ? $(this).attr("width", j) : $(this).attr("width", k)) }), k = $("td[name=tblCell]:last", $(a)).width(), k -= 10, $("img", $("table[name=tblText]:last", a)).each(function () { j = getImageMaxWidth(this), 0 == j && (j = parseWidth(GetBorderDetail($(this), "width"))), 0 != j && ($(this).css({ "max-width": j + "px" }).attr("border", "0").removeAttr("width"), k > j ? $(this).attr("width", j) : $(this).attr("width", k)) }) } else { var l = $("td[name=tblCell]:first", a).css("font-size"),
                m = $("td[name=tblCell]:first", a).css("font-weight"); try { parseWidth(l) > 40 && (l = "14px;") } catch (o) {} h = b - 0, $("table[name=tblText]", a).attr("width", h), $("td[name=tblCell]", a).css({ "font-family": "Arial,Helvetica,sans-serif", "font-size": l, "font-weight": m, color: "#383838", "text-align": "left", "padding-left": f + "px", "padding-right": f + "px", "padding-top": g + "px", "padding-bottom": g + "px" }), k = $("td[name=tblCell]:last", $(a)).width(), k -= 10, $("img", $("table[name=tblText]:last", a)).each(function () { j = getImageMaxWidth(this), 0 == j && (j = parseWidth(GetBorderDetail($(this), "width"))), 0 != j && ($(this).css({ "max-width": j + "px" }).attr("border", "0").removeAttr("width"), k > j ? $(this).attr("width", j) : $(this).attr("width", k)) }) } h = null } this.width = "100%", this.type = "text", this.columns = 0, this.padding = 20, this.paddingH = 20, this.paddingV = 10, this.mobileStyle = "", this.backgroundColor = "", this.gutter = 0, this.division = 0, this.load = d, this.unload = e, this.setWidth = f, this.applyText = b, this.applyEditor = c, this.resetWidth = g, this.getHTML = a, this.renderSetting = h, this.setBlockWidths = i, this.id = "" }

function Block_Video() {
    function a(a) { var b = this,
            c = '<table width="' + b.width + '" cellspacing="0" cellpadding="0" border="0" class="' + rootBlockClass + '" name="blk_video">'; return c += '<tbody><tr><td align=center class=bmeVideo><table width="100%" cellspacing="0" cellpadding="0" border="0"><tbody><tr><td style="text-align: center; ', "" != b.backgroundColor && "transparent" != b.backgroundColor && (c += "background-color:" + b.backgroundColor + ";"), "" != b.borderWidth && "undefined" != typeof b.borderWidth || (b.borderWidth = "0"), "0" != b.borderWidth && "" != b.borderWidth && (c += "border-width:" + b.borderWidth + "px; ", "" == b.borderColor && (b.borderColor = "#000000;"), c += "border-color:" + b.borderColor + ";", "" == b.borderStyle && (b.borderStyle = "solid"), c += "border-style:" + b.borderStyle + ";"), "" == b.paddingH.toString() && (b.paddingH = 20), "" == b.paddingV.toString() && (b.paddingV = 20), c += "padding-top:" + b.paddingV + "px; padding-bottom:" + b.paddingV + "px; padding-left:" + b.paddingH + "px; padding-right:" + b.paddingH + "px;", c += '">', "" == b.videoSrc && (b.videoSrc = BLANK_VIDEO_CODE), c += b.videoSrc, c += "</td></tr></tbody></table>", c += "</td></tr></tbody></table>" }

    function b(a) { f(), $("#dvSettingBlock").off(), $("#dvSettingBlock").empty(), DisableToolbar(0) }

    function c(a) { var b = $("td.bmeVideo", f).attr("style"),
            c = $("td.bmeVideo", f).parent("tr").parent("tbody").parent("table").attr("style"); if (pattern = /<table/i, table_start = '<table width="100%" cellspacing="0" cellpadding="0" border="0"><tbody><tr><td style="' + b + c + '">', inner_html = $("td.bmeVideo", f).html(), pattern.test(inner_html) ? (curr_style = $("td.bmeVideo", f).children("table").children("tbody").children("tr").children("td").attr("style"), "" != curr_style || "" == b && "" == c || ($("td.bmeVideo", f).children("table").children("tbody").children("tr").children("td").attr("style", b + c), $("td.bmeVideo", f).attr("style", ""), $("td.bmeVideo", f).parent("tr").parent("tbody").parent("table[name='blk_video']").attr("style", ""))) : (table_end = "</td></tr></table>", inner_table = table_start + inner_html + table_end, $("td.bmeVideo", f).html(inner_table), $("td.bmeVideo", f).attr("style", ""), $("td.bmeVideo", f).parent("tr").parent("tbody").parent("table[name='blk_video']").removeAttr("style")), $(a).parent().hasClass("blk_wrapper")) this.id = GetBlockID(a);
        else { this.id = SetWidgetBlockID(); var d = this.id,
                e = getNewBlockWrapper(d, "blk_video", $(a).clone().wrap("<div />").parent().html());
            $(a).replaceWith(e) } detectEditorLoad = null, detectEditorInit = null, detectEditorFocus = null; var f = $("." + rootBlockClass, "#" + this.id);
        this.width = $(f).attr("width"), styleElement = $(f).children("tbody").children("tr").children("td.bmeVideo").children("table").children("tbody").children("tr").children("td"), this.backgroundColor = styleElement.css("background-color"), this.borderStyle = styleElement.css("border-top-style"), "none" == this.borderStyle ? this.borderColor = "" : this.borderColor = styleElement.css("border-top-color"), this.borderWidth = GetBorderDetail(styleElement, "width").replace("px", ""), this.paddingV = $(styleElement).css("padding-top"), "" == this.paddingV ? this.paddingV = 20 : this.paddingV = parseWidth(this.paddingV), this.paddingH = $(styleElement).css("padding-left"), "" == this.paddingH ? this.paddingH = 20 : this.paddingH = parseWidth(this.paddingH), this.videoSrc = $("td.bmeVideo table tbody tr td", f).html(), "" == this.videoSrc && (this.videoSrc = BLANK_VIDEO_CODE, $("td.bmeVideo table tbody tr td", f).html(BLANK_VIDEO_CODE)) }

    function d(a) { styleElement = $(a).children("tbody").children("tr").children("td.bmeVideo").children("table").children("tbody").children("tr").children("td"), $("#dvSettingBlock").off(), $("#dvSettingBlock").empty(); var b = "",
            c = ($(this.videoSrc), chkColorVal(this.borderColor)),
            d = ""; "" != c && (d = hexc(c.toLowerCase())); var g = chkColorVal(this.backgroundColor),
            h = ""; "" != g && (h = hexc(g.toLowerCase())), $(".sidebar-editblock-name").text(JS_BLOCK_VIDEO), b += "<div class='panel-container'>", b += template_field_BackgroundColor("video", h, g, JS_BACKGROUND, "rctrlBGColor", "ctrlBGColor"), b += template_field_BorderStyles("video", d, c, this.borderStyle, this.borderWidth, JS_BORDER), b += template_field_Slider("padding-h-slider", JS_H_PADDING), b += template_field_Slider("padding-v-slider", JS_V_PADDING), b += template_field_seperator(), b += '<fieldset id=fldVideoDetail><label class="label-small"><span id=lblVideoName></span><a class=reset-link id=rEdit onclick="javascript:colorChangeHandler(\'video\', this);"><small>' + JS_REPLACE + "</small></a> </label></fieldset>", b += "</div>", b += template_field_SaveAndClose("video"), $("#dvSettingBlock").append(b); var j = "";
        $("img", $(".bmeVideo", _editBlock)).length > 0 && (j = $("img", $(".bmeVideo", _editBlock)).attr("src")), 0 == $("img", $(".bmeVideo", _editBlock)).length || j == smImage ? ($(".field-seperator", "#dvSettingBlock").addClass("hidden"), $("#fldVideoDetail", "#dvSettingBlock").addClass("hidden"), LoadToolBar(-1)) : ($("#lblVideoName", $("#dvSettingBlock")).html("<img src='" + j + "' border=0 style='max-width:100px;max-height:100px;display:block;' />"), $(".field-seperator", "#dvSettingBlock").removeClass("hidden"), $("#fldVideoDetail", "#dvSettingBlock").removeClass("hidden"), LoadToolBar(-1)); var k = parseWidth(this.paddingH);
        $("#padding-h-slider", "#dvSettingBlock").slider({ value: k, min: 0, max: 20, step: 5, slide: function (a, b) { $(".new-slider-val", $("#padding-h-slider", "#dvSettingBlock")).text(b.value), $(styleElement).css({ "padding-left": b.value + "px", "padding-right": b.value + "px" }), i($(_editBlock).attr("width"), _editBlock) }, start: function (a, b) { $(".new-slider-val", $("#padding-h-slider", "#dvSettingBlock")).show() }, stop: function (a, b) { $(".new-slider-val", $("#padding-h-slider", "#dvSettingBlock")).delay(400).fadeOut(200) } }).find(".ui-slider-handle").append($("<div />").css("display", "none").addClass("new-slider-val")), $(".new-slider-val", $("#padding-h-slider", "#dvSettingBlock")).text(k), k = parseWidth(this.paddingV), $("#padding-v-slider", "#dvSettingBlock").slider({ value: k, min: 0, max: 20, step: 5, slide: function (a, b) { $(".new-slider-val", $("#padding-v-slider", "#dvSettingBlock")).text(b.value), $(styleElement).css({ "padding-top": b.value + "px", "padding-bottom": b.value + "px" }), i($(_editBlock).attr("width"), _editBlock) }, start: function (a, b) { $(".new-slider-val", $("#padding-v-slider", "#dvSettingBlock")).show() }, stop: function (a, b) { $(".new-slider-val", $("#padding-v-slider", "#dvSettingBlock")).delay(400).fadeOut(200) } }).find(".ui-slider-handle").append($("<div />").css("display", "none").addClass("new-slider-val")), $(".new-slider-val", $("#padding-v-slider", "#dvSettingBlock")).text(k), f(), e(), LoadToolBar(-1), EditModeOn = !0 }

    function e() { $("a[name='ancUploadVideo']", _editBlock).on("click", g), $(".bmeVideo table tbody tr td", _editBlock).on("click", g), $("a", _editBlock).on("click", g) }

    function f() { $("a[name='ancUploadVideo']", _editBlock).off("click", g), $(".bmeVideo table tbody tr td", _editBlock).off("click", g), $("a", _editBlock).off("click", g) }

    function g(a) { a.preventDefault(), a.stopPropagation(), currentVideoCtrl = blkObjectData, detectClose = "_ClearVideoCtrl()", null != toolbarDialog && 0 != toolbarDialog.dialog("isOpen") || OpenVideoDialog() }

    function h(a) {
        var b = $("img", a),
            c = $(b).attr("src");
        w = 720;
        var d = $("<div>");
        $(d).append(a), $("img", d).css({
            "max-width": w,
            display: "block"
        }), $("img", d).removeAttr("height"), $("img", d).removeAttr("width"), a = $(d).html(), f(), $(".bmeVideo table tbody tr td", _editBlock).html(a), null == c || "" == c || c == smImage ? ($(".field-seperator", "#dvSettingBlock").hide(), $("#fldVideoDetail", "#dvSettingBlock").hide()) : ($("#lblVideoName", $("#dvSettingBlock")).html("<img src='" + c + "' border=0 style='max-width:100px;max-height:100px;display:block;' />"), $(".field-seperator", "#dvSettingBlock").removeClass("hidden"), $("#fldVideoDetail", "#dvSettingBlock").removeClass("hidden")), _editBlockItem = $(".bmeVideo table tbody tr td", _editBlock).html(), i($(_editBlock).attr("width"), _editBlock), currentVideoCtrl = null, e(), LoadToolBar(-1)
    }

    function i(a, b) { "undefined" == typeof a && (a = $(b).width()), $(b).attr("width", a), $(b).width = a, $("img", b).attr("width", "2"), $("img", b).removeAttr("height"); var c = 0,
            d = parseWidth($(".bmeVideo table tbody tr td", b).css("padding-left")),
            e = parseWidth(GetBorderDetail($(".bmeVideo table tbody tr td", b), "width"));
        d = parseInt(d) + parseInt(e), c = parseWidth(a) - 2 * d; var f = 0;
        $("img", b).each(function () { f = getImageMaxWidth(this), 0 == f && (f = 720), $(this).css({ "max-width": "720px", display: "block" }), c > f ? $(this).attr("width", f).attr("border", "0") : $(this).attr("width", c).attr("border", "0") }), setImageSetting(a, b) }

    function j(a) { var b = $("." + rootBlockClass, "#" + this.id);
        i(a, b) }

    function k() { var a = $("." + rootBlockClass, "#" + this.id);
        $(a).attr("width", "100%"), $("img", a).attr("width", "2") } this.width = "100%", this.backgroundColor = "", this.videoSrc = "", this.paddingH = 20, this.paddingV = 20, this.borderWidth = 0, this.borderStyle = "", this.borderColor = "", this.load = c, this.unload = b, this.setWidth = j, this.resetWidth = k, this.renderSetting = d, this.getHTML = a, this.id = "", this.insertVideo = h, this.type = "video"
}

function checkIsRoot(a) { for (var b = !1, c = $(a), d = 0, e = 0; 0 == d;) $(c).hasClass("miniBorder") || $(c).hasClass("guideBorder") || $(c).hasClass("editHandle") || $(c).hasClass("copyHandle") || $(c).hasClass("deleteHandle") || $(c).hasClass("minibar") || $(c).hasClass("miniBlockTitle") || $(c).hasClass(rootBlockClass) ? d = 1 : $(c).hasClass("editor-template-container") && (d = 1, b = !0), 0 == d && (c = $(c).parent()), e++ > 25 && (d = 1); return b }

function checkBlankArea() { $(".blk_container", frameObj).each(function () { $(this).find('.blk_wrapper[name="blk_blank"]').length || AddBlock(GetBlockCode("blank", "100%"), null, $(this), "", 0, "blank") }), $('.blk_wrapper[name="blk_blank"]').hide(), $(".blk_container", frameObj).each(function () { $(this).find(".blk_wrapper:not(.sortable-chosen):visible").length || $(this).find('.blk_wrapper[name="blk_blank"]').show() }) }

function checkDefaultBlocks() { var a = 0,
        b = 0,
        c = 0,
        d = 0,
        e = null; "undefined" == typeof PermissionPosition && (PermissionPosition = "1"); var f;
    $("." + rootBlockClass).each(function () { "blk_footer" == $(this).attr("name") ? a = 1 : "blk_permission" == $(this).attr("name") ? (b = 1, e = this) : "blk_rss_head" == $(this).attr("name") ? c = 1 : "blk_rss_feed" == $(this).attr("name") && (d = 1), "undefined" == typeof _CID && (_CID = 0), "76859" != _CID && "1230" != _CID && "47250" != _CID || $(this).attr("align", "center") }), $("var[type=BME_BADGE]").html('<img src="' + CurrentBadge + '" border="0" name="bmeBadgeImage" alt=""  />'), 0 == b && "" != JS_PERMISSION ? "1" == PermissionPosition ? AddBlock(GetBlockCode("permission", "100%"), $("td[name='bmePreHeader']"), $(this), "", 0) : AddBlock(GetBlockCode("permission", "100%"), $("td[name='bmeFooter']"), $(this), "", 0) : 1 == b && "" == JS_PERMISSION ? deleteContentBlock($(e).parent().attr("id")) : 1 == b && "" != JS_PERMISSION && ($("span", $("td[name=bmePermissionText]", e)).html(JS_PERMISSION), f = $("td[name=bmePermissionText]", e).attr("linkColor"), "" != f && "undefined" != typeof f && $("a", $("td[name=bmePermissionText]", e)).css("color", f)), 0 == a && AddBlock(GetBlockCode("footer", "100%"), $("td[name='bmeFooter']"), $(this), "", 0); var g = PreviewEmail;
    null == g && (g = "test@benchmarkemail.com"), $("var[type=BME_CANSPAM]", frameObj).html(ReplaceAll(ReplaceAll(JS_FOOTER_SENT, "#SENT_TO#", g), "SENT_TO", g)), $("var[type=BME_LINKS]", frameObj).html(JS_FOOTER_LINK), null != JS_FOOTER_ADDRESS && "" != JS_FOOTER_ADDRESS || (JS_FOOTER_ADDRESS = JS_FOOTER_ADDRESS_DEFAULT), $("var[type=BME_ADDRESS]", frameObj).html(JS_FOOTER_ADDRESS) }

function checkEditorNode(a, b) { var c = b.target,
        d = $(c).prop("tagName").toLowerCase(); "undefined" == typeof d && (d = c.nodeName); var e = ($(c), 0); if (0 == e && "img" == d) { var f = $(c).attr("imgid"); "undefined" == typeof f && (f = ""), f.indexOf("img") != -1 && (e = 1) } return 1 == e ? $(c).hasClass("deletelistitem") || "lideleteimage" == $(c).attr("name") ? void deleteImage($(c)) : $(c).hasClass("editlistitem") || "lieditimage" == $(c).attr("name") ? void editImage($(c)) : (editImage($(c)), b.stopPropagation(), b.preventDefault(), !1) : void($("#itemSetting").hasClass("current") && saveImage()) }

function CheckEditor(a, b) { currentVariable = null, currentImage = null, currentVideo = null, currentGreetingVariable = null, alignElement = null, currentSelection = null, currentFontFamily = "", currentFontSize = "", currentFontFamily = $(b).css("font-family"), currentFontSize = $(b).css("font-size"), currentFontColor = $(b).css("color"); var c = $(toolbarCtrl);
    null != fsCtrl && fsCtrl.value(currentFontSize), tinyMCEColorVal = currentFontColor, 0 == $(".sp-container:visible").length && $("#toolbarColor").spectrum("set", currentFontColor); var d = b.nodeName,
        e = "",
        f = !1; if (e = $(b).prop("tagName").toLowerCase(), "undefined" == typeof e && (e = b.nodeName), !($(b).parent("ul.content-block-nav").length > 0)) { IsImage(!1, 0), IsVideo(!1, 0), IsLink(!1, 0), IsBookmark(!1, 0), IsUnderline(!1, 0), IsStrike(!1, 0), tinymce.activeEditor.undoManager.hasUndo() ? $(".tool-undo", c).removeClass("tool-disabled") : $(".tool-undo", c).addClass("tool-disabled"), tinymce.activeEditor.undoManager.hasRedo() ? $(".tool-redo", c).removeClass("tool-disabled") : $(".tool-redo", c).addClass("tool-disabled"), "a" == GetAttrValue(b, "tagName").toLowerCase() ? $(".tool-unlink", c).removeClass("tool-disabled") : $(".tool-unlink", c).addClass("tool-disabled"), SetFontSize(currentFontSize), SetFontFamily(currentFontFamily), 700 == $(b).css("font-weight") || "bold" == $(b).css("font-weight") ? IsBold(!0, 0) : IsBold(!1, 0), "italic" == $(b).css("font-style") ? IsItalic(!0, 0) : IsItalic(!1, 0), tinymce.activeEditor.queryCommandState("underline") ? IsUnderline(!0, 0) : IsUnderline(!1, 0), tinymce.activeEditor.queryCommandState("strikethrough") ? IsStrike(!0, 0) : IsStrike(!1, 0), SetListStyle(0); var g = $(b).parents("ol").length,
            h = $(b).parents("ul").length; if (g > 0 && 0 == h ? SetListStyle(1) : 0 == g && h > 0 ? SetListStyle(2) : g > 0 && h > 0 && (g = 0, h = 0, $(b).parents("ol").each(function () { $(this).html().length > g && (g = $(this).html().length) }), $(b).parents("ul").each(function () { $(this).html().length > h && (h = $(this).html().length) }), SetListStyle(g > h ? 1 : 2)), "TABLE" == d && ("imgHolder" == $(b).attr("name") ? (IsImage(!0, 1), alignElement = b, null == currentImage && (currentImage = b.getElementsByTagName("img")[0]), f = !0) : "vidHolder" == $(b).attr("name") && (IsVideo(!0, 1), alignElement = b, null == currentVideo && (currentVideo = b.getElementsByTagName("var")[0]), f = !0)), "IMG" == d && 0 == f) { IsImage(!0, 1), currentImage = b, currentImage.caption = GetImageCaptionNew(currentImage); try { var i = $(b).parent().get(0),
                    j = $(i).parent().get(0); try { "A" == Trim(i.tagName) && "VAR" == Trim(j.tagName) && "video" == $(j).attr("type") && (currentVideo = j, currentImage = null, IsVideo(!0, 1), IsImage(!1, 0), IsLink(!1, 0), IsBookmark(!1, 0), IsDocument(!1, 0), f = !0) } catch (k) {} for (var l = 1; 1 == l;) "A" == Trim(i.tagName) || "VAR" == Trim(i.tagName) || "TD" == Trim(i.tagName) || "TR" == Trim(i.tagName) || "TBODY" == Trim(i.tagName) || "TABLE" == Trim(i.tagName) ? "TABLE" == Trim(i.tagName) && "imgHolder" == $(i).attr("name") ? (tinyMCE.activeEditor.selection.select(i), currentImage.caption = GetImageCaptionNew(i), alignElement = i, null == currentVideo && (IsImage(!0, 0), f = !0), l = 0) : i = $(i).parent().get(0) : l = -1 } catch (b) {} } var m = b; if (0 == f) { for (;
                "A" != m.nodeName && "VAR" != m.nodeName && "BODY" != m.nodeName;) m = m.parentNode; "A" == m.nodeName || "VAR" == m.nodeName ? d = m.nodeName : m = b } if ("A" == d && 0 == f)
            if (currentVariable = m, "1" == $(currentVariable).attr("survey")) IsSurvey(!0, 1), f = !0;
            else if ("1" == $(currentVariable).attr("forward")) IsForward(!0, 1), f = !0;
        else if ("1" == $(currentVariable).attr("event")) IsEvent(!0, 1), f = !0;
        else { var n = $(currentVariable).attr("name"),
                o = 0;
            n && n.length > 0 && (IsBookmark(!0, 1), o = 1, f = !0), 0 == o && (IsLink(!0, 1), f = !0) } "VAR" == d && 0 == f && (currentVariable = m, vartype = $(m).attr("type"), vartype && ("contact_detail" == vartype && (IsContact(!0, 1), f = !0), "greeting" == vartype ? (IsGreeting(!0, 1), currentGreetingVariable = currentVariable, f = !0) : "survey" == vartype ? (IsSurvey(!0, 1), f = !0) : "forward" == vartype ? (IsForward(!0, 1), f = !0) : "event" == vartype ? (IsEvent(!0, 1), f = !0) : "video" == vartype && (IsVideo(!0, 1), currentImage = null, IsImage(!1, 0), IsLink(!1, 0), IsBookmark(!1, 0), IsDocument(!1, 0), f = !0))), $("a.tool-dd", $(".format-align", c)).removeClass("tool-alignleft").removeClass("tool-aligncenter").removeClass("tool-alignright").removeClass("tool-alignjustify").addClass("tool-alignleft"), "right" == $(b).css("text-align") ? $("a.tool-dd", $(".format-align", c)).addClass("tool-alignright").attr("title", JS_ALIGN_RIGHT) : "justify" == $(b).css("text-align") ? $("a.tool-dd", $(".format-align", c)).addClass("tool-alignjustify").attr("title", JS_JUSTIFY) : "left" == $(b).css("text-align") ? $("a.tool-dd", $(".format-align", c)).addClass("tool-alignleft").attr("title", JS_ALIGN_LEFT) : "center" == $(b).css("text-align") ? $("a.tool-dd", $(".format-align", c)).addClass("tool-aligncenter").attr("title", JS_ALIGN_CENTER) : $("a.tool-dd", $(".format-align", c)).addClass("tool-alignleft").attr("title", JS_ALIGN_LEFT) } }

function checkBlockScroll() { if (null != currentEditID) { var a = $("#_BME_dvEditArea").height() - $(window).height() - 25,
            b = $("#dv_" + currentEditID).offset().top; if ($("#_BME_dvEditArea").offset().top < 0) { var c = $("#_BME_dvEditArea").offset().top * -1 + b;
            c > a && $(".editor-main").scrollTop(c) } } }

function CheckLoaded() { var a = !0; return null != blkObjectData && 0 == _saveBlock(blkObjectData.type) && ("footer" == blkObjectData.type && ($("#txtCanSpamAddress").addClass("frmerror"), $("#txtCanSpamAddress").closest("fieldset").addClass("error"), render_alert_address("error", JS_ERR_DESC_ADDRESS), $("#txtAddressErr").removeClass("hidden"), $(".subpanel-nav > span:last-child").addClass("hasError"), $(".subpanel-nav > span:last-child").click()), a = !1), a }

function gmailClassNameFix() { $('table[name="tblText"]').addClass("tblText"), $('table[name="bmeMainColumn"]').addClass("bmeMainColumn").attr("id", "bmeMainColumn"), $('td[name="tblCell"]').addClass("tblCell"), $('table[name="tblGtr"]').addClass("tblGtr"), $('td[name="bmeLeftColumn"]').addClass("bmeLeftColumn").attr("id", "bmeLeftColumn"), $('td[name="bmeRightColumn"]').addClass("bmeRightColumn").attr("id", "bmeRightColumn"), $('td[name="bmeColumn1"]').addClass("bmeColumn1").attr("id", "bmeColumn1"), $('td[name="bmeColumn2"]').addClass("bmeColumn2").attr("id", "bmeColumn2"), $('td[name="bmeColumn3"]').addClass("bmeColumn3").attr("id", "bmeColumn3"), $('td[name="bmeBody"].blk_container').addClass("bmeBody").attr("id", "bmeBody"), $('table[name="share-tbl"]').addClass("share-tbl"), $('td[name="bmeShareTD"]').addClass("bmeShareTD"), $('td[name="bmeSocialTD"]').addClass("bmeSocialTD"), $('td[name="tdBoxedTextBorder"]').addClass("tdBoxedTextBorder"), $('td[name="bmePreHeader"]').attr("id", "bmePreHeader"), $('td[name="bmeHeader"]').attr("id", "bmeHeader"), $('td[name="bmePreFooter"]').attr("id", "bmePreFooter"), $('td[name="bmeFooter"]').attr("id", "bmeFooter") }

function CleanContentHTML(a) { var b = $("<div />");
    b.append(a), $("div.drag-image-box, div.blk_img_dd_wrap, table[name='drag-image-table'], div.miniBorder, div.miniBlockTitle, div.minibar", $(b)).remove(), $("div.guideBlockTitle, div.guideOption, div.guideBorder", $(b)).remove(), $("ul.content-block-nav", $(b)).remove(), $(".content-block-nav", $(b)).remove(); var c = $(b).html(); return $(b).html(""), b = null, c }

function FixContentHTML(a) { var b = $("<div />"),
        c = null,
        d = 0,
        e = 0,
        f = null,
        g = null;
    b.append(a); var h = $("table.blk", b).attr("name"); "blk_footer" != h && "blk_text" != h && "blk_boxtext" != h && "blk_card" != h && "blk_imagecaption" != h && $("img", b).each(function () { if (c = parseWidth(GetBorderDetail($(this), "max-width")), "undefined" == typeof c && (c = null), null == c || "none" == c || "0" == c) { if (f = $(this).prop("naturalWidth"), "undefined" == typeof f || "0" == f) { var a = $("<img/>").attr("src", $(this).attr("src")); for (f = "0";
                    "undefined" == typeof f || "0" == f;) setTimeout(function () {}, 5e3), f = a[0].width, d++ > 8 && (f = $(this).attr("width"));
                a = null } f.toString().indexOf("px") != -1 && (f = f.replace("px", "")), "blk_navbar" == h ? $(this).css({ "max-width": f + "px", display: "inline-block" }) : $(this).css({ "max-width": f + "px", display: "block" }) } }), "blk_group" == h && $("img", $(".bmeImageTable", b)).each(function () { g = $(this).attr("width"), c = $(this).css("max-width"), parseWidth(g) > parseWidth(c) ? $(this).attr("width", parseWidth(c)) : parseWidth(g) > 0 && "undefined" != g && "undefined" != typeof g && $(this).attr("width", parseWidth(g)) }), "blk_card" != h && "blk_imagecaption" != h || $("img", $(".bmeImageTable", b)).each(function () { if (c = parseWidth(GetBorderDetail($(this), "max-width")), "undefined" == typeof c && (c = null), null == c || "none" == c || "0" == c) { if (f = $(this).prop("naturalWidth"), "undefined" == typeof f || "0" == f) { var a = $("<img/>").attr("src", $(this).attr("src")); for (f = "0";
                    "undefined" == typeof f || "0" == f;) setTimeout(function () {}, 5e3), f = a[0].width, d++ > 8 && (f = $(this).attr("width"));
                a = null } f.toString().indexOf("px") != -1 && (f = f.replace("px", "")), $(this).css({ "max-width": f + "px", display: "block" }) } }), "blk_social_follow" == h && "100%" != $(".bmeFollowItem", b).attr("width") && (e = 1); var i = $(b).html(); return $(b).html(""), b = null, i }

function fixRawCodeInit(a) { var b = a,
        c = ""; "undefined" == typeof ImageProxyURL && (ImageProxyURL = ""); var d = "",
        e = "",
        f = a.indexOf("<body"),
        g = a.indexOf("</body>");
    f != -1 && g != -1 && (f = a.indexOf(">", f), f += 1, d = a.substring(0, f), b = a.substring(f, g), e = a.substring(g)); var h = $("<div />"); return h.append(b), $("img", h).each(function () { c = $(this).attr("src"), "undefined" != typeof c && ("" != ImageProxyURL && (0 == c.indexOf("https://") ? c = c : 0 == c.indexOf("http://images.benchmarkemail.com") ? c = c.replace("http://images.benchmarkemail.com", "https://images.benchmarkemail.com") : 0 == c.indexOf("http://benchmarkemail.com/images/") ? c = c.replace("http://benchmarkemail.com/images/", "https://benchmarkemail.com/images/") : c.indexOf(ImageProxyURL) == -1 && (c = ImageProxyURL + c)), $(this).attr("src", c)) }), b = d + $(h).html() + e, $(h).html(""), h = null, b }

function initColors() { setStyleFromSheet("table[name=bmeMainBody]", "background-color"), setStyleFromSheet("[name=bmeMainContentParent]", "border-radius"), setStyleFromSheet("[name=bmeMainColumnParent]", "border-radius"), $("[name=bmeMainContentParent]").css("border-collapse", "separate"), $("[name=bmeMainColumnParent]").css("border-collapse", "separate"); var a = chkColorVal($("[name=bmeMainBody]").css("background-color"));
    $("#pgBGColor").val(a), $("#pgBGColor").next("input").val(hexc(a.toLowerCase())), $("#pgBGColor").next().next("input").val(hexc(a.toLowerCase())), $("[name=bmeMainBody]").attr("bgcolor", hexc(a.toLowerCase())), $("[name=bmeMainBody]").css("background-color", hexc(a.toLowerCase())), setColorBlockForDetail("pre", "[name=bmePreHeader]"), setColorBlockForDetail("hd", "[name=bmeHeader]"), setColorBlockForDetail("bd", "[name=bmeBody]"), setColorBlockForDetail("ft", "[name=bmeFooter]"), null != $("[name=bmeLeftColumn]").html() ? setColorBlockForDetail("col1", "[name=bmeLeftColumn]") : setColorBlockForDetail("col1", "[name=bmeColumn1]"), null != $("[name=bmeRightColumn]").html() ? setColorBlockForDetail("col2", "[name=bmeRightColumn]") : setColorBlockForDetail("col2", "[name=bmeColumn2]"), setColorBlockForDetail("col3", "[name=bmeColumn3]"), setColorBlockForDetail("pft", "[name=bmePreFooter]"), initGlobalStylesColorPicker() }

function initGlobalStylesColorPicker() { $("#dvDesignBlock .color-selection").spectrum({ preferredFormat: "hex", showInput: !0, chooseText: JS_SAVE, cancelText: JS_CANCEL, showPalette: !0, palette: [
            ["transparent", "#ffffff", "#7f7f7f", "#000", "#D0021B", "#16a7e0"]
        ], showSelectionPalette: !0, maxSelectionSize: 6, localStorageKey: "spectrum.signupform" }), $("#dvDesignBlock .color-selection").on("change.spectrum", function (a, b) { "rgba(0, 0, 0, 0)" == b.toRgbString() ? $(this).next().next("input").val("") : $(this).next().next("input").val(b.toHexString()), $(this).next().next("input").change() }), $("#dvDesignBlock .color-selection").on("move.spectrum", function (a, b) { "rgba(0, 0, 0, 0)" == b.toRgbString() ? $(this).next().next("input").val("") : $(this).next().next("input").val(b.toHexString()), $(this).next().next("input").change() }), $("#dvDesignBlock .color-selection").on("hide.spectrum", function (a, b) { "rgba(0, 0, 0, 0)" == b.toRgbString() ? $(this).next().next("input").val("") : $(this).next().next("input").val(b.toHexString()), $(this).next().next("input").change() }) }

function toHex(a) { return hex = a.toString(16), 1 == hex.length && (hex = "0" + hex), 100 == hex && (hex = "FF"), hex.toUpperCase() }

function chkColorVal(a) { return "undefined" == typeof a && (a = ""), a.length > 0 && "transparent" != a.toLowerCase() ? "rgb(" == a.toLowerCase().substring(0, 4) && (a = toHex(a)) : a = "", a }

function setColorBlockForDetail(a, b) { var c = "";
    c = chkColorVal($(b).css("background-color")), $("#" + a + "BGColor").val(c), $("#" + a + "BGColor").next("input").val(hexc(c.toLowerCase())), $("#" + a + "BGColor").next().next("input").val(hexc(c.toLowerCase())), $(b).attr("bgcolor", hexc(c.toLowerCase())), $(b).css({ "background-color": hexc(c.toLowerCase()) }), c = null; try { c = $(b + ' td[name="tblCell"]').css("color") } catch (d) { c = null } null != c && void 0 != typeof c && $(b).css("color", hexc(c.toLowerCase())), c = GetBorderDetail(b, "top-width").replace("px", ""), $("#" + a + "TBorder").val(c), "" == c || "0" == c ? ($("#" + a + "TBorderStyle").val("none"), $("#" + a + "TBGBorder").val("rgba(0,0,0,0)"), $("#" + a + "TBGBorder").next("input").val(""), $("#" + a + "TBGBorder").next().next("input").val(""), $(b).css({ "border-top-color": "transparent", "border-top-style": "none", "border-top-width": "0" })) : (clr2 = $(b).css("border-top-style"), "" != clr2 && "undefined" != typeof clr2 || (clr2 = "none"), $("#" + a + "TBorderStyle").val(clr2), updateGlobalStylesBorderDefaults(a + "TBorderStyle", clr2), clr1 = chkColorVal($(b).css("border-top-color")), $("#" + a + "TBGBorder").val(clr1), $("#" + a + "TBGBorder").next().next("input").val(hexc(clr1.toLowerCase())), $("#" + a + "TBGBorder").removeClass("transbg"), $(b).css({ "border-top-color": hexc(clr1.toLowerCase()), "border-top-style": clr2, "border-top-width": c + "px" })), c = GetBorderDetail(b, "bottom-width").replace("px", ""), $("#" + a + "BBorder").val(c), "0" == c || "" == c ? ($("#" + a + "BBorderStyle").val("none"), $("#" + a + "BBGBorder").val("rgba(0,0,0,0)"), $("#" + a + "BBGBorder").next("input").val(""), $("#" + a + "BBGBorder").next().next("input").val(""), $(b).css({ "border-bottom-color": "transparent", "border-bottom-style": "none", "border-bottom-width": "0" })) : (clr2 = $(b).css("border-bottom-style"), "" != clr2 && "undefined" != typeof clr2 || (clr2 = "none"), $("#" + a + "BBorderStyle").val(clr2), updateGlobalStylesBorderDefaults(a + "BBorderStyle", clr2), clr1 = chkColorVal($(b).css("border-bottom-color")), $("#" + a + "BBGBorder").val(clr1), $("#" + a + "BBGBorder").next("input").val(hexc(clr1.toLowerCase())), $("#" + a + "BBGBorder").next().next("input").val(hexc(clr1.toLowerCase())), $("#" + a + "BBGBorder").removeClass("transbg"), $(b).css({ "border-bottom-color": hexc(clr1.toLowerCase()), "border-bottom-style": clr2, "border-bottom-width": c + "px" })), c = GetBorderDetail(b, "left-width").replace("px", ""), clr2 = $(b).css("border-left-style"), "" != clr2 && "undefined" != typeof clr2 || (clr2 = "none"), clr1 = chkColorVal($(b).css("border-left-color")), "" == c || "0" == c || "none" == clr2 || "" == clr1 ? ($("#" + a + "LBorder").val("0"), $("#" + a + "LBorderStyle").val("none"), $("#" + a + "LBGBorder").val("rgba(0,0,0,0)"), $("#" + a + "LBGBorder").next("input").val(""), $("#" + a + "LBGBorder").next().next("input").val(""), $(b).css({ "border-left-color": "transparent", "border-left-style": "none", "border-left-width": "0" })) : ($("#" + a + "LBorder").val(c), $("#" + a + "LBorderStyle").val(clr2), updateGlobalStylesBorderDefaults(a + "LBorderStyle", clr2), $("#" + a + "LBGBorder").val(clr1), $("#" + a + "LBGBorder").next("input").val(hexc(clr1.toLowerCase())), $("#" + a + "LBGBorder").next().next("input").val(hexc(clr1.toLowerCase())), $(b).css({ "border-left-color": hexc(clr1.toLowerCase()), "border-left-style": clr2, "border-left-width": c + "px" })), c = GetBorderDetail(b, "right-width").replace("px", ""), clr2 = $(b).css("border-right-style"), "" != clr2 && "undefined" != typeof clr2 || (clr2 = "none"), clr1 = chkColorVal($(b).css("border-right-color")), "" == c || "0" == c || "none" == clr2 || "" == clr1 ? ($("#" + a + "RBorder").val("0"), $("#" + a + "RBorderStyle").val("none"), $("#" + a + "RBGBorder").val("rgba(0,0,0,0)"), $("#" + a + "RBGBorder").next("input").val(""), $("#" + a + "RBGBorder").next().next("input").val(""), $(b).css({ "border-right-color": "transparent", "border-right-style": "none", "border-right-width": "0" })) : ($("#" + a + "RBorder").val(c), $("#" + a + "RBorderStyle").val(clr2), updateGlobalStylesBorderDefaults(a + "RBorderStyle", clr2), $("#" + a + "RBGBorder").val(clr1), $("#" + a + "RBGBorder").next("input").val(hexc(clr1.toLowerCase())), $("#" + a + "RBGBorder").next().next("input").val(hexc(clr1.toLowerCase())), $(b).css({ "border-right-color": hexc(clr1.toLowerCase()), "border-right-style": clr2, "border-right-width": c + "px" })) }

function colorApply(a) { ShowCustomSchemeSave(); var b = $(a).val();
    isValidHexWithoutHash(b) && (b = "#" + b); var c = $(a).prev().prev("input").attr("id"); "" == b && (b = "transparent"), "transparent" == b ? (b = "", 0 == $(".sp-container:visible").length && $("#" + c).spectrum("set", "rgba(0, 0, 0, 0)")) : 0 == $(".sp-container:visible").length && $("#" + c).spectrum("set", b); var d = []; "pgBGColor" == c ? d[0] = { rule: "[name=bmeMainBody]", style: "background-color", value: b } : "pgBGBorder" == c || "preTBGBorder" == c || "frmBGBorder" == c || "preBBGBorder" == c || "hdTBGBorder" == c || "hdBBGBorder" == c || "bdTBGBorder" == c || "bdBBGBorder" == c || "ftTBGBorder" == c || "ftBBGBorder" == c || "pftTBGBorder" == c || "pftBBGBorder" == c || "col1TBGBorder" == c || "col1RBGBorder" == c || "col1BBGBorder" == c || "col2TBGBorder" == c || "col2LBGBorder" == c || "col2BBGBorder" == c || "col3TBGBorder" == c || "col3BBGBorder" == c || "col3RBGBorder" == c ? styleApply(a) : "preBGColor" == c ? d[0] = { rule: "[name=bmePreHeader]", style: "background-color", value: b } : "hdBGColor" == c ? d[0] = { rule: "[name=bmeHeader]", style: "background-color", value: b } : "bdBGColor" == c ? d[0] = { rule: "[name=bmeBody]", style: "background-color", value: b } : "ftBGColor" == c ? d[0] = { rule: "[name=bmeFooter]", style: "background-color", value: b } : "pftBGColor" == c ? d[0] = { rule: "[name=bmePreFooter]", style: "background-color", value: b } : "col1BGColor" == c ? (d[0] = { rule: "[name=bmeLeftColumn]", style: "background-color", value: b }, d[1] = { rule: "[name=bmeColumn1]", style: "background-color", value: b }) : "col2BGColor" == c ? (d[0] = { rule: "[name=bmeRightColumn]", style: "background-color", value: b }, d[1] = { rule: "[name=bmeColumn2]", style: "background-color", value: b }) : "col3BGColor" == c && (d[0] = { rule: "[name=bmeColumn3]", style: "background-color", value: b }), d.length > 0 && ApplyCustomChanges(d) }

function ApplyCustomChanges(a) { if (!isSchemeSelection) { for (var b = "", c = "", d = a.length - 1; d >= 0; d--) "px" == a[d].value ? a[d].value = "0px" : "" == a[d].value && a[d].style.indexOf("color") != -1 && (a[d].value = "transparent"); var e = null; if ("" != $("#_BME_dvEditArea").html() && (c = $($("style", $("#_BME_dvEditArea"))[0]).html()), "" != c) { var f = "/*** BMEMBF END ***/";
            c = replaceAll(c, "\n\n", ""), b = c, b.indexOf(f) != -1 && (b = b.substring(b.indexOf(f) + f.length)); var g = new CSSParser;
            e = g.parseCSS(b) } for (var h = 0, i = 0, j = 0, k = "", l = "", m = 0, d = 0, n = a.length; d < n; d++) { if (k = a[d].rule, "background-color" == a[d].style) { if ("[name=bmeMainColumn]" == k && (k = "[name=bmeMainBody]"), $(k).attr("bgcolor", a[d].value), $(k).css({ "background-color": a[d].value }), "[name=bmeLeftColumn]" == k || "[name=bmeRightColumn]" == k || "[name=bmeColumn1]" == k || "[name=bmeColumn2]" == k || "[name=bmeColumn3]" == k) { for (l = $(k).parent(), m = 0; !$(l).hasClass("tdPart") && m < 6 && null != $(l).html();) l = $(l).parent(), m++;
                    $(l).hasClass("tdPart") && $(l).attr("bgcolor", a[d].value).css({ "background-color": a[d].value }) } } else $(k).css(a[d].style, a[d].value);
            i = 0; for (var o = 0, p = e.length; o < p; o++)
                if (RemoveQuotes(e[o].rule).indexOf(RemoveQuotes(a[d].rule)) != -1) { h = 0; for (var q = 0, r = e[o].properties.length; q < r; q++) RemoveQuotes(e[o].properties[q].property) == RemoveQuotes(a[d].style) && (h = 1, i = 1, e[o].properties[q].value = a[d].value);
                    0 == h && 0 == i && (j = e[o].properties.length, e[o].properties[j] = { property: a[d].style, value: a[d].value }, i = 1) } if (0 == i) { j = e.length; var s = [];
                s[0] = { property: a[d].style, value: a[d].value }, e[j] = {}, e[j].rule = a[d].rule, e[j].properties = s } } if ("" != c) { for (var t = "", o = 0, p = e.length; o < p; o++) { t += e[o].rule + " {"; for (var q = 0, r = e[o].properties.length; q < r; q++) t += e[o].properties[q].property + ":" + e[o].properties[q].value + ";";
                t += "} " } c = c.replace(b, t), $($("style", $("#_BME_dvEditArea"))[0]).html(c) } } }

function destroyToolBarColorPicker() { $("#textColorSwatch").off("click"), $("#dvEditTool #toolbarColor").off("beforeShow.spectrum"), $("#dvEditTool #toolbarColor").off("change.spectrum"), $("#dvEditTool #toolbarColor").off("move.spectrum"), $("#dvEditTool #toolbarColor").off("hide.spectrum"), $("#dvEditTool #toolbarColor").spectrum("destroy") }

function toolbarColorPicker(a) { tinymce.activeEditor ? (RangeSelect(), "undefined" == typeof currentFontColor && ("footer" != blkObjectData.type && "permission" != blkObjectData.type || (currentFontColor = $(tinymce.activeEditor.selection.getNode()).css("color"))), currentToolOption = "textcolor", 0 == $(".sp-container:visible").length && $("#dvEditTool #toolbarColor").spectrum("set", currentFontColor), SetEditorColor(a)) : "button" == blkObjectData.type ? (currentFontColor = $("a", _editBlock).css("color"), SetTextColor(a)) : "socialshare" == blkObjectData.type || "socialfollow" == blkObjectData.type ? ($("#itemSetting", "#dvSettingBlock").is(":visible") ? currentFontColor = $("a", _editBlockItem).first().css("color") : (_editBlockItem = null, currentFontColor = $("a", _editBlock).first().css("color")), SetTextColor(a)) : "footer" != blkObjectData.type && "permission" != blkObjectData.type && "rsshead" != blkObjectData.type && "rssfeed" != blkObjectData.type && "navbar" != blkObjectData.type || (currentFontColor = $(editTarget1).css("color"), SetTextColor(a)) }

function initToolBarColorpicker() { $("#textColorSwatch").on("click", function (a) { return $("#dvEditTool #toolbarColor").spectrum("toggle"), !1 }), $("#dvEditTool #toolbarColor").spectrum({ preferredFormat: "hex", showInput: !0, chooseText: JS_SAVE, cancelText: JS_CANCEL, showPalette: !0, palette: [
            ["#ffffff", "#b5b5b5", "#7f7f7f", "#000", "#D0021B", "#16a7e0"]
        ], showSelectionPalette: !0, maxSelectionSize: 6, localStorageKey: "spectrum.signupform" }), $("#dvEditTool #toolbarColor").on("beforeShow.spectrum", function (a, b) { tmpColorVal = "", $(".format-tool-menu").removeClass("visible") }), $("#dvEditTool #toolbarColor").on("change.spectrum", function (a, b) { tmpColorVal != b.toRgbString() && tinyMCEColorVal != b.toRgbString() && (tmpColorVal = b.toRgbString(), toolbarColorPicker(b)) }), $("#dvEditTool #toolbarColor").on("move.spectrum", function (a, b) { tmpColorVal != b.toRgbString() && tinyMCEColorVal != b.toRgbString() && (tmpColorVal = b.toRgbString(), toolbarColorPicker(b)) }), $("#dvEditTool #toolbarColor").on("hide.spectrum", function (a, b) { tmpColorVal != b.toRgbString() && tinyMCEColorVal != b.toRgbString() && (tmpColorVal = b.toRgbString(), toolbarColorPicker(b)) }) }

function SetEditorColor(a) { var b = tinymce.activeEditor;
    null != b && null != currentBookmark && tinyMCE.activeEditor.selection.moveToBookmark(currentBookmark), tinyMCE.execCommand("forecolor", !1, a) }

function SetTextColor(a) { "button" == blkObjectData.type ? $("a, span", _editBlock).css("color", a) : "footer" == blkObjectData.type ? $(editTarget1).css("color", a) : "permission" == blkObjectData.type || "rsshead" == blkObjectData.type || "rssfeed" == blkObjectData.type || "navbar" == blkObjectData.type ? ($(editTarget1).css("color", a), "navbar" == blkObjectData.type ? blkObjectData.applyAll() : "rsshead" == blkObjectData.type || "rssfeed" == blkObjectData.type) : "socialshare" == blkObjectData.type ? $("#itemSetting").hasClass("current") ? $("div, span", _editBlockItem).last().css("color", a) : (_editBlockItem = null, $("div, span", $(".bmeShareItem", _editBlock)).css("color", a)) : "socialfollow" == blkObjectData.type && ($("#itemSetting").hasClass("current") ? $("div", _editBlockItem).last().css("color", a) : (_editBlockItem = null, $("div", $(".bmeFollowItemText", _editBlock)).css("color", a))) }

function LoadDefaultSchemes() { bmeAjax.AuthPost({ url: "/Emails/Scheme?Language=" + languageVal + "&FilterType=type&Filter=default", type: "GET", success: function (a) { "1" == a.Response.Status && RenderColorSchemeList(a.Response.Data, "Default") }, error: function (a, b, c) { alert(b) } }) }

function LoadSavedSchemes() { bmeAjax.AuthPost({ url: "/Emails/Scheme?Language=" + languageVal + "&FilterType=type&Filter=saved", type: "GET", success: function (a) { "1" == a.Response.Status && RenderColorSchemeList(a.Response.Data, "Saved") }, error: function (a, b, c) { alert(b) } }) }

function RenderColorSchemeList(a, b) { var c = "<li><ul class=colorscheme>",
        d = ""; if (a.length > 0) { for (var e = 0, f = a.length; e < f; e++) d = "<li schemeid=" + a[e].ID + ' schemename="' + a[e].Name + '" onClick="javascript:clickColorScheme(this);">', d += '<a class="colorscheme-swatch" title="' + a[e].Name + '">', d += '<span style="background: ' + a[e].Colors[0] + ';" class="swatch-pg"></span>', d += '<span style="background: ' + a[e].Colors[1] + ';" class="swatch-prehdr"></span>', d += '<span style="background: ' + a[e].Colors[2] + ';" class="swatch-hdr"></span>', d += '<span style="background: ' + a[e].Colors[3] + ';" class="swatch-body"></span>', d += '<span style="background: ' + a[e].Colors[4] + ';" class="swatch-footer"></span>', d += "</a></li>", c += d, (e + 1) % 12 == 0 && (c += "</li></ul>", e + 1 < f && (c += "<li><ul class=colorscheme>"));
        f % 12 != 0 && (c += "</li></ul>"), $("#listScheme" + b).empty(), $("#listScheme" + b).html(c), $("#listScheme" + b + "Pager").removeClass("hidden") } else c = JS_NO_SCHEMES_FOUND, $(".label-small", $(".scheme-panel-" + b.toLowerCase())).addClass("hidden"), $("#listScheme" + b).empty(), $("#listScheme" + b).html(c), $("#listScheme" + b + "Pager").addClass("hidden");
    UpdateSelectedScheme() }

function UpdateSelectedScheme() { $("[name='dvThemeSelected']").html(""); var a = "";
    $("#ancDeleteScheme").addClass("hidden"), $("li", $("#listSchemeDefault")).each(function () { a = $(this).attr("schemeid"), a == CurrentSchemeID && ($("[name='dvThemeSelected']", ".scheme-panel-default").html($(this).attr("schemename")), $(this).addClass("selected")) }), $("li", $("#listSchemeSaved")).each(function () { a = $(this).attr("schemeid"), a == CurrentSchemeID && ($("[name='dvThemeSelected']", ".scheme-panel-saved").html($(this).attr("schemename")), $("#listSchemeSaved").attr("schemeid", CurrentSchemeID), $("#ancDeleteScheme").removeClass("hidden"), $(this).addClass("selected")) }), "" == $(".rslides_tabs").html() && $(".rslides").responsiveSlides({ auto: !1, pager: !0 }) }

function clickColorScheme(a) { var b = !0; if (isCustomScheme && (b = confirm(JS_CONFIRM_LOSE_CUSTOM_COLORS)), b) { $("li", ".colorscheme").removeClass("selected"), $(a).addClass("selected"); var c = $(a).attr("schemeid");
        CurrentSchemeID = c, $("span[name=dvThemeSelected]").html($(a).attr("schemename")), $(".scheme-panel-saved").is(":visible") ? ($(".label-small", $(".color-scheme-saved")).removeClass("hidden"), $("#listSchemeSaved").attr("schemeid", c)) : ($(".label-small", $(".color-scheme-default")).removeClass("hidden"), $(".label-small", $(".color-scheme-saved")).addClass("hidden"), $("#listSchemeSaved").attr("schemeid", "0")), UpdateSelectedScheme(), ShowRefresh(" Applying Color Scheme "); var d = new Object;
        d.SchemeID = c, bmeAjax.AuthPost({ url: "/Emails/" + _EID, type: "PATCH", data: { Detail: d }, success: function (a) { "1" == a.Response.Status && RefreshColorScheme(a.Response.Data.CSSCode) }, error: function (a, b, c) { alert(b) } }) } }

function RefreshColorScheme(a, b) { if (null != a && a.length > 0) { if (isSchemeSelection = !0, HideCustomSchemeSave(), ResetColors(b), "" != $("#_BME_dvEditArea").html()) try { $($("style", $("#_BME_dvEditArea"))[0]).html(a) } catch (c) {} initColors(), CloseRefresh(), isSchemeSelection = !1, isCustomScheme = !1 } }

function HideCustomSchemeSave() { $(".editor-save").addClass("hidden"), $(".editor-save-menu").addClass("hidden") }

function ShowCustomSchemeSave() { isCustomScheme = !0, $(".editor-save").removeClass("hidden") }

function OpenSchemeDeleteDialog() { toolBar = "schemedelete", $("#dvDeleteCustomScheme").modal("show") }

function InitInterface() {
    BLANK_IMAGE_CODE = '<div class="blk_img_dd_wrap"><div class="blk_img_drop" style="display: inline-block;"><span class="blk_img_drop_icon"></span><div class="blk_img_txt_wrap"><p class="blk_img_drop_txt" style="display: block;">' + JS_DRAG_N_DROP + '</p><p class="blk_img_drop_link" style="display: block;"><span>' + JS_OR + ' </span><a name="ancUploadImage">' + JS_BROWSE_IMAGE + "</a></p></div></div></div>", BLANK_VIDEO_CODE = '<div class="blk_vid_dd_wrap"><div class="blk_vid_dd"><a class="blk_vid_txt" name="ancUploadVideo">' + JS_LINK_TO_VIDEO + "</a></div>",
        "undefined" == typeof IMAGE_PROXY_URL && (IMAGE_PROXY_URL = ""), ImageProxyURL = IMAGE_PROXY_URL, IMAGE_PROXY_URL = "", (isFirefox || isIE8toEdge) && (forceFallbackValue = !1), $(".full-width").click(function () { fullWidth() }), $("#ancLayout").click(function () { CheckLoaded() && ($("#ancDesign").parent().hasClass("selected") && SaveEmail(4), $("li", ".dd-subnav-tabs").removeClass("selected"), $(".editor-sidebar").removeClass("sidebar-styles"), $(this).parent().addClass("selected"), DisableToolbar(1), $("#dvTemplateBlock").removeClass("hidden"), $("#dvSettingBlock, #dvSettingDefaultBlock, " + toolbarCtrl + " , #dvEditBlock, #dvNormalToolbar, #dvDesignBlock, #dvContentBlock, .editor-save-menu, .editor-template, #ancAreaDD, .sidebar-editblock-name").addClass("hidden"), $(".editor-save").addClass("hide"), $(".full-width").addClass("hidden"), $(".editor-tools").addClass("no-full-width"), $(".editor-sidebar, .editor-main").removeClass("bar-visible"), $(".editor-main").addClass("noformat"), AreaDeHiLite()) }), setCookie("PAST_URL", location.href, 1), $("#ancContent").click(function () { "0" == _IS_SAVED && "TEXT" != _EDIT_MODE && "CUSTOM" != _EDIT_MODE ? $("#dialog-needlayout").modal("show") : (CheckLoaded() && ($("#ancDesign").parent().hasClass("selected") && SaveEmail(4), $("#dvNormalToolbar, .editor-template, #dvContentBlock, #dvEditBlock, " + toolbarCtrl).removeClass("hidden"), $(".full-width").removeClass("hidden"), $(".editor-tools").removeClass("no-full-width"), $(".editor-sidebar, .editor-main").removeClass("bar-visible").addClass("bar-visible"), $(".editor-save-menu, #dvDesignBlock, #dvTemplateBlock, #dvSettingDefaultBlock, #dvSettingBlock, #ancAreaDD, .sidebar-editblock-name").addClass("hidden"), $(".editor-save").addClass("hide"), $(".editor-sidebar").addClass("sidebar-styles"), $("li", ".dd-subnav-tabs").removeClass("selected"), $(this).parent().addClass("selected"), AreaDeHiLite(), DisableToolbar(0), LoadToolBar(-2), $(".editor-main").removeClass("noformat")), CloseRefresh()) }), $("#ancDesign").click(function () { "0" == _IS_SAVED && "TEXT" != _EDIT_MODE && "CUSTOM" != _EDIT_MODE ? $("#dialog-needlayout").modal("show") : CheckLoaded() && (forceHideGuide(), unCheckGuide(), $(".editor-save-menu, #dvContentBlock, #dvTemplateBlock, #dvSettingDefaultBlock, #dvSettingBlock, .sidebar-editblock-name, " + toolbarCtrl).addClass("hidden"), $(".full-width").addClass("hidden"), $(".editor-tools").addClass("no-full-width"), $(".editor-sidebar, .editor-main").removeClass("bar-visible").addClass("bar-visible"), $(".editor-save").removeClass("hide"), $(".editor-sidebar").removeClass("sidebar-styles"), $("li", ".dd-subnav-tabs").removeClass("selected"), $(this).parent().addClass("selected"), $("#dvNormalToolbar, #dvDesignBlock, #dvEditBlock, .editor-template").removeClass("hidden"), $(".editor-main").removeClass("noformat"), DisableToolbar(0), $(".sidebar-selection-nav", "#dvDesignBlock").accordion("refresh"), "" == $(".rslides_tabs").html() && $(".rslides").responsiveSlides({ auto: !1, pager: !0 }), $("div.ui-accordion-content").css("height", "auto"), $("#ancAreaDD").removeClass("hidden"), $("div.ui-accordion-content:first", "#dvDesignBlock").is(":visible") || $("a.ui-accordion-header:first", "#dvDesignBlock").click()) }), $("#ancSaveEmail").click(function () { 1 == is_saving_email ? (ShowRefresh(), pending_save_queue = "SaveEmail0") : SaveEmail(0) }), $("#ancSaveEmailContinue").click(function () { checkPreSave() && (1 == is_saving_email ? (ShowRefresh(), pending_save_queue = "SaveEmail1") : SaveEmail(1)) }), $("a#ancSpamCheck").click(function () { SaveEmail(4, "OpenSpamCheckDialog()") }), $("a#ancPrintVersion").click(function () { OpenPrintVersion() }), InitLayouts(), InitSchemes(), $("#_BME_dvEditArea").click(function (a) { if (null != blkObjectData) { var b = checkIsRoot(a.target);
                b && (CheckLoaded(), $("#ancContent").click()) } }), $(".framed-bg").click(function () { return setEmailLayoutFrame(!0), !1 }), $(".fullwidth-bg").click(function () { return setEmailLayoutFrame(!1), !1 }), $(".sidebar-selection-nav", "#dvDesignBlock").accordion({ heightStyle: "content", autoHeight: !1, collapsible: !0, active: !1 }), $(".editor-slider", "#fldFrameBorderRadius").slider({ min: 0, value: 0, max: 20, step: 5, slide: function (a, b) { $(".new-slider-val", $(".editor-slider", "#fldFrameBorderRadius")).text(b.value), ApplyCustomChanges(applyFrameStyle(b.value)) }, start: function (a, b) { $(".new-slider-val", $(".editor-slider", "#fldFrameBorderRadius")).removeClass("hidden") }, stop: function (a, b) { $(".new-slider-val", $(".editor-slider", "#fldFrameBorderRadius")).delay(400).fadeOut(200) } }).find(".ui-slider-handle").append($("<div />").css("display", "none").addClass("new-slider-val")), $(".new-slider-val", $(".editor-slider", "#fldFrameBorderRadius")).text("0"), $("#chkFrameInclude", "#fldFrameBorderInclude").click(function () { ApplyCustomChanges(applyFrameStyle()) }), checkFrameFull(), $("#dvThemeSelected").html(_CurrentSchemeName), LoadToolBar(-2), $("table[name=bmeMainColumn]").css("overflow", "visible"), $(document).on("click", '#_BME_dvEditArea .blk_wrapper:not([name="blk_blank"])', function (a) { a.preventDefault(), a.stopPropagation(), editBlockHandler(this) }), $(document).on("click", ".int-select", function (a) { event.preventDefault() }), $(document).on("click, mousedown", function (a) { $(a.target).closest(".badge-dd-select").length || $(a.target).closest(".badge-dd-option").length || $(".badge-dd-option").hide(), $(a.target).closest(".tool-borderstyle").length || $(a.target).closest("#panelBorderStyle").length || ($(".tool-borderstyle").removeClass("tool-selected"), $("#panelBorderStyle").hide()) }), $(document).on("click, mousedown", "#ulBadgeList, #ulBadgeList li, #ulBadgeList li img", function (a) { a.stopPropagation() }), $(document).on("click, mousedown", "#panelBorderStyle li, #panelBorderStyle span", function (a) { a.stopPropagation() }), $(document).on("click, mousedown", ".tool-bold, .tool-italic, .tool-underline, .tool-strike, .tool-unlink, .tool-btn-dd, .tool-btn-dd a", function (a) { a.preventDefault() }), $("#ancDeleteNavLink").click(function () { blkObjectData.unbindLink(); var a = parseInt($("#dialog-deletenavlink").attr("linkid")); for (i = blkObjectData.links.length - 1; i >= 0; i--) a == parseInt(blkObjectData.links[i].linkid) && (blkObjectData.links.splice(i, 1), i = -1);
            $(_editBlock).html($(blkObjectData.getHTML(blkObjectData)).html()), blkObjectData.bindLink(), blkObjectData.setHeight(_editBlock), editTarget1 = null, _editBlockItem = null, panelToggle("first"), $(".format-font-style, .format-textcolor, .format-size").addClass("tool-disabled"), LoadToolBar(-1), $("#dialog-deletenavlink").modal("hide") }), $(document).on("click", "#clientSelectAll", function (a) { clientSelectAllToggle() }), $(document).on("click", 'input[name="cltCheck"]', function (a) { subaccountsCheck(!0) }), $(document).on("click", "#ancShare", function (a) { layoutShareConfirm() }), $("#ancUpdateBlockCode").click(function () { updateBlockCode() }), $("#ancSaveCloseBlockCode").click(function () { updateBlockCode("closemodal") }), $("#ancDeleteBlock").click(function () { confirmDeleteBlock() }), $("#ancConfirmLayoutChange").click(function () { var a = $("#dvConfirmLayout").attr("eid");
            bmeAjax.PreLoader("#ancConfirmLayoutChange"), SetLayout(a) }), $("#ancTemplateUseConfirm").click(function () { var a = $("#dvTemplateUse").attr("eid");
            bmeAjax.PreLoader("#ancTemplateUseConfirm"), LayoutTemplateUse(a) }), $("#ancLayoutUseConfirm").click(function () { var a = $("#dvLayoutUse").attr("eid");
            bmeAjax.PreLoader("#ancLayoutUseConfirm"), LayoutUse(a) }), $("#ancResetLayoutConfirm").click(function () { bmeAjax.PreLoader("#ancResetLayoutConfirm"), bmeAjax.AuthPost({ url: "/Emails/" + _EID + "/Restore", type: "POST", success: function (a) { refreshPage() }, error: function (a, b, c) { alert(b) } }) }), $("#ancConfirmSchemeDelete").click(function () { bmeAjax.PreLoader("#ancConfirmSchemeDelete"); var a = $("#listSchemeSaved").attr("schemeid");
            bmeAjax.AuthPost({ url: "/Emails/Scheme/" + a, type: "DELETE", success: function (a) { bmeAjax.RemovePreLoader("#ancConfirmSchemeDelete"), "1" == a.Response.Status && (LoadSavedSchemes(), $("#dvDeleteCustomScheme").modal("hide")) }, error: function (a, b, c) { bmeAjax.RemovePreLoader("#ancConfirmSchemeDelete"), alert(b) } }) }), $("#ancLayoutShareConfirm").click(function () { layoutShareConfirm() }), $("#ancLayoutShareConfirm").click(function () { fullWidth() }), SetPreviewDetails(0, "false", "false")
}

function InitSchemes() { LoadDefaultSchemes(), LoadSavedSchemes(), $("#txtCustomSchemeName").keyup(function () { var a = $(this).val().trim(),
            b = $("#ancAgreeSaveCustomScheme"); "" != a ? b.prop("disabled", !1) : b.prop("disabled", !0) }), $("#ancSaveColor").click(function () { $("#txtCustomSchemeName").val(""), $("#ancAgreeSaveCustomScheme").prop("disabled", !0), $(".editor-save-menu, .editor-save-menu input, .editor-save-menu label, #ancCancelSaveCustomScheme, #ancAgreeSaveCustomScheme").removeClass("hidden"), $(".save-scheme-msg, .error-scheme-msg, #ancCloseSaveCustomScheme").addClass("hidden") }), $("#ancCloseSaveCustomScheme").click(function () { HideCustomSchemeSave() }), $("#ancCancelSaveCustomScheme").click(function () { $(".editor-save-menu").addClass("hidden") }), $("#ancAgreeSaveCustomSchemeOverwrite").click(function () { var a = $($("style", $("#_BME_dvEditArea"))[0]).html(),
            b = "/*** BMEMBF END ***/";
        a.indexOf(b) != -1 && (a = a.substring(a.indexOf(b) + b.length)), $(".error-scheme-msg").addClass("hidden"); var c = new Object;
        c.Name = $("#txtCustomSchemeName").val(), c.CSSCode = a, bmeAjax.PreLoader("#ancAgreeSaveCustomSchemeOverwrite"), bmeAjax.AuthPost({ url: "/Emails/Scheme?Language=" + languageVal + "&Overwrite=1", type: "PATCH", data: { Detail: c }, success: function (a) { bmeAjax.RemovePreLoader("#ancAgreeSaveCustomSchemeOverwrite"), "1" == a.Response.Status ? ($(".editor-save-menu input, .editor-save-menu label, #ancCancelSaveCustomScheme, #ancAgreeSaveCustomScheme").addClass("hidden"), $(".save-scheme-msg, #ancCloseSaveCustomScheme").removeClass("hidden"), $("#dialog-schemeoverwrite").modal("hide"), isCustomScheme = !1, LoadSavedSchemes()) : ($("#schemeOverwriteError").html(a.Response.Error[0].Message), $("#schemeOverwriteError").removeClass("hidden")) }, error: function (a, b, c) { bmeAjax.RemovePreLoader("#ancAgreeSaveCustomSchemeOverwrite"), alert(b) } }) }), $("#ancAgreeSaveCustomScheme").click(function () { bmeAjax.PreLoader("#ancAgreeSaveCustomScheme"), $(".error-scheme-msg").addClass("hidden"); var a = $($("style", $("#_BME_dvEditArea"))[0]).html(),
            b = "/*** BMEMBF END ***/";
        a.indexOf(b) != -1 && (a = a.substring(a.indexOf(b) + b.length)); var c = new Object; return c.Name = $("#txtCustomSchemeName").val(), c.CSSCode = a, bmeAjax.AuthPost({ url: "/Emails/Scheme?Language=" + languageVal, type: "PATCH", data: { Detail: c }, success: function (a) { bmeAjax.RemovePreLoader("#ancAgreeSaveCustomScheme"), "1" == a.Response.Status ? ($(".editor-save-menu input, .editor-save-menu label, #ancCancelSaveCustomScheme, #ancAgreeSaveCustomScheme").addClass("hidden"), $(".save-scheme-msg, #ancCloseSaveCustomScheme").removeClass("hidden"), isCustomScheme = !1, LoadSavedSchemes()) : "-3" == a.Response.Error[0].Code ? ($("#schemeOverwriteError").addClass("hidden"), $("#dialog-schemeoverwrite").modal("show")) : ($(".error-scheme-msg").html(a.Response.Error[0].Message), $(".error-scheme-msg").removeClass("hidden")) }, error: function (a, b, c) { bmeAjax.RemovePreLoader("#ancAgreeSaveCustomScheme"), alert(b) } }), !1 }), $(".color-scheme-saved").click(function () { return $(".scheme-panel-default").addClass("hidden"), $(".scheme-panel-saved").removeClass("hidden"), $(".color-scheme-default").removeClass("selected"), $(".label-small", $(".color-scheme-saved")).addClass("hidden"), $(this).addClass("selected"), !1 }), $(".color-scheme-default").click(function () { return $(".scheme-panel-saved").addClass("hidden"), $(".scheme-panel-default").removeClass("hidden"), $(".color-scheme-saved").removeClass("selected"), $(this).addClass("selected"), !1 }), $("a#ancDeleteScheme").click(function () { var a = $("#listSchemeSaved").attr("schemeid");
        null != a && "0" != a && OpenSchemeDeleteDialog() }) }

function InitLayoutImages() { var a = "",
        b = null;
    $(".blk_img_dd_wrap").each(function () { a = $(this).width(), b = $(this).parent(), setImageSetting(a, b) }) }

function setImageSetting(a, b) { a < 60 ? ($(".blk_img_drop_txt, .blk_img_drop_link", $(b)).css("display", "none"), $(".blk_img_txt_wrap", $(b)).css({ "float": "none", display: "" }), $(".blk_img_drop_icon", $(b)).html('<img src="' + smImage + '" width="' + (a - 10) + '" name="bmeplcholderimage" style="max-width:43px;display:block;">'), $(".blk_img_drop_icon", $(b)).css({ height: "auto", width: "auto", "background-image": "none", "margin-right": "0px", "margin-bottom": "" }), $(".blk_img_drop", $(b)).css({ padding: "5px", display: "" }), $(".blk_img_dd_wrap", $(b)).css({ padding: "5px" })) : a < 110 ? ($(".blk_img_drop_icon", $(b)).html(""), $(".blk_img_txt_wrap", $(b)).css({ "float": "none", display: "" }), $(".blk_img_drop_txt, .blk_img_drop_link", $(b)).css("display", "none"), $(".blk_img_drop_icon", $(b)).css({ height: "40px", width: "40px", "float": "none", "margin-right": "0px", "margin-bottom": "", "background-image": "" }), $(".blk_img_drop", $(b)).css({ padding: "5px", display: "" }), $(".blk_img_dd_wrap", $(b)).css({ padding: "5px" })) : a < 210 ? ($(".blk_img_drop_txt, .blk_img_drop_link", $(b)).css("display", "block"), $(".blk_img_drop_icon", $(b)).html(""), $(".blk_img_txt_wrap", $(b)).css({ "float": "none", "text-align": "center", margin: "0 auto", display: "block" }), $(".blk_img_drop_icon", $(b)).css({ height: "", width: "", background: "", "float": "none", "margin-right": "0px", "margin-bottom": "7px" }), $(".blk_img_drop_txt", $(b)).css({ "font-size": "16px", "line-height": "22px", "margin-bottom": "0" }), $(".blk_img_drop_link", $(b)).css({ "font-size": "12px", "line-height": "16px" }), $(".blk_img_drop_link span", $(b)).css({ display: "block" }), $(".blk_img_drop", $(b)).css({ padding: "15px", display: "" }), $(".blk_img_dd_wrap", $(b)).css({ padding: "10px" })) : ($(".blk_img_drop_txt, .blk_img_drop_link", $(b)).css("display", "block"), $(".blk_img_drop_icon", $(b)).html(""), $(".blk_img_txt_wrap", $(b)).css({ "float": "", "text-align": "", display: "" }), $(".blk_img_drop_icon", $(b)).css({ height: "", width: "", background: "", "float": "", "margin-right": "", "margin-bottom": "" }), $(".blk_img_drop_txt", $(b)).css({ "font-size": "", "line-height": "", "margin-bottom": "" }), $(".blk_img_drop_link", $(b)).css({ "font-size": "" }), $(".blk_img_drop_link span", $(b)).css({ display: "" }), $(".blk_img_drop", $(b)).css({ padding: "", display: "inline-block" }), $(".blk_img_dd_wrap", $(b)).css({ padding: "" })) }

function InitPage() { ShowRefresh(), null != editdialog && (editdialog.dialog("close"), EditModeOn = !1, newobjectcreate = 0), $("#_BME_dvEditArea").empty(), bmeAjax.AuthPost({ url: "/Emails/" + _EID + "?Language=" + languageVal, type: "GET", success: function (a) { "1" == a.Response.Status && RefreshContentsNormal(a.Response.Data.PreviewContent) }, error: function (a, b, c) { alert(b) } }) }

function GetEmailHTML() { var a = $("[name=bmeMainBody]").clone();
    purge($("[name='blk_blank']", $(a))), $("[name='blk_blank']", $(a)).remove(), $("table.mceLayout", $(a)).remove(), $("div.blk_wrapper", $(a)).each(function () { "" == $(this).html() && (purge($(this)), $(this).remove()) }), $("div.blk_wrapper", $(a)).each(function () { $(this).parent().hasClass("blk_container") || (console.error("Rearranging incorrect blocks"), console.log("block with issue", $(this).attr("id"))) }), $(".blk_parent1", $(a)).attr("align", "center"), $(".blk_wrapper", $(a)).removeAttr("draggable"), $("img", $(a)).removeAttr("draggable"), $(".sortable-drag", $(a)).removeClass("sortable-drag"), $(".sortable-active-section", $(a)).removeClass("sortable-active-section"), $("#bmeMainColumn", $(a)).removeAttr("id"), $("#bmeLeftColumn", $(a)).removeAttr("id"), $("#bmeRightColumn", $(a)).removeAttr("id"), $("#bmeColumn1", $(a)).removeAttr("id"), $("#bmeColumn2", $(a)).removeAttr("id"), $("#bmeColumn3", $(a)).removeAttr("id"), $("#bmeBody", $(a)).removeAttr("id"), $("#bmePreHeader", $(a)).removeAttr("id"), $("#bmeHeader", $(a)).removeAttr("id"), $("#bmePreFooter", $(a)).removeAttr("id"), $("#bmeFooter", $(a)).removeAttr("id"), $(".ui-sortable", $(a)).removeClass("ui-sortable"), $(".ui-droppable", $(a)).removeClass("ui-droppable"), purge($(".content-block-nav", $(a))), $(".content-block-nav", $(a)).remove(), $(".blk_edit", $(a)).removeClass("blk_edit").css({ width: "", overflow: "" }), $(".blk_shadow", $(a)).removeClass("blk_shadow"), $("#editTexttxaEditableContent", $(a)).replaceWith($("#txaEditableContent", $(a)).val()), $("#editTexttxbEditableContent", $(a)).replaceWith($("#txbEditableContent", $(a)).val()), $("#editTexttxcEditableContent", $(a)).replaceWith($("#txcEditableContent", $(a)).val()), $("div.drag-image-box, div.blk_img_dd_wrap, div.blk_vid_dd_wrap, table[name='drag-image-table'], div.miniBorder, div.miniBlockTitle, div.minibar", $(a)).remove(), $("div.guideBlockTitle, div.guideOption, div.guideBorder", $(a)).remove(), $(".areaborder", $(a)).remove(), $("grammarly-extension", $(a)).remove(), $("grammarly-card", $(a)).remove(), $("grammarly-highlights", $(a)).remove(), $("grammarly-button", $(a)).remove(), $("grammarly-button-popups", $(a)).remove(), $(".tblCell", $(a)).css("word-break", "break-word"), $(".bmeCaptionTable", $(a)).css("word-break", "break-word"), $("p", $(a)).css("margin-top", "0"), $("p", $(a)).css("margin-bottom", "0"); var b = $(a).clone(),
        c = b.wrap("<div></div>").parent().html(); return $(b).unwrap().empty(), $(b).remove(), b = null, c }

function refreshPage() { window.location.hash = "refresh", location.reload() }

function removeDisabledControls() { $(".editor-template-opts button").removeAttr("disabled"), $(".dd-subnav-tabs button").removeAttr("disabled"), $("#dvContentBlockList .dd_block").removeClass("disabled") }

function RefreshContentsNormal(a, b) { if (removeDisabledControls(), a = fixRawCodeInit(a), $("#_BME_dvEditArea").append(a), InitControls(), fixStyle(), a.indexOf("<!-- [BME Default Content Template] -->") == -1 && "0" == _IS_SAVED && "TEXT" != _EDIT_MODE && "CUSTOM" != _EDIT_MODE && (_IS_SAVED = "1"), "0" == _IS_SAVED && isFirstContentLoad && "TEXT" != _EDIT_MODE && "CUSTOM" != _EDIT_MODE) isFirstContentLoad = !1, $("#ancLayout").click();
    else { "true" != b && $("#ancContent").click(); var c = window.location.hash;
        c && (c = c.toLowerCase(), "#refresh" == c && (window.location.hash = "", isFirstContentLoad = !1)), checkForOnboarding(), "1" == _LAYOUT_LOADING && (checkDefaultBlocks(), _LAYOUT_LOADING = "0"), $("[data-remove=true]").closest(".blk_wrapper").remove(), checkBorderStyle(), $("#_BME_dvEditArea table[name='blk_blank']").remove(), $("#_BME_dvEditArea table[name='blk_blank']").parent(".blk_wrapper").remove(), checkBlankArea(), gmailClassNameFix(), UpdateFooterDisplay(), isFirstContentLoad === !1 ? "true" == b ? SaveEmail(3) : (ResizeBlocks(), BlockCodeFixes(), SaveEmail(4)) : ResizeBlocks(), "true" != b && (refreshGuide(), bindBlockDrag(), bindNewBlockDrag(), AreaHiLiteRender(), isFirstContentLoad = !1) } $(".fullwidth-bg").hasClass("selected") ? setEmailLayoutFrame(!1, !1) : setEmailLayoutFrame(!0, !1), "undefined" == typeof templateScreen && (templateScreen = ""), "" != templateScreen && null != templateScreen && ($("#ancLayout").click(), listTemplatesClick(), templateScreen = "") }

function ResetColors(a) { $("[name=bmeMainBody]").css("background-color", ""), $("[name=bmeMainBody]").removeAttr("bgcolor"), $("[name=bmeMainColumn]").css({ "border-width": "", "border-style": "", "border-color": "", "background-color": "" }), $("[name=bmeHeader]").removeAttr("bgcolor"), $("[name=bmeHeader]").css({ "background-color": "", "border-top-width": "", "border-top-style": "", "border-top-color": "", "border-bottom-width": "", "border-bottom-style": "", "border-bottom-color": "", "border-color": "", "border-width": "", "border-style": "" }), $("[name=bmePreHeader]").removeAttr("bgcolor"), $("[name=bmePreHeader]").css({ "background-color": "", "border-top-width": "", "border-top-style": "", "border-top-color": "", "border-bottom-width": "", "border-bottom-style": "", "border-bottom-color": "", "border-color": "", "border-width": "", "border-style": "" }), $("[name=bmeBody]").removeAttr("bgcolor"), $("[name=bmeBody]").css({ "background-color": "", "border-top-width": "", "border-top-style": "", "border-top-color": "", "border-bottom-width": "", "border-bottom-style": "", "border-bottom-color": "", "border-color": "", "border-width": "", "border-style": "" }), $("[name=bmeFooter]").removeAttr("bgcolor"), $("[name=bmeFooter]").css({ "background-color": "", "border-top-width": "", "border-top-style": "", "border-top-color": "", "border-bottom-width": "", "border-bottom-style": "", "border-bottom-color": "", "border-color": "", "border-width": "", "border-style": "" }), $("[name=bmeLeftColumn]").removeAttr("bgcolor"), $("[name=bmeLeftColumn]").removeAttr("style"), $("[name=bmeRightColumn]").removeAttr("bgcolor"), $("[name=bmeRightColumn]").removeAttr("style"), $("[name=bmeColumn1]").removeAttr("bgcolor"), $("[name=bmeColumn1]").css({ "background-color": "", "border-right-width": "", "border-right-style": "", "border-right-color": "", "border-top-width": "", "border-top-style": "", "border-top-color": "", "border-bottom-width": "", "border-bottom-style": "", "border-bottom-color": "" }), $("[name=bmeColumn2]").removeAttr("bgcolor"), $("[name=bmeColumn2]").css({ "background-color": "", "border-left-width": "", "border-left-style": "", "border-left-color": "", "border-top-width": "", "border-top-style": "", "border-top-color": "", "border-bottom-width": "", "border-bottom-style": "", "border-bottom-color": "" }), $("[name=bmeColumn3]").removeAttr("bgcolor"), $("[name=bmeColumn3]").css({ "background-color": "", "border-left-width": "", "border-left-style": "", "border-left-color": "", "border-top-width": "", "border-top-style": "", "border-top-color": "", "border-bottom-width": "", "border-bottom-style": "", "border-bottom-color": "" }), $("[name=bmePreFooter]").removeAttr("bgcolor"), $("[name=bmePreFooter]").css({ "background-color": "", "border-top-width": "", "border-top-style": "", "border-top-color": "", "border-bottom-width": "", "border-bottom-style": "", "border-bottom-color": "", "border-color": "", "border-width": "", "border-style": "" }), ResizeBlocks() }

function setColorTextBoxValue() { var a = ["pgBGColor", "preBGColor", "hdBGColor", "bdBGColor", "col1BGColor", "col2BGColor", "col3BGColor", "pftBGColor", "ftBGColor"]; for (i = 0; i < a.length; i++) color = "", box_color = $("#" + a[i]).val(), "transparent" != box_color && "0" != box_color && "" != box_color && ("rgb(" == box_color.toLowerCase().substring(0, 4) ? box_color = hexc(box_color) : "rgba(0, 0, 0, 0)" == box_color && (box_color = ""), color = box_color), $("#" + a[i]).next("input").val(color), $("#" + a[i]).next().next("input").val(color) }

function setStyleFromSheet(a, b) { var c = "",
        d = "",
        e = $($("style", $("#_BME_dvEditArea"))[0]).html(); if (null != e) { var f = "/*** BMEMBF END ***/",
            g = e.indexOf(f),
            h = 0; if (g != -1) { g += f.length, e = e.substring(g), e = ReplaceAll(e, '"', ""); var i = a; for (h = e.indexOf(i); h != -1;) g = e.indexOf("{", h), g += 1, eIndex = e.indexOf("}", g), c = e.substring(g, eIndex), "" == d && (f = b, g = c.indexOf(f), g != -1 && (g += f.length, eIndex = c.indexOf(";", g), eIndex == -1 ? styleAttr = c.substring(g) : styleAttr = c.substring(g, eIndex), d = ReplaceAll(ReplaceAll(ReplaceAll(styleAttr, ":", ""), ";", ""), " ", ""), "border-radius" != b && "border-width" != b || d.indexOf("px") == -1 && (d += "px"), $(a, frameObj).css(b, d))), h = e.indexOf(i, h + 1) } } }

function updateGlobalStylesBorderDefaults(a, b) { $('a[data-globalstyle="' + a + '"]').html("<span name='selected-border-icon' class='border-style-icons border-style-icons-" + b + "'></span>") }

function applyFrameStyle(a) { var b = $(".editor-slider", "#fldFrameBorderRadius").slider("value"); "undefined" != typeof a && (b = a); var c = $("#frmBGBorder").next().next("input").val(),
        d = []; return $(".fullwidth-bg").hasClass("selected") ? (d[0] = { rule: "[name=bmeMainColumnParent]", style: "border-color", value: "transparent" }, d[1] = { rule: "[name=bmeMainColumnParent]", style: "border-width", value: "0px" }, d[2] = { rule: "[name=bmeMainColumnParent]", style: "border-style", value: "none" }, d[3] = { rule: "[name=bmeMainColumnParent]", style: "border-radius", value: "0px" }, d[4] = { rule: "[name=bmeMainColumnParent]", style: "border-collapse", value: "separate" }, d[5] = { rule: "[name=bmeMainColumnParent]", style: "border-spacing", value: "0px" }, d[6] = { rule: "[name=bmeMainColumnParent]", style: "overflow", value: "visible" }, d[7] = { rule: "[name=bmeMainContentParent]", style: "border-color", value: "transparent" }, d[8] = { rule: "[name=bmeMainContentParent]", style: "border-width", value: "0px" }, d[9] = { rule: "[name=bmeMainContentParent]", style: "border-style", value: "none" }, d[10] = { rule: "[name=bmeMainContentParent]", style: "border-radius", value: "0px" }, d[11] = { rule: "[name=bmeMainContentParent]", style: "overflow", value: "hidden" }, d[12] = { rule: "[name=bmeMainContent]", style: "border-color", value: "transparent" }, d[13] = { rule: "[name=bmeMainContent]", style: "border-width", value: "0px" }, d[14] = { rule: "[name=bmeMainContent]", style: "border-style", value: "none" }, d[15] = { rule: "[name=bmeMainContent]", style: "border-radius", value: "0px" }, d[16] = { rule: "[name=bmeMainContent]", style: "border-collapse", value: "separate" }, d[17] = { rule: "[name=bmeMainContent]", style: "border-spacing", value: "0px" }, d[18] = { rule: "[name=bmeMainContent]", style: "overflow", value: "visible" }) : $("#chkFrameInclude", "#fldFrameBorderInclude").is(":checked") ? (d[0] = { rule: "[name=bmeMainColumnParent]", style: "border-color", value: c }, d[1] = { rule: "[name=bmeMainColumnParent]", style: "border-width", value: $("#frmBorder").val() + "px" }, d[2] = { rule: "[name=bmeMainColumnParent]", style: "border-style", value: $("#frmBorderStyle").val() }, d[3] = { rule: "[name=bmeMainColumnParent]", style: "border-radius", value: b + "px" }, d[4] = { rule: "[name=bmeMainColumnParent]", style: "border-collapse", value: "separate" }, d[5] = { rule: "[name=bmeMainColumnParent]", style: "border-spacing", value: "0px" }, d[6] = { rule: "[name=bmeMainColumnParent]", style: "overflow", value: "hidden" }, d[7] = { rule: "[name=bmeMainContentParent]", style: "border-color", value: "transparent" }, d[8] = { rule: "[name=bmeMainContentParent]", style: "border-width", value: "0px" }, d[9] = { rule: "[name=bmeMainContentParent]", style: "border-style", value: "none" }, d[10] = { rule: "[name=bmeMainContentParent]", style: "border-radius", value: "0px" }, d[11] = { rule: "[name=bmeMainContentParent]", style: "overflow", value: "visible" }, d[12] = { rule: "[name=bmeMainColumn]", style: "border-color", value: "transparent" }, d[13] = { rule: "[name=bmeMainColumn]", style: "border-width", value: "0px" }, d[14] = { rule: "[name=bmeMainColumn]", style: "border-style", value: "none" }, d[15] = { rule: "[name=bmeMainColumn]", style: "border-radius", value: "0px" }, d[16] = { rule: "[name=bmeMainColumn]", style: "border-collapse", value: "separate" }, d[17] = { rule: "[name=bmeMainColumn]", style: "border-spacing", value: "0px" }, d[18] = { rule: "[name=bmeMainColumn]", style: "overflow", value: "visible" }, d[19] = { rule: "[name=bmeMainContent]", style: "border-color", value: "transparent" }, d[20] = { rule: "[name=bmeMainContent]", style: "border-width", value: "0px" }, d[21] = { rule: "[name=bmeMainContent]", style: "border-style", value: "none" }, d[22] = { rule: "[name=bmeMainContent]", style: "border-radius", value: "0px" }, d[23] = { rule: "[name=bmeMainContent]", style: "border-collapse", value: "separate" }, d[24] = { rule: "[name=bmeMainContent]", style: "border-spacing", value: "0px" }, d[25] = { rule: "[name=bmeMainContent]", style: "overflow", value: "visible" }, d[26] = { rule: "[name=bmeMainContentParent]", style: "border-color", value: "transparent" }, d[27] = { rule: "[name=bmeMainContentParent]", style: "border-width", value: "0px" }, d[28] = { rule: "[name=bmeMainContentParent]", style: "border-style", value: "none" }, d[29] = { rule: "[name=bmeMainContentParent]", style: "border-radius", value: "0px" }, d[30] = { rule: "[name=bmeMainContentParent]", style: "border-collapse", value: "separate" }, d[31] = { rule: "[name=bmeMainContentParent]", style: "border-spacing", value: "0px" }, d[32] = { rule: "[name=bmeMainColumnParentTable]", style: "border-collapse", value: "separate" }, d[33] = { rule: "[name=bmeMainColumnParentTable]", style: "border-spacing", value: "0px" }) : (d[0] = { rule: "[name=bmeMainContentParent]", style: "border-color", value: c }, d[1] = { rule: "[name=bmeMainContentParent]", style: "border-width", value: $("#frmBorder").val() + "px" }, d[2] = { rule: "[name=bmeMainContentParent]", style: "border-style", value: $("#frmBorderStyle").val() }, d[3] = { rule: "[name=bmeMainContentParent]", style: "border-radius", value: b + "px" }, d[4] = { rule: "[name=bmeMainContentParent]", style: "border-collapse", value: "separate" }, d[5] = { rule: "[name=bmeMainContentParent]", style: "border-spacing", value: "0px" }, d[6] = { rule: "[name=bmeMainContentParent]", style: "overflow", value: "hidden" }, d[7] = { rule: "[name=bmeMainColumnParent]", style: "border-color", value: "transparent" }, d[8] = { rule: "[name=bmeMainColumnParent]", style: "border-width", value: "0px" }, d[9] = { rule: "[name=bmeMainColumnParent]", style: "border-style", value: "none" }, d[10] = { rule: "[name=bmeMainColumnParent]", style: "border-radius", value: "0px" }, d[11] = { rule: "[name=bmeMainColumnParent]", style: "overflow", value: "visible" }, d[12] = { rule: "[name=bmeMainColumn]", style: "border-color", value: "transparent" }, d[13] = { rule: "[name=bmeMainColumn]", style: "border-width", value: "0px" }, d[14] = { rule: "[name=bmeMainColumn]", style: "border-style", value: "none" }, d[15] = { rule: "[name=bmeMainColumn]", style: "border-radius", value: "0px" }, d[16] = { rule: "[name=bmeMainColumn]", style: "border-collapse", value: "separate" }, d[17] = { rule: "[name=bmeMainColumn]", style: "border-spacing", value: "0px" }, d[18] = { rule: "[name=bmeMainContent]", style: "border-color", value: "transparent" }, d[19] = { rule: "[name=bmeMainContent]", style: "border-width", value: "0px" }, d[20] = { rule: "[name=bmeMainContent]", style: "border-style", value: "none" }, d[21] = { rule: "[name=bmeMainContent]", style: "border-radius", value: "0px" }, d[22] = { rule: "[name=bmeMainContent]", style: "overflow", value: "visible" }, d[23] = { rule: "[name=bmeMainContent]", style: "border-collapse", value: "separate" }, d[24] = { rule: "[name=bmeMainContent]", style: "border-spacing", value: "0px" }), d }

function InitControls() { "undefined" == typeof _EDIT_MODE && (_EDIT_MODE = ""), 0 == isLoaded && (frameObj = $("#_BME_dvEditArea"), checkDefaultBlocks()), $("input:hidden").each(function () { GetAttrValue(this, "id").indexOf("hdToken") != -1 && (token = $(this)) }); var a = ""; if ("TEXT" != _EDIT_MODE) { $("." + rootBlockClass, frameObj).each(function () { a = $(this).attr("name"), "blk_button" != a && "blk_image" != a && "blk_group" != a ? $(this).html(fixRawCode($(this).html(), a)) : $(this).html(fixRawCodeOther($(this).html(), a)) }); var b = $($("style", $("#_BME_dvEditArea"))[0]).html();
        RefreshColorScheme(b, "true"), blockColorHandler() } $(".internal-editor .main").addClass("visible-nav"), CloseRefresh(), isLoaded = !0 }

function checkEditorImageTable(a, b, c) { for (var d = $(c), e = 0; 0 == e && null != $(d).html();) $(d).parent().hasClass("blk_textimg") && (e = 1, delPar = $(d).parent()), 0 == e && (d = $(d).parent());
    1 == e && editImage($(c)) }

function SetupSettings() { AreaDeHiLite(), $("#ancAreaDD").addClass("hidden"), _editBlock = $("table." + rootBlockClass, "#" + currentEdit); var a = BlockObject(_editBlock);
    detectEditorInit = null, detectEditorLoad = null, detectEditorFocus = null, blkObjectData = a, a.renderSetting(_editBlock), $("#dvSettingBlock").removeClass("hidden"), $(".editor-sidebar").removeClass("hidden"), $(".sidebar-editblock-name").removeClass("hidden"), $("li", ".dd-subnav-tabs").removeClass("selected"), $("#dvDesignBlock").addClass("hidden"), $("#dvContentBlock").addClass("hidden"), $("#dvEditBlock").addClass("hidden"), $("#dvTemplateBlock").addClass("hidden"), $(".panel-container .color-selection").spectrum({ preferredFormat: "hex", showInput: !0, chooseText: JS_SAVE, cancelText: JS_CANCEL, showPalette: !0, palette: [
            ["transparent", "#ffffff", "#7f7f7f", "#000", "#D0021B", "#16a7e0"]
        ], showSelectionPalette: !0, maxSelectionSize: 6, localStorageKey: "spectrum.signupform" }), $(".panel-container .color-selection").on("beforeShow.spectrum", function (a, b) { $(".format-tool-menu").removeClass("visible") }), $(".panel-container .color-selection").on("change.spectrum", function (a, b) { "rgba(0, 0, 0, 0)" == b.toRgbString() ? $(this).next().next("input").val("") : $(this).next().next("input").val(b.toHexString()), $(this).next().next("input").change() }), $(".panel-container .color-selection").on("move.spectrum", function (a, b) { "rgba(0, 0, 0, 0)" == b.toRgbString() ? $(this).next().next("input").val("") : $(this).next().next("input").val(b.toHexString()), $(this).next().next("input").change() }), $(".panel-container .color-selection").on("hide.spectrum", function (a, b) { "rgba(0, 0, 0, 0)" == b.toRgbString() ? $(this).next().next("input").val("") : $(this).next().next("input").val(b.toHexString()), $(this).next().next("input").change() }) }

function showSource() { bmeAjax.AuthPost({ url: "/Emails/" + _EID, type: "GET", success: function (a) { var b = a.Response.Data.TemplateContent,
                c = b.replace(/&quot;/g, "'"),
                d = '<body marginheight=0 marginwidth=0 topmargin=0 leftmargin=0 style="height: 100% !important; margin: 0; padding: 0; width: 100% !important;min-width: 100%;">',
                e = "</body>"; if (c.indexOf(d) != -1 && c.indexOf(e) != -1) { var f = c.indexOf(d) + d.length;
                c = c.substring(f, c.indexOf(e)) } $("#showSourceCSS").val(a.Response.Data.CSSCode), $("#showSourceHTML").val(c), $("#dialog-showsource").modal("show") }, error: function (a, b, c) { alert(b) } }) }

function saveSource() {
    var a = $("#showSourceCSS").val(),
        b = $("#showSourceHTML").val();
    a && $("#_BME_dvEditArea").find("style").html(a), b && $("#_BME_dvEditArea").find("table[name='bmeMainBody']").replaceWith(b), $("#dialog-showsource").modal("hide")
}

function checkIsRoot(a) { for (var b = !1, c = $(a), d = 0, e = 0; 0 == d;) $(c).hasClass("miniBorder") || $(c).hasClass("guideBorder") || $(c).hasClass("editHandle") || $(c).hasClass("copyHandle") || $(c).hasClass("deleteHandle") || $(c).hasClass("minibar") || $(c).hasClass("miniBlockTitle") || $(c).hasClass(rootBlockClass) ? d = 1 : $(c).hasClass("editor-template-container") && (d = 1, b = !0), 0 == d && (c = $(c).parent()), e++ > 25 && (d = 1); return b }

function checkBorderStyle() { if ("100%" == $("table[name=bmeMainColumn]").attr("width")) $(".framed-bg").removeClass("selected"), $(".fullwidth-bg").removeClass("selected").addClass("selected"), $(".editor-slider", "#fldFrameBorderRadius").slider("value", "0"), $(".new-slider-val", $(".editor-slider", "#fldFrameBorderRadius")).text("0"), $("#chkFrameInclude", "#fldFrameBorderInclude").prop("checked", !1), $("#frmBorder").val("0"), $("#frmBorderStyle").val("none"), $("#frmBGBorder").val("rgba(0,0,0,0)"), $("#frmBGBorder").next().next("input").val(""), $("fieldset#fldFrameBorder, fieldset#fldFrameBorderRadius, fieldset#fldFrameBorderInclude").addClass("hidden");
    else { $(".fullwidth-bg").removeClass("selected"), $(".framed-bg").removeClass("selected").addClass("selected"); var a = $("[name=bmeMainContentParent]"),
            b = $("[name=bmeMainContent]"),
            c = $("[name=bmeMainColumnParent]"),
            d = GetBorderDetail($(a), "width"),
            e = $(a).css("border-top-style"),
            f = chkColorVal($(a).css("border-top-color")),
            g = $(a).css("border-top-left-radius"),
            h = GetBorderDetail($(c), "width"),
            i = $(c).css("border-top-style"),
            j = $(c).css("border-top-color"),
            k = $(c).css("border-top-left-radius");
        d.toString().indexOf("px") != -1 && (d = d.toString().replace("px", "")), "undefined" == typeof e && (e = ""), "undefined" == typeof g && (g = ""), g.toString().indexOf("px") != -1 && (g = g.toString().replace("px", "")), h.toString().indexOf("px") != -1 && (h = h.toString().replace("px", "")), "undefined" == typeof i && (i = ""), "undefined" == typeof k && (k = ""), k.toString().indexOf("px") != -1 && (k = k.toString().replace("px", "")); var l = GetBorderDetail($(b), "width"),
            m = ($(b).css("border-top-style"), chkColorVal($(b).css("border-top-color"))),
            n = $(b).css("border-top-left-radius"); "undefined" == typeof n && (n = ""), n = parseWidth(n), 0 != parseWidth(n) && parseWidth(n) > parseWidth(g) && (g = n, $(a).css({ "border-color": m, "border-width": l + "px", "border-radius": g + "px", "border-collapse": "separate", "border-spacing": "0px" })), "0" == d && "0" == h || ("0" != d ? ($("#chkFrameInclude", "#fldFrameBorderInclude").attr("checked", ""), $("#chkFrameInclude", "#fldFrameBorderInclude").removeAttr("checked")) : ($("#chkFrameInclude", "#fldFrameBorderInclude").attr("checked", "checked"), d = h, e = i, g = k, f = j)), $("#frmBorder").val(d), $("#frmBorderStyle").val(e), updateGlobalStylesBorderDefaults("frmBorderStyle", e), $("#frmBGBorder").val(f), $("#frmBGBorder").spectrum("set", f), $("#frmBGBorder").next().next("input").val(hexc(f.toLowerCase())), $(".editor-slider", "#fldFrameBorderRadius").slider("value", g), $(".new-slider-val", $(".editor-slider", "#fldFrameBorderRadius")).text(g) } $("table[name=bmeMainColumn]").css("overflow", "visible") }

function checkFrameFull() { "100%" == $("table[name=bmeMainColumn]").attr("width") ? ($(".framed-bg").removeClass("selected"), $(".fullwidth-bg").removeClass("selected").addClass("selected")) : ($(".fullwidth-bg").removeClass("selected"), $(".framed-bg").removeClass("selected").addClass("selected")) }

function checkBits(a, b) { var c = parseInt(a),
        d = !1; return "POWERED" == b ? 1 == (1 & c) && (d = !0) : "ABUSE" == b ? 2 == (2 & c) && (d = !0) : "FORWARD" == b ? 4 == (4 & c) && (d = !0) : "SUBSCRIBE" == b ? 8 == (8 & c) && (d = !0) : "LOGO" == b ? 16 == (16 & c) && (d = !0) : "CANSPAM" == b && 32 == (32 & c) && (d = !0), d }

function ChangeFooter() { var a = 0;
    $("input[name=chkFooterShow]", $("#dvSettingBlock")).each(function () { $(this).prop("checked") && (a += parseInt($(this).val())) }), _CurrentFooter = a, UpdateFooterDisplay() }

function UpdateFooterDisplay() { var a = $("table[name=blk_footer]", $("#_BME_dvEditArea"));
    checkBits(_CurrentFooter, "CANSPAM") ? $("var[type=BME_CANSPAM]", a).removeClass("hidden") : $("var[type=BME_CANSPAM]", a).addClass("hidden"), $("span", $("var[type=BME_LINKS]", a)).each(function () { 0 != $("img", this).length && (checkBits(_CurrentFooter, "LOGO") ? $(this).show() : $(this).hide()) }), checkBits(_CurrentFooter, "SUBSCRIBE") ? $("span[name=footerSubscribe]", $("var[type=BME_LINKS]", a)).show() : $("span[name=footerSubscribe]", $("var[type=BME_LINKS]", a)).hide(), checkBits(_CurrentFooter, "FORWARD") ? $("span[name=footerForward]", $("var[type=BME_LINKS]", a)).show() : $("span[name=footerForward]", $("var[type=BME_LINKS]", a)).hide(), checkBits(_CurrentFooter, "ABUSE") ? $("span[name=footerAbuse]", $("var[type=BME_LINKS]", a)).show() : $("span[name=footerAbuse]", $("var[type=BME_LINKS]", a)).hide() }

function ChangeBadge(a, b) { $(".badge-dd-option").toggle(); var c = $(".badge-dd-select").offset().left,
        d = $(".badge-dd-select").outerWidth(),
        e = $(".badge-dd-select").offset().top; return $(".badge-dd-option").css("left", c + d), $(".badge-dd-option").css("top", e), $("#dvEditTool #toolbarColor").spectrum("hide"), $(".panel-container .color-selection").spectrum("hide"), !1 }

function UpdateFooterBadge() { var a = $("img[name=bmeBadgeImage]").attr("src");
    $("li", "#ulBadgeList").removeClass("selected"), $("li", "#ulBadgeList").each(function () { $("img", $(this)).attr("src") == a && $(this).addClass("selected") }), void 0 != a && (CurrentBadge = a) }

function GetInnerWidth(a) { var b = 0; if (isIE) b = $(a).width() - 2 * parseWidth(GetBorderDetail(a, "width"));
    else { var c = parseWidth($(a).css("border-left-width")),
            d = parseWidth($(a).css("border-right-width")),
            e = parseWidth($(a).innerWidth());
        b = isChrome ? e : e - (c + d) } return b }

function GetBorderDetail(a, b) { var c = "",
        d = "",
        e = 0,
        f = 0; if (null == $(a).html()) return "0px"; try { var g = "";
        c = $(a).attr("style"), "undefined" == typeof c && (c = ";"); for (var h = c.split(";"), i = 0, j = h.length; i < j; i++) Trim(h[i]).length > 0 && (vars = h[i].split(":"), g = Trim(vars[0]).toLowerCase(), "width" == b && ("border" != g && "border-width" != g || (c = Trim(vars[1]), vars = c.split(" "), d = vars[0], i = j, f = 1)), "top-width" == b && ("border" != g && "border-width" != g && "border-top" != g && "border-top-width" != g || (c = Trim(vars[1]), vars = c.split(" "), d = vars[0], i = j, f = 1)), "left-width" == b && ("border" != g && "border-width" != g && "border-left" != g && "border-left-width" != g || (c = Trim(vars[1]), vars = c.split(" "), d = vars[0], i = j, f = 1)), "right-width" == b && ("border" != g && "border-width" != g && "border-right" != g && "border-right-width" != g || (c = Trim(vars[1]), vars = c.split(" "), d = vars[0], i = j, f = 1)), "bottom-width" == b && ("border" != g && "border-width" != g && "border-bottom" != g && "border-bottom-width" != g || (c = Trim(vars[1]), vars = c.split(" "), d = vars[0], i = j, f = 1)), "max-width" == b && "max-width" == g && (c = Trim(vars[1]), d = c, i = j, f = 1)) } catch (k) { e = 1 } if (1 == e || 0 == f)
        if (isIE) { c = $(a).attr("style"), "undefined" == typeof c && (c = ";"); for (var h = c.split(";"), i = 0, j = h.length; i < j; i++) Trim(h[i]).length > 0 && (vars = h[i].split(":"), "width" == b && "border" == Trim(vars[0]).toLowerCase() && (c = Trim(vars[1]), vars = c.split(" "), d = vars[0], i = j)) } else "width" == b ? d = ($(a).outerWidth() - $(a).innerWidth()) / 2 + "px" : "top-width" == b ? d = $(a).css("border-top-width") : "bottom-width" == b ? d = $(a).css("border-bottom-width") : "left-width" == b ? d = $(a).outerWidth() - $(a).innerWidth() + "px" : "right-width" == b && (d = $(a).outerWidth() - $(a).innerWidth() + "px"); return d }

function getFrameRadius() { var a = ""; return a = $(".fullwidth-bg").hasClass("selected") ? "0px" : $("#chkFrameInclude", "#fldFrameBorderInclude").is(":checked") ? $("[name=bmeMainColumnParent]").length ? getBorderRadius("[name=bmeMainColumnParent]") : "-" : $("[name=bmeMainContentParent]").length ? getBorderRadius("[name=bmeMainContentParent]") : "-", "undefined" == typeof a && (a = "0px"), a }

function getImageMaxWidth(a) { var b = parseWidth(GetBorderDetail($(a), "max-width")); return 0 == b && (b = parseWidth(GetBorderDetail($(a), "width"))), 0 == b && (b = parseWidth(getImageWidth($(a)))), b }

function getImageWidth(a) { var b = $(a).prop("naturalWidth"); return "undefined" != typeof b && "0" != b || (b = $(a).attr("width")), b && b.toString().indexOf("px") != -1 && (b = b.replace("px", "")), b }

function GetAttrValue(a, b) { var c = $(a).attr(b); return null != c && "undefined" != typeof c || (c = ""), c }

function getWrapper(a) { for (var b = $(a), c = ""; !$(b).hasClass(wrapperBlockClass) && null != $(b).html();) null != $(b).attr("boxid") ? (c = $(b).attr("boxid"), b = $("#" + c)) : b = $(b).parent(); return b }

function getWrapperID(a) { for (var b = $(a), c = ""; !$(b).hasClass(wrapperBlockClass) && null !== $(b).html();) { if (null !== $(b).attr("boxid")) return c = $(b).attr("boxid");
        b = $(b).parent() } return "" == c && $(b).hasClass(wrapperBlockClass) && (c = $(b).attr("id")), c }

function checkIntegrationConnections() { bmeAjax.AuthPost({ url: "/Client/Integrations", type: "GET", data: { Language: _Lang }, success: function (a) { for (var b = 0, c = a.Response.Data.length; b < c; b++) "etsyStoreName" != a.Response.Data[b].ID && "etsyStoreID" != a.Response.Data[b].ID && "ebaySellerID" != a.Response.Data[b].ID ? integrationSource[a.Response.Data[b].ID] = a.Response.Data[b].Value : "etsyStoreName" == a.Response.Data[b].ID ? etsyStoreName = a.Response.Data[b].Value : "etsyStoreID" == a.Response.Data[b].ID ? etsyStoreID = a.Response.Data[b].Value : "ebaySellerID" == a.Response.Data[b].ID && (ebaySellerID = a.Response.Data[b].Value) }, error: function (a, b, c) { alert(b) } }), $.ajax({ type: "GET", contentType: "multipart/form-data", processData: !1, cache: !1, dataType: "json", url: integrationserverURL + "/api/v1/connections", headers: { Authorization: "OAuth " + XToken }, success: function (a) { for (var b = a.ApiConnectionDataModels, c = 0, d = b.length; c < d; c++) { var e = b[c]; "SurveyMonkey" == e.ApiConnectionId ? e.Active === !0 && (integration_SurveyMonkey_connected = "1", surveyMonkeyID = e.UserName) : "LinkedIn" == e.ApiConnectionId && e.Active === !0 && (integration_LinkedIn_connected = "1", linkedInID = e.UserName) } } }) }

function connectIntegrationPopup(a, b) { var c = ""; return "surveymonkey" == a ? (surveyAuth = "surveymonkey", templateAuthURL = surveyAuth, $("#integrationsMessage").html(JS_SM_REFERENCE), c = JS_SM_CONNECT_TITLE) : "eventbrite" == a || "eventbrite1" == a ? ("undefined" == typeof eventbriteAuth && (surveyAuth = "http://www.benchmarkemail.com/EventBriteAuthorize"), templateAuthURL = eventbriteAuth, $("#integrationsMessage").html(JS_EB_REFERENCE), c = JS_EB_CONNECT_TITLE) : "facebookevents" == a ? ("undefined" == typeof facebookeventsAuth && (facebookeventsAuth = "http://www.benchmarkemail.com/FacebookEventsAuthorize"), templateAuthURL = facebookeventsAuth, $("#integrationsMessage").html(JS_FBE_REFERENCE), c = JS_FBE_CONNECT_TITLE) : "twitter" == a ? ("undefined" == typeof twitterAuth && (twitterAuth = "http://www.benchmarkemail.com/TwitterTweetAuthorize"), templateAuthURL = twitterAuth, $("#integrationsMessage").html(JS_TWITTER_REFERENCE), c = JS_CONNECT_TO_TWITTER) : "linkedin" == a ? (linkedInAuth = "linkedin", templateAuthURL = linkedInAuth, $("#integrationsMessage").html(JS_LINKEDIN_REFERENCE), c = JS_LINKEDIN_CONNECT_TITLE) : "pinterest" == a && ("undefined" == typeof pinterestAuth && (pinterestAuth = "http://www.benchmarkemail.com/PinterestAuthorize"), templateAuthURL = pinterestAuth, $("#integrationsMessage").html(JS_PINTEREST_REFERENCE), c = JS_PINTEREST_CONNECT_TITLE), $("#dvTemplateUse").modal("hide"), $("#integrationsConnect .modal-title").html(c), $("#integrationsConnect").modal("show"), !1 }

function showIntegrationPopup(a, b) { $("#dvTemplateUse").modal("hide"); var c = ""; "surveymonkey" == a ? c = "integrationsSurveyMonkey" : "eventbrite" == a || "eventbrite1" == a ? c = "integrationsEventbrite" : "facebookevents" == a ? c = "integrationsFacebook" : "etsy" == a ? c = "integrationsEtsy" : "ebay" == a ? c = "integrationseBay" : "twitter" == a ? c = "integrationstwitter" : "linkedin" == a ? c = "integrationsLinkedIn" : "pinterest" == a && (c = "integrationsPinterest"), $("#" + c).attr("eid", b).attr("which", a), "etsy" == a ? EtsyInitializeDialog() : "ebay" == a ? eBayInitializeDialog() : "twitter" != a && $("#" + c).modal("show"), "surveymonkey" == a ? surveyMonkeyInitializeDialog() : "eventbrite" == a || "eventbrite1" == a ? EBGetEventList() : "twitter" == a ? (_LAYOUT_LOADING = "1", $.post("/xdc/json/EmailIntegratedTemplateLayoutUse", { eid: _EID, usetid: b, language: languageVal, type: a, extra1: "", extra2: "" }, function (a) { cancelIntegration(), refreshPage(), _IS_SAVED = 1 })) : "facebookevents" == a ? FBEGetEventList() : "linkedin" == a ? linkedInInitializeDialog() : "pinterest" == a && pinterestInitializeDialog() }

function cancelIntegration() { $("#integrationsConnect").modal("hide"), CloseRefresh() }

function loginIntegration() { if (bmeAjax.PreLoader("#btnIntegration"), "surveymonkey" == templateAuthURL) { var a = document.location.origin + "/Integrate/Redirect?integration=surveymonkey&redir=" + encodeURIComponent(location.href);
        $.ajax({ type: "GET", contentType: "multipart/form-data", processData: !1, cache: !1, dataType: "json", url: integrationserverURL + "/api/v1/connect/SurveyMonkey", headers: { Authorization: "OAuth " + XToken, Redirect: a }, xhrFields: { withCredentials: !0 }, success: function (a) { bmeAjax.RemovePreLoader("#btnIntegration"), void 0 !== a && null !== a && void 0 !== a.RedirectUrl && null !== a.RedirectUrl && (window.location.href = a.RedirectUrl) } }) } else if ("linkedin" == templateAuthURL) { var a = document.location.origin + "/Integrate/Redirect?integration=linkedin&redir=" + encodeURIComponent(location.href);
        $.ajax({ type: "GET", contentType: "multipart/form-data", processData: !1, cache: !1, dataType: "json", url: integrationserverURL + "/api/v1/connect/LinkedIn", headers: { Authorization: "OAuth " + XToken, Redirect: a }, xhrFields: { withCredentials: !0 }, success: function (a) { bmeAjax.RemovePreLoader("#btnIntegration"), void 0 !== a && null !== a && void 0 !== a.RedirectUrl && null !== a.RedirectUrl && (window.location.href = a.RedirectUrl) } }) } else location.href = templateAuthURL }

function surveyMonkeyInitializeDialog() { $("#tdSurveyMonkeyList").html(preloaderAni), $("#trLinkRow").addClass("hidden"), $("#tdSurveyMonkeyLink").empty(), $("#btnSurveyIntegrate").prop("disabled", !0), $("#surveyMonkeyID").text(surveyMonkeyID), $.ajax({ type: "GET", contentType: "multipart/form-data", processData: !1, cache: !1, dataType: "json", url: integrationserverURL + "/api/v1/surveymonkey/surveys", headers: { Authorization: "OAuth " + XToken }, success: function (a) { if ($("#btnSurveyIntegrate").prop("disabled", !0), a.length > 0) { $("#tdSurveyMonkeyList").empty(); var b = "<select class='form-control' id='selSurveyMonkeyID'>",
                    c = 0;
                b += '<option value="">' + JS_SELECT + "</option>"; for (var d = 0, e = a.length; d < e; d++) b += "<option value=" + a[d].id + ">" + a[d].title + "</option>", c++;
                b += "</select>", c > 0 ? $("#tdSurveyMonkeyList").html(b) : ($("#tdSurveyMonkeyList").empty(), $("#tdSurveyMonkeyList").html(JS_NO_SURVEY_FOUND)) } else $("#tdSurveyMonkeyList").empty(), $("#tdSurveyMonkeyList").html(JS_NO_SURVEY_FOUND) }, error: function (a, b, c) { $("#tdSurveyMonkeyList").empty(), $("#tdSurveyMonkeyList").html(JS_NO_SURVEY_FOUND) } }) }

function SMGetLinkSelect() { "" != $("#selSurveyMonkeyLinkList").val() ? $("#btnSurveyIntegrate").prop("disabled", !1) : $("#btnSurveyIntegrate").prop("disabled", !0) }

function SMGetLinkList() { var a = $("#selSurveyMonkeyID").val(); "" != a ? ($("#trLinkRow").removeClass("hidden"), $("#tdSurveyMonkeyLink").html(preloaderAni), $.ajax({ type: "GET", contentType: "multipart/form-data", processData: !1, cache: !1, dataType: "json", url: integrationserverURL + "/api/v1/surveymonkey/surveys/" + a + "/collectors", headers: { Authorization: "OAuth " + XToken }, success: function (a) { if (a.length > 0) { $("#tdSurveyMonkeyLink").empty(); var b = "<select id='selSurveyMonkeyLinkList' class='form-control'>";
                b += '<option value="">' + JS_SELECT + "</option>"; for (var c = 0, d = a.length; c < d; c++) null != a[c].url && (b += "<option value=" + a[c].url + ">" + a[c].name + "</option>");
                b += "</select>", $("#tdSurveyMonkeyLink").html(b) } else $("#tdSurveyMonkeyLink").empty(), "undefined" == typeof JS_NO_SURVEY_LINK_FOUND && (JS_NO_SURVEY_LINK_FOUND = "Oops! No links found."), $("#tdSurveyMonkeyLink").html(JS_NO_SURVEY_LINK_FOUND) }, error: function (a, b, c) {} })) : ($("#btnSurveyIntegrate").prop("disabled", !0), $("#trLinkRow").addClass("hidden")) }

function linkedInInitializeDialog() { $("#btnLinkedInIntegrate").prop("disabled", !0), $("#linkedinCompanyPageContainer").empty(), $("#linkedinCompanyPageContainer").html(preloaderAni), $("#linkedInID").text(linkedInID), $.ajax({ type: "GET", contentType: "multipart/form-data", processData: !1, cache: !1, dataType: "json", url: integrationserverURL + "/api/v1/linkedin/companies", headers: { Authorization: "OAuth " + XToken }, success: function (a) { if ($("#linkedinCompanyPageContainer").empty(), a.values.length > 0) { var b = '<select id="linkedinCompanyPage_Select" class="form-control">';
                b += '<option value="">' + JS_SELECT + "</option>", integration_LinkedIn_data = a.values; for (var c = 0; c < a.values.length; c++) b += '<option value="' + c + '">' + a.values[c].details.name + "</option>";
                b += "</select>", $("#linkedinCompanyPageContainer").html(b) } else $("#linkedinCompanyPageContainer").html("<p>" + JS_LINKEDIN_NO_ITEMS_FOUND + "</p>") }, error: function (a, b, c) { $("#linkedinCompanyPageContainer").empty(), $("#linkedinCompanyPageContainer").html("<p>" + JS_LINKEDIN_NO_ITEMS_FOUND + "</p>") } }) }

function eBayInitializeDialog() { $("#ebaySellerID").closest("fieldset").removeClass("error"), $("#ebaySellerIDError").addClass("hidden"), $("#ebaySellerID").val(""), $("#btneBayConnect").prop("disabled", !0), $("#ebayItemsContainer input:checkbox").prop("checked", !1), "" == ebaySellerID ? $("#integrationseBay").modal("show") : ($("#ebaySellerID").val(ebaySellerID), $("#ebaySellerName").text(ebaySellerID), eBayShowSelectItems(), $("#integrationseBay2").modal("show")) }

function eBayShowSelectItems() { bmeAjax.PreLoader("#ebayConnect"); var a = $("#ebaySellerID").val();
    $("#ebaySellerID").closest("fieldset").removeClass("error"), $("#ebaySellerIDError").addClass("hidden"), $.post("/xdc/json/eBaySellerExists", { seller_id: a }, function (b) { bmeAjax.RemovePreLoader("#ebayConnect"), "true" == b.toLowerCase() ? ($("#integrationseBay").modal("hide"), $("#integrationseBay2").modal("show"), "" == ebaySellerID && (eBaySetSellerID(a), ebaySellerID = a), $("#ebaySellerName").text(a)) : ($("#ebaySellerID").closest("fieldset").addClass("error"), $("#ebaySellerIDError").removeClass("hidden")) }) }

function ebayShowItems() { var a = $("#ebaySellerID").val(),
        b = $("#ebayRegionalSiteSelection_Select").val();
    $("#ebayItems").html(preloaderAni), $("#btneBayConnect2").prop("disabled", !0), $.post("/xdc/json/eBayGetItemListing", { sellerID: a, siteID: b }, function (a) { var b = $.parseJSON(a); if (b.length > 0)
            if (1 == b.length && "-1" == b[0].size && "" == b[0].name) $("#integrationseBay").modal("show"), $("#integrationseBay2").modal("hide"), $("#ebaySellerID").closest("fieldset").addClass("error"), $("#ebaySellerIDError").removeClass("hidden");
            else if (1 == b.length && "-2" == b[0].size && "" == b[0].name) $("#ebayItems").empty(), $("#ebayItems").html("<label>" + JS_SELECT_ITEMS_FOR_IMPORT + "</label><p>" + JS_EBAY_NO_ITEMS_FOUND + "</p>");
        else if (b.length > 0 && "1" == b[0].size && "" != b[0].name) { $("#ebayItems").empty(); var c = "<label>" + JS_SELECT_ITEMS_FOR_IMPORT + "</label>"; for (c += '<div id="ebayItemsContainer" style="max-height: 300px; overflow: auto; position: relative;">', c += '<ul class="form-options-list">', i = 0; i < b.length; i++) c += "<li>", c += '<input class="form-checkbox" id="chkItems' + (i + 1) + '" name="chkItems" type="checkbox" value="' + b[i].id + '">', c += '<label class="form-option" for="chkItems' + (i + 1) + '">', c += b[i].name, c += "</label>", c += "</li>";
            c += "</ul>", c += "</div>", $("#ebayItems").html(c) } }) }

function eBayGetSellerID() { var a = ""; return $.post("/xdc/json/eBayGetStoredSellerID", {}, function (b) { a = b, "undefined" == typeof a && (a = "") }), a }

function eBaySetSellerID(a) { $.post("/xdc/json/eBaySetStoredSellerID", { seller_id: a }, function (a) {}) }

function EtsyInitializeDialog() { $("#etsyStoreName").closest("fieldset").removeClass("error"), $("#etsyStoreNameError").addClass("hidden"), $("#etsyStoreName").val(""), $("#etsyConnect").prop("disabled", !0), $("#etsyConnect2").prop("disabled", !0), "" == etsyStoreName ? $("#integrationsEtsy").modal("show") : ($("#etsyStoreName").val(etsyStoreName), $("#etsyStoreName2").text(etsyStoreName), EtsyGetSectionList(), $("#integrationsEtsy2").modal("show")) }

function EtsyStoreNameGetSectionList() { bmeAjax.PreLoader("#etsyConnect"), shopName = $("#etsyStoreName").val(), etsyStoreName = shopName, $("#etsyStoreName").closest("fieldset").removeClass("error"), $("#etsyStoreNameError").addClass("hidden"), $.post("/xdc/json/Etsy_Get_Details", { shopName: shopName }, function (a) { bmeAjax.RemovePreLoader("#etsyConnect"); var b = JSON.parse(a); if (b.length > 0) { $("#etsyStoreName2").text(etsyStoreName); var c = b[0].id;
            etsyStoreID = c, $.post("/xdc/json/Etsy_Set_Stored_Shop_Name", { shop_name: shopName, shop_id: c }, function (a) {}), $("#integrationsEtsy").modal("hide"), $("#integrationsEtsy2").modal("show"), EtsyGetSectionList() } else $("#etsyStoreName").closest("fieldset").addClass("error"), $("#etsyStoreNameError").removeClass("hidden") }) }

function EtsyGetSectionList() { $("#etsyItems").html(preloaderAni), shopName = $(".etsyStoreName").val(), $.post("/xdc/json/Etsy_Get_Shop_Section_List", { shopID: etsyStoreID }, function (a) { var b = JSON.parse(a); if (b.length > 0) { var c = '<select id="etsyStoreSection_Select" class="form-control">'; for (c += '<option value="">' + JS_SELECT + "</option>", i = 0; i < b.length; i++) b[i].width > 1 ? c += '<option value="' + b[i].id + "_" + b[i].name + '">' + b[i].name + " (" + b[i].width + " items)</option>" : 1 == b[i].width && (c += '<option value="' + b[i].id + "_" + b[i].name + '">' + b[i].name + " (" + b[i].width + " item)</option>");
            c += "</select>", $("#etsyItems").html(c) } else $("#etsyItems").html("<p>" + JS_E_NO_SECTION + "</p>") }) }

function pinterestInitializeDialog() { $(".pinterestConnect").prop("disabled", !0), $("#pinterestBoard_Select").html(preloaderAni), $.post("/xdc/json/PinterestGetBoards", {}, function (a) { var b = $.parseJSON(a); if (b.length > 0) { var c = ""; for (c += '<ul class="form-options-list">', i = 0; i < b.length; i++) c += "<li>", c += "<input class='form-checkbox' id='chkBoards" + b[i].id + '\' name="chkBoards" type="checkbox" value="' + b[i].id + '">', c += "<label class='form-option' for='chkBoards" + b[i].id + "'>" + b[i].name + "</label>", c += "</li>";
            c += "</ul>", $("#pinterestBoard_Select").html(c) } else $("#pinterestBoard_Select").html("<p>" + JS_PINTERST_NO_BOARDS_FOUND + "</p>") }) }

function FBEGetEventList() { $("#int-FBevents").html(preloaderAni), $.post("/xdc/json/FacebookEventsGetList", { 1: "1" }, function (a) { var b = $.parseJSON(a); if (b.length > 0) { var c = '<option value="">' + JS_SELECT + "</option>"; for (i = 0; i < b.length; i++) c = c + '<option value="' + b[i].id + '">' + b[i].name + "</option>";
            c = "<select class='form-control' id='selFacebookEventsList' name=\"facebookEvents\">" + c + "</select>", $("#int-FBevents").html(c) } else $("#int-FBevents").html("<p>" + JS_FBE_NO_EVENTS + "</p>") }) }

function EBGetEventList() { $("#btnEventbriteIntegrate").prop("disabled", !0), $("#tdEventbriteListError").addClass("hidden"); var a = $("#integrationsEventbrite").attr("which");
    $("#tdEventbriteList").html(preloaderAni), $.post("/xdc/json/EventbriteGetList", { 1: "1" }, function (b) { var c = $.parseJSON(b); if (c.length > 0) { $("#tdEventbriteList").empty(); var d = ""; if ("eventbrite1" == a) { for (d += '<select id="eventbriteSelect" class="form-control">', d += '<option value="">' + JS_SELECT + "</option>", e = 0; e < c.length; e++) d = d + '<option value="' + c[e].id + '">' + c[e].name + "</option>";
                d += "</select>" } else { d += '<ul class="form-options-list">'; for (var e = 0, f = c.length; e < f; e++) d += "<li>", d += "<input id='chkeventbrite" + c[e].id + "' class='form-checkbox' type='checkbox' value=" + c[e].id + " name='chkeventbrite'>", d += "<label class='form-option' for='chkeventbrite" + c[e].id + "'>" + c[e].name + "</label>", d += "</li>";
                d += "</ul>" } $("#tdEventbriteList").html(d) } else $("#tdEventbriteList").empty(), $("#tdEventbriteList").html("<p>" + JS_NO_EB_EVENTS_FOR_USER + "</p>") }) }

function InitLayouts() { $("#txtSearchPastEmail").keypress(function (a) { var b = a.keyCode ? a.keyCode : a.which; "13" == b ? (plFilter = $(this).val(), plPageNumber = 1, LoadPastLayouts(), $(".pl-search").removeClass("selected"), $(".past-layouts-wrap .media-search-bar").addClass("hidden")) : "27" == b && ($(".pl-search").removeClass("selected"), $(".past-layouts-wrap .media-search-bar").addClass("hidden")) }), "0" != _IS_SAVED && $("a[layoutID=" + CurrentLayoutID + "]").addClass("selected") }

function OpenConfirmLayoutChange(a) { toolBar = "layoutchange", confirmDialog = null, $("#dvConfirmLayout").attr("eid", a), $("#dvConfirmLayout").modal("show") }

function pastEmailThumbClick() { plOldSection = 0, $("li.pl-thumbs, li.pl-list").removeClass("ui-state-active"), $("li.pl-thumbs").addClass("ui-state-active"), $("#past-emails-list, .past-layouts-wrap .media-search-bar").addClass("hidden"), $("#past-emails-thumbs").removeClass("hidden") }

function pastEmailListClick() { plOldSection = 1, $("li.pl-thumbs, li.pl-list").removeClass("ui-state-active"), $("li.pl-list").addClass("ui-state-active"), $("#past-emails-thumbs, .past-layouts-wrap .media-search-bar").addClass("hidden"), $("#past-emails-list").removeClass("hidden") }

function pastEmailSearchClick() { $(".past-layouts-wrap .media-search-bar").is(":visible") ? $(".past-layouts-wrap .media-search-bar").addClass("hidden") : ($(this).parent("li").toggleClass("selected"), $(".past-layouts-wrap .media-search-bar").removeClass("hidden")) }

function pastEmailLoadMoreClick() { 0 == plLoading && (plPageNumber += 1, RenderPastLayoutList(plTotalRecords)) }

function listLayoutClick() { $("a", $(".layouts-nav")).removeClass("selected"), $(".layouts-default-select").addClass("selected"), $(".layouts-default").removeClass("hidden"), $(".editor-templates-wrap, .past-layouts-wrap, .pl-total-count").addClass("hidden") }

function listPastClick() { $("a", $(".layouts-nav")).removeClass("selected"), $(".past-layouts-select").addClass("selected"), $(".layouts-default, .editor-templates-wrap").addClass("hidden"), $(".past-layouts-wrap").removeClass("hidden"), plPageNumber = 1, LoadPastLayouts() }

function listTemplatesClick() { $("a", $(".layouts-nav")).removeClass("selected"), $(".layouts-template-select").addClass("selected"), $(".editor-templates-wrap").removeClass("hidden"), $(".layouts-default, .past-layouts-wrap, .pl-total-count").addClass("hidden"), tplTotalRecords = 0, tplPageNumber = 1, $(".clear-filters").click() }

function updateTemplateFilters() { var a = "",
        b = "0";
    0 == $(".template-filter:checked").length ? ($("#pFilterList").html(""), $("#pFilterList").html(JS_FILTERS + ": " + JS_NO_FILTERS)) : ($(".template-filter:checked").each(function () { b += "," + $(this).attr("id"), "" != a && (a += ", "), a += $(this).val() }), $("#pFilterList").html(JS_FILTERS + ": " + a)), tplFilterCat = b, tplTotalRecords = 0, tplPageNumber = 1, LoadTemplateLayouts() }

function LoadTemplateLayouts() { 0 == tplLoading && (tplLoading = 1, loadIntegrationConnections === !1 && (loadIntegrationConnections = !0, checkIntegrationConnections()), $("#template-emails-loading").removeClass("hidden"), $(".no-show, #templateLoadMore").addClass("hidden"), $("#ulTemplateList").empty(), bmeAjax.AuthPost({ url: "/Emails/Template?Language=" + languageVal + "&FilterCategory=" + tplFilterCat + "&PageNumber=1&PageSize=1", type: "GET", success: function (a) { "1" == a.Response.Status && RenderTemplateLayoutList(a.Response.Count) }, error: function (a, b, c) { alert(b) } })) }

function RenderTemplateLayoutList(a) { a > 0 ? (bmeAjax.PreLoader("#ancTemplateLoadMore"), tplTotalRecords = a, bmeAjax.AuthPost({ url: "/Emails/Template?Language=" + languageVal + "&FilterCategory=" + tplFilterCat + "&Filter=" + tplFilter + "&PageNumber=" + tplPageNumber + "&PageSize=" + tplPageSize, type: "GET", success: function (a) { bmeAjax.RemovePreLoader("#ancTemplateLoadMore"), "1" == a.Response.Status && RenderTemplateLayoutDetail(a.Response.Data) }, error: function (a, b, c) { alert(b) } })) : (bmeAjax.RemovePreLoader("#ancTemplateLoadMore"), $("#template-emails-loading, #templateLoadMore").addClass("hidden"), $(".no-show").removeClass("hidden"), tplLoading = 0) }

function RenderTemplateLayoutDetail(a) { var b = tplPageNumber * tplPageSize;
    b > tplTotalRecords && (b = tplTotalRecords); for (var c = "", d = "", e = 0, f = a.length; e < f; e++) c = "", d = a[e].PreviewImage, d.indexOf("https://improxy.benchmarkemail.com") == -1 && (d = Replace(d, "http://", "https://")), c += '<li eid="' + a[e].ID + '"  thirdparty="' + a[e].ThirdParty + "\"><a name='ancSelectEmail' onClick=\"javascript:UseTemplateLayoutPreview(" + a[e].ID + ');" class="pl-thumb"><img src="' + d + '" alt="' + a[e].Name + '" /></a>', c += "<a name='ancSelectEmail' onClick=\"javascript:UseTemplateLayoutPreview(" + a[e].ID + ');" class="pl-thumbname">' + a[e].Name + "</a>", "" != a[e].ThirdParty && ("surveymonkey" == a[e].ThirdParty ? "1" != integration_SurveyMonkey_connected && (c += '<a class="integrate-btn" onclick="javascript:connectIntegrationPopup(\'' + a[e].ThirdParty + "'," + a[e].ID + ');" >' + JS_CONNECT + "</a>") : "linkedin" == a[e].ThirdParty ? "1" != integration_LinkedIn_connected && (c += '<a class="integrate-btn" onclick="javascript:connectIntegrationPopup(\'' + a[e].ThirdParty + "'," + a[e].ID + ');" >' + JS_CONNECT + "</a>") : "1" != integrationSource[a[e].ThirdParty] && (c += "etsy" == a[e].ThirdParty || "ebay" == a[e].ThirdParty ? '<a class="integrate-btn" onclick="javascript:showIntegrationPopup(\'' + a[e].ThirdParty + "'," + a[e].ID + ');" >' + JS_CONNECT + "</a>" : '<a class="integrate-btn" onclick="javascript:connectIntegrationPopup(\'' + a[e].ThirdParty + "'," + a[e].ID + ');" >' + JS_CONNECT + "</a>")), c += '<div class="layout-select-opts">', c += "<a name='ancPreviewEmail' onClick=\"javascript:LayoutTemplatePreview(" + a[e].ID + ');" title="' + JS_PREVIEW + '" class="layout-prev"></a>', c += "</div>", c += "</li>", $("#ulTemplateList").append(c);
    $("#template-emails-loading").addClass("hidden"), c = null, b < tplTotalRecords ? $("#templateLoadMore").removeClass("hidden") : $("#templateLoadMore").addClass("hidden"), tplLoading = 0 }

function templateEmailLoadMoreClick() { 0 == tplLoading && (tplPageNumber += 1, RenderTemplateLayoutList(tplTotalRecords)) }

function LayoutTemplatePreview(a) { ShowRefresh(), RefreshTemplateLayoutPreview(a, 0) }

function LayoutTemplateUse(a) { var b = $("li[eid=" + a + "]").attr("thirdparty"); "surveymonkey" == b || "linkedin" == b ? (bmeAjax.RemovePreLoader("#ancTemplateUseConfirm"), "surveymonkey" == b && "1" != integration_SurveyMonkey_connected || "linkedin" == b && "1" != integration_LinkedIn_connected ? connectIntegrationPopup(b, a) : showIntegrationPopup(b, a)) : "undefined" != typeof b && "" != b && null != b ? (bmeAjax.RemovePreLoader("#ancTemplateUseConfirm"), "1" != integrationSource[b] && "etsy" != b && "ebay" != b ? connectIntegrationPopup(b, a) : showIntegrationPopup(b, a)) : ("0" == _IS_SAVED && ShowRefresh(), _LAYOUT_LOADING = "1", Intercom("trackEvent", "DD Editor - Used Template"), bmeAjax.AuthPost({ url: "/Emails/Template/" + a + "?Language=" + languageVal, type: "PATCH", data: { EmailID: _EID }, success: function (a) { "0" == _IS_SAVED ? (bmeAjax.RemovePreLoader("#ancTemplateUseConfirm"), InitPage()) : (refreshPage(), _IS_SAVED = 1) }, error: function (a, b, c) { bmeAjax.RemovePreLoader("#ancTemplateUseConfirm"), alert(b) } })) }

function SwitchTemplateLayoutPreview(a, b) { CloseTemplateLayoutPreview(), RefreshTemplateLayoutPreview(a, b) }

function clearSearchLayoutClick() { $(".pl-search").removeClass("selected"), $(".past-layouts-wrap .media-search-bar, .pl-search-results").addClass("hidden"), $("#txtSearchPastEmail").val(""), plFilter = "", plPageNumber = 1, LoadPastLayouts() }

function LayoutUse(a) { "0" == _IS_SAVED && ShowRefresh(); var b = new Object;
    b.LayoutID = a, b.IsEmailLayout = "1", bmeAjax.AuthPost({ url: "/Emails/" + _EID, type: "PATCH", data: { Detail: b }, success: function (a) { "0" == _IS_SAVED ? InitPage() : (refreshPage(), _IS_SAVED = 1) }, error: function (a, b, c) { alert(b) } }) }

function LayoutGetEmailID(a) { var b = ""; for (b = $(a).attr("eid");
        "undefined" == typeof b;) a = $(a).parent(), b = $(a).attr("eid"); return b }

function LayoutPastEmailSelect(a) { OpenLayoutUse(a) }

function LayoutPastEmailPreview(a) { SetLayoutPreview(a, 0) }

function LayoutPastEmailUnFavorite(a, b) { $(b).hasClass("nofav") ? LayoutPastEmailFavorite(a) : (ShowRefresh(" Updating "), bmeAjax.AuthPost({ url: "/Emails/" + a + "/Favorite", type: "PATCH", data: { Favorite: 0 }, success: function (b) { $("a[name=ancUnFavoriteEmail]", "[eid=" + a + "]").addClass("nofav"), $("a[name=ancFavoriteEmail]", "[eid=" + a + "]").removeClass("hidden"), $("a[name=ancUnFavoriteEmailOpt]", "[eid=" + a + "]").addClass("hidden"), CloseRefresh() }, error: function (a, b, c) { alert(b) } })) }

function LayoutPastEmailUnFavoriteOpt(a) { ShowRefresh(" Updating "), bmeAjax.AuthPost({ url: "/Emails/" + a + "/Favorite", type: "PATCH", data: { Favorite: 0 }, success: function (b) { $("a[name=ancUnFavoriteEmail]", "[eid=" + a + "]").addClass("nofav"), $("a[name=ancFavoriteEmail]", "[eid=" + a + "]").removeClass("hidden"), $("a[name=ancUnFavoriteEmailOpt]", "[eid=" + a + "]").addClass("hidden"), CloseRefresh() }, error: function (a, b, c) { alert(b) } }) }

function LayoutPastEmailFavorite(a) {
    ShowRefresh(" Updating "), bmeAjax.AuthPost({
        url: "/Emails/" + a + "/Favorite",
        type: "PATCH",
        data: { Favorite: 1 },
        success: function (b) { $("a[name=ancUnFavoriteEmail]", "[eid=" + a + "]").removeClass("nofav"), $("a[name=ancFavoriteEmail]", "[eid=" + a + "]").addClass("hidden"), $("a[name=ancUnFavoriteEmailOpt]", "[eid=" + a + "]").removeClass("hidden"), CloseRefresh() },
        error: function (a, b, c) {
            alert(b)
        }
    })
}

function LoadPastLayouts() { 0 == plLoading && (plLoading = 1, plPageNumber = 1, plTotalRecords = 0, $(".norecords, .pl-total-count, .past-emails-section, .pl-search-results").addClass("hidden"), $("#past-emails-loading").removeClass("hidden"), $("tbody", "table.past-emails-tbl").empty(), $(".pl-thumbview").empty(), plFilter = $("#txtSearchPastEmail").val(), plFilter == $("#txtSearchPastEmail").attr("placeholder") && (plFilter = ""), $(".pl-total-count").addClass("hidden"), "" != plFilter ? ($("#layoutKeyword").html(plFilter), $(".pl-search-results").removeClass("hidden")) : $(".pl-search-results").addClass("hidden"), bmeAjax.AuthPost({ url: "/Emails/?Filter=" + plFilter + "&FilterType=EmailID&ExcludeEmailID=" + _EID + "&PageSize=1", type: "GET", success: function (a) { "1" == a.Response.Status && RenderPastLayoutList(a.Response.Count) }, error: function (a, b, c) { alert(b) } })) }

function RenderPastLayoutList(a) { a > 0 ? (bmeAjax.PreLoader("#ancPastLoadMore"), bmeAjax.PreLoader("#ancPastLoadMore2"), plTotalRecords = a, bmeAjax.AuthPost({ url: "/Emails/?Filter=" + plFilter + "&FilterType=EmailID&ExcludeEmailID=" + _EID + "&PageSize=" + plPageSize + "&PageNumber=" + plPageNumber, type: "GET", success: function (a) { bmeAjax.RemovePreLoader("#ancPastLoadMore"), bmeAjax.RemovePreLoader("#ancPastLoadMore2"), "1" == a.Response.Status && RenderPastLayoutListDetail(a.Response.Data) }, error: function (a, b, c) { alert(b) } })) : (bmeAjax.RemovePreLoader("#ancPastLoadMore"), bmeAjax.RemovePreLoader("#ancPastLoadMore2"), $("#past-emails-loading, .pl-load-more, table.past-emails-tbl").addClass("hidden"), $(".norecords").removeClass("hidden"), 0 == plOldSection ? ($("li.pl-thumbs").addClass("ui-state-active"), $("#past-emails-thumbs").removeClass("hidden"), $("#past-emails-loading, #past-emails-list").addClass("hidden")) : ($("#past-emails-list").removeClass("hidden"), $("li.pl-list").addClass("ui-state-active"), $("#past-emails-loading, #past-emails-thumbs").addClass("hidden")), plLoading = 0) }

function RenderPastLayoutListDetail(a) { var b = plPageNumber * plPageSize;
    b > plTotalRecords && (b = plTotalRecords), $(".pl-total-count").html(JS_SHOWING.replace("ENDCOUNT", b).replace("TOTALCOUNT", plTotalRecords)), $(".pl-total-count, table.past-emails-tbl").removeClass("hidden"); for (var c = "", d = "", e = "https://images.benchmarkemail.com/", f = 0, g = a.length; f < g; f++) c = "", c += '<li eid="' + a[f].ID + "\"><a name='ancSelectEmail' onClick=\"javascript:LayoutPastEmailSelect(" + a[f].ID + ');" class="pl-thumbname">' + a[f].Name + "</a>", c += '<a class="pl-thumb" name=\'ancPreviewEmail\' onClick="javascript:LayoutPastEmailSelect(' + a[f].ID + ');" ><img src="' + e + "client" + _CID + "/sst_" + a[f].ID + '.jpg" alt="' + a[f].Name + '" onerror="this.src=\'/images/default_sst.gif\';"  /></a>', c += '<div class="layout-select-opts">', c += "<a name='ancPreviewEmail' onClick=\"javascript:LayoutPastEmailPreview(" + a[f].ID + ');" title="' + JS_PREVIEW + '" class="layout-prev"></a>', c += "<a name='ancUnFavoriteEmail' onClick=\"javascript:LayoutPastEmailUnFavorite(" + a[f].ID + ', this);" class="layout-fav', "1" != a[f].IsFavorite && (c += " nofav"), c += '"></a>', c += '<div class="dropdown template-dropdown">', c += '<button class="btn btn-default dropdown-toggle icon-only" type="button" id="dropdownTool' + a[f].ID + '" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">', c += "</button>", c += '<ul class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownTool' + a[f].ID + '">', c += "<li><a name='ancFavoriteEmail' onClick=\"javascript:LayoutPastEmailFavorite(" + a[f].ID + ');" class="dd-fav', "1" == a[f].IsFavorite && (c += " hidden"), c += '">' + JS_FAVORITE + "</a></li>", c += "<li><a name='ancUnFavoriteEmailOpt' onClick=\"javascript:LayoutPastEmailUnFavoriteOpt(" + a[f].ID + ');" class="dd-fav', "1" != a[f].IsFavorite && (c += " hidden"), c += '">' + JS_UNFAVORITE + "</a></li>", 1 == JS_HAS_SUB_ACCOUNTS && (c += "<li><a name='ancShareEmail' onClick=\"javascript:LayoutPastEmailShare(" + a[f].ID + ');">' + JS_SHARE_WITH_SUBACCOUNTS + "</a></li>"), c += "</ul>", c += "</div>", c += "</li>", $(".pl-thumbview").append(c), d = "", d += '<tr eid="' + a[f].ID + '">', d += "<td><a name='ancPreviewEmail' onClick=\"javascript:LayoutPastEmailSelect(" + a[f].ID + ');" ><img src="' + e + "client" + _CID + "/sst_" + a[f].ID + '.jpg" onerror="this.src=\'/images/default_sst.gif\';" alt="' + a[f].Name + '" width="37" height="40" title="' + JS_PREVIEW + '" /></a></td>', d += "<td><a name='ancSelectEmail' onClick=\"javascript:LayoutPastEmailSelect(" + a[f].ID + ');">' + a[f].Name + "</a></td>", d += "<td>" + a[f].CreatedDate + "</td>", d += "<td>" + a[f].ModifiedDate + "</td>", d += "Incomplete" == a[f].StatusText ? "<td><span class=incomplete>" + JS_INCOMPLETE + "</span></td>" : "Draft" == a[f].StatusText ? "<td><span class=draft>" + JS_DRAFT + "</span></td>" : "Sent" == a[f].StatusText ? "<td><span class=sent>" + JS_SENT + "</span></td>" : "<td><span class=incomplete>" + a[f].StatusText + "</span></td>", d += '<td class="past-tbl-tools">', d += "<a name='ancPreviewEmail' onClick=\"javascript:LayoutPastEmailPreview(" + a[f].ID + ');" title="' + JS_PREVIEW + '" class="layout-prev"></a>', d += "<a name='ancUnFavoriteEmail' onClick=\"javascript:LayoutPastEmailUnFavorite(" + a[f].ID + ', this);" class="layout-fav', "1" != a[f].IsFavorite && (d += " nofav"), d += '"></a>', d += '<div class="dropdown template-dropdown">', d += '<button class="btn btn-default dropdown-toggle icon-only" type="button" id="dropdownTool2' + a[f].ID + '" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">', d += "</button>", d += '<ul class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownTool2' + a[f].ID + '">', d += "<li><a name='ancFavoriteEmail' onClick=\"javascript:LayoutPastEmailFavorite(" + a[f].ID + ');" class="dd-fav', "1" == a[f].IsFavorite && (d += " hidden"), d += '">' + JS_FAVORITE + "</a></li>", d += "<li><a name='ancUnFavoriteEmailOpt' onClick=\"javascript:LayoutPastEmailUnFavoriteOpt(" + a[f].ID + ');" class="dd-fav', "1" != a[f].IsFavorite && (d += " hidden"), d += '">' + JS_UNFAVORITE + "</a></li>", 1 == JS_HAS_SUB_ACCOUNTS && (d += "<li><a name='ancShareEmail' onClick=\"javascript:LayoutPastEmailShare(" + a[f].ID + ');">' + JS_SHARE_WITH_SUBACCOUNTS + "</a></li>"), d += "</ul>", d += "</div>", d += "</td>", d += "</tr>", $("tbody", "table.past-emails-tbl").append(d);
    c = null, d = null, $(".past-layouts-select").hasClass("selected") && ($(".past-layouts-wrap").removeClass("hidden"), 0 == plOldSection ? ($("li.pl-thumbs").addClass("ui-state-active"), $("#past-emails-thumbs").removeClass("hidden"), $("#past-emails-loading, #past-emails-list").addClass("hidden")) : ($("#past-emails-list").removeClass("hidden"), $("li.pl-list").addClass("ui-state-active"), $("#past-emails-loading, #past-emails-thumbs").addClass("hidden"))), b < plTotalRecords ? $(".pl-load-more").removeClass("hidden") : $(".pl-load-more").addClass("hidden"), plLoading = 0 }

function SetLayout(a) { isLoaded = !1, "0" == _IS_SAVED && ShowRefresh(), $("#_BME_dvEditArea").empty(), bmeAjax.AuthPost({ url: "/Emails/" + _EID + "/Layout", type: "POST", data: { LayoutID: a, Language: languageVal }, success: function (b) { "1" == b.Response.Status && (CurrentLayoutID = a, $("a", $("ul.layout-selection")).removeClass("selected"), $("a[layoutID=" + CurrentLayoutID + "]").addClass("selected"), "0" == _IS_SAVED ? (_IS_SAVED = 1, RefreshContentsNormal(b.Response.Data)) : RefreshContentsNormal(b.Response.Data, "true")) }, error: function (a, b, c) { alert(b) } }) }

function OpenLayoutUse(a) { "0" == _IS_SAVED ? LayoutUse(a) : ($("#dvLayoutUse").attr("eid", a), $("#dvLayoutUse").modal("show")) }

function OpenResetLayoutDialog(a) { toolBar = "layoutshare", $("#dvResetLayout").modal("show") }

function renderTooltip() { showTooltipInEditor && initBmTooltip() }

function checkForOnboarding() { getOnboardingMask(XToken, function (a) { onboardingMask = 0 == a ? INITIAL_FLAG_SUM : a, isIn(onboardingMask, EDITOR_TEST_SHOWN) || (setTimeout(function () { showTooltipInEditor = !0, initBmTooltip() }, 2e4), $(window).on("resize", renderTooltip), isIn(onboardingMask, EDITOR_TEST_SHOWN) || setOnboardingFlag(onboardingMask, EDITOR_TEST_SHOWN, function (a) { a > 0 ? onboardingMask = a : alert("Error setting onboarding flag") })) }), $("#sendTestGotItButton").on("click", gotItClick) }

function gotItClick(a) { $(a.target).parent().fadeOut(), showTooltipInEditor = !1 }

function checkDefaultStyles(a, b, c, d, e) { var f = "",
        g = "",
        h = "";
    a == c ? (g = b, g.indexOf("px") != -1 && "" != g && "0" != g && (g = "0px"), "0px" != g && ("" != $(e).val() && "none" != $(e).val() || ($(e).val("solid"), updateGlobalStylesBorderDefaults(a.replace("#", "") + "Style", "solid")), f = $(e).val(), "" == $(d).next().next("input").val() && ($(d).next().next("input").val("#000000"), $(d).next().next("input").change()), h = $(d).next().next("input").val())) : a == e ? (f = b, "none" != f && ("" != $(c).val() && "0px" != $(c).val() && "0" != $(c).val() || $(c).val("1"), g = $(c).val(), "" == $(d).next().next("input").val() && ($(d).next().next("input").val("#000000"), $(d).next().next("input").change()))) : a == d && (h = b, "none" != h && "" != h && ("" != $(c).val() && "0px" != $(c).val() && "0" != $(c).val() || $(c).val("1"), g = $(c).val(), "" != $(e).val() && "none" != $(e).val() || ($(e).val("solid"), updateGlobalStylesBorderDefaults(e.replace("#", ""), "solid")), f = $(e).val())) }

function styleApply(a) { ShowCustomSchemeSave(); var b = $(a).val(),
        c = $(a).attr("id"),
        d = !1; "undefined" == typeof c && (c = $(a).prev().prev("input").attr("id")); var e = []; "pgBorder" == c || "pgBorderStyle" == c || "pgBGBorder" == c ? (checkDefaultStyles("#" + c, b, "#pgBorder", "#pgBGBorder", "#pgBorderStyle"), e[0] = { rule: "[name=bmeMainColumn]", style: "border-width", value: $("#pgBorder").val() + "px" }, e[1] = { rule: "[name=bmeMainColumn]", style: "border-color", value: $("#pgBGBorder").next().next("input").val() }, e[2] = { rule: "[name=bmeMainColumn]", style: "border-style", value: $("#pgBorderStyle").val() }) : "frmBorder" == c || "frmBorderStyle" == c || "frmBGBorder" == c ? (checkDefaultStyles("#" + c, b, "#frmBorder", "#frmBGBorder", "#frmBorderStyle"), e = applyFrameStyle()) : "preTBorder" == c || "preTBorderStyle" == c || "preTBGBorder" == c ? (checkDefaultStyles("#" + c, b, "#preTBorder", "#preTBGBorder", "#preTBorderStyle"), e[0] = { rule: "[name=bmePreHeader]", style: "border-top-width", value: $("#preTBorder").val() + "px" }, e[1] = { rule: "[name=bmePreHeader]", style: "border-top-style", value: $("#preTBorderStyle").val() }, e[2] = { rule: "[name=bmePreHeader]", style: "border-top-color", value: $("#preTBGBorder").next().next("input").val() }) : "preBBorder" == c || "preBBorderStyle" == c || "preBBGBorder" == c ? (checkDefaultStyles("#" + c, b, "#preBBorder", "#preBBGBorder", "#preBBorderStyle"), e[0] = { rule: "[name=bmePreHeader]", style: "border-bottom-width", value: $("#preBBorder").val() + "px" }, e[1] = { rule: "[name=bmePreHeader]", style: "border-bottom-style", value: $("#preBBorderStyle").val() }, e[2] = { rule: "[name=bmePreHeader]", style: "border-bottom-color", value: $("#preBBGBorder").next().next("input").val() }) : "hdTBorder" == c || "hdTBorderStyle" == c || "hdTBGBorder" == c ? (checkDefaultStyles("#" + c, b, "#hdTBorder", "#hdTBGBorder", "#hdTBorderStyle"), e[0] = { rule: "[name=bmeHeader]", style: "border-top-width", value: $("#hdTBorder").val() + "px" }, e[1] = { rule: "[name=bmeHeader]", style: "border-top-style", value: $("#hdTBorderStyle").val() }, e[2] = { rule: "[name=bmeHeader]", style: "border-top-color", value: $("#hdTBGBorder").next().next("input").val() }) : "hdBBorder" == c || "hdBBorderStyle" == c || "hdBBGBorder" == c ? (checkDefaultStyles("#" + c, b, "#hdBBorder", "#hdBBGBorder", "#hdBBorderStyle"), e[0] = { rule: "[name=bmeHeader]", style: "border-bottom-width", value: $("#hdBBorder").val() + "px" }, e[1] = { rule: "[name=bmeHeader]", style: "border-bottom-style", value: $("#hdBBorderStyle").val() }, e[2] = { rule: "[name=bmeHeader]", style: "border-bottom-color", value: $("#hdBBGBorder").next().next("input").val() }) : "bdTBorder" == c || "bdTBorderStyle" == c || "bdTBGBorder" == c ? (checkDefaultStyles("#" + c, b, "#bdTBorder", "#bdTBGBorder", "#bdTBorderStyle"), e[0] = { rule: "[name=bmeBody]", style: "border-top-width", value: $("#bdTBorder").val() + "px" }, e[1] = { rule: "[name=bmeBody]", style: "border-top-style", value: $("#bdTBorderStyle").val() }, e[2] = { rule: "[name=bmeBody]", style: "border-top-color", value: $("#bdTBGBorder").next().next("input").val() }) : "bdBBorder" == c || "bdBBGBorder" == c || "bdBBorderStyle" == c ? (checkDefaultStyles("#" + c, b, "#bdBBorder", "#bdBBGBorder", "#bdBBorderStyle"), e[0] = { rule: "[name=bmeBody]", style: "border-bottom-width", value: $("#bdBBorder").val() + "px" }, e[1] = { rule: "[name=bmeBody]", style: "border-bottom-style", value: $("#bdBBorderStyle").val() }, e[2] = { rule: "[name=bmeBody]", style: "border-bottom-color", value: $("#bdBBGBorder").next().next("input").val() }) : "ftTBorder" == c || "ftTBorderStyle" == c || "ftTBGBorder" == c ? (checkDefaultStyles("#" + c, b, "#ftTBorder", "#ftTBGBorder", "#ftTBorderStyle"), e[0] = { rule: "[name=bmeFooter]", style: "border-top-width", value: $("#ftTBorder").val() + "px" }, e[1] = { rule: "[name=bmeFooter]", style: "border-top-style", value: $("#ftTBorderStyle").val() }, e[2] = { rule: "[name=bmeFooter]", style: "border-top-color", value: $("#ftTBGBorder").next().next("input").val() }) : "ftBBorder" == c || "ftBBorderStyle" == c || "ftBBGBorder" == c ? (checkDefaultStyles("#" + c, b, "#ftBBorder", "#ftBBGBorder", "#ftBBorderStyle"), e[0] = { rule: "[name=bmeFooter]", style: "border-bottom-width", value: $("#ftBBorder").val() + "px" }, e[1] = { rule: "[name=bmeFooter]", style: "border-bottom-style", value: $("#ftBBorderStyle").val() }, e[2] = { rule: "[name=bmeFooter]", style: "border-bottom-color", value: $("#ftBBGBorder").next().next("input").val() }) : "pftTBorder" == c || "pftTBorderStyle" == c || "pftTBGBorder" == c ? (checkDefaultStyles("#" + c, b, "#pftTBorder", "#pftTBGBorder", "#pftTBorderStyle"), e[0] = { rule: "[name=bmePreFooter]", style: "border-top-width", value: $("#pftTBorder").val() + "px" }, e[1] = { rule: "[name=bmePreFooter]", style: "border-top-style", value: $("#pftTBorderStyle").val() }, e[2] = { rule: "[name=bmePreFooter]", style: "border-top-color", value: $("#pftTBGBorder").next().next("input").val() }) : "pftBBorder" == c || "pftBBorderStyle" == c || "pftBBGBorder" == c ? (checkDefaultStyles("#" + c, b, "#pftBBorder", "#pftBBGBorder", "#pftBBorderStyle"), e[0] = { rule: "[name=bmePreFooter]", style: "border-bottom-width", value: $("#pftBBorder").val() + "px" }, e[1] = { rule: "[name=bmePreFooter]", style: "border-bottom-style", value: $("#pftBBorderStyle").val() }, e[2] = { rule: "[name=bmePreFooter]", style: "border-bottom-color", value: $("#pftBBGBorder").next().next("input").val() }) : "col1TBorder" == c || "col1TBorderStyle" == c || "col1TBGBorder" == c ? (checkDefaultStyles("#" + c, b, "#col1TBorder", "#col1TBGBorder", "#col1TBorderStyle"), e[0] = { rule: "[name=bmeLeftColumn]", style: "border-top-width", value: $("#col1TBorder").val() + "px" }, e[1] = { rule: "[name=bmeColumn1]", style: "border-top-width", value: $("#col1TBorder").val() + "px" }, e[2] = { rule: "[name=bmeLeftColumn]", style: "border-top-style", value: $("#col1TBorderStyle").val() }, e[3] = { rule: "[name=bmeColumn1]", style: "border-top-style", value: $("#col1TBorderStyle").val() }, e[4] = { rule: "[name=bmeLeftColumn]", style: "border-top-color", value: $("#col1TBGBorder").next().next("input").val() }, e[5] = { rule: "[name=bmeColumn1]", style: "border-top-color", value: $("#col1TBGBorder").next().next("input").val() }) : "col1RBorder" == c || "col1RBorderStyle" == c || "col1RBGBorder" == c ? (checkDefaultStyles("#" + c, b, "#col1RBorder", "#col1RBGBorder", "#col1RBorderStyle"), e[0] = { rule: "[name=bmeLeftColumn]", style: "border-right-width", value: $("#col1RBorder").val() + "px" }, e[1] = { rule: "[name=bmeColumn1]", style: "border-right-width", value: $("#col1RBorder").val() + "px" }, e[2] = { rule: "[name=bmeLeftColumn]", style: "border-right-style", value: $("#col1RBorderStyle").val() }, e[3] = { rule: "[name=bmeColumn1]", style: "border-right-style", value: $("#col1RBorderStyle").val() }, e[4] = { rule: "[name=bmeLeftColumn]", style: "border-right-color", value: $("#col1RBGBorder").next().next("input").val() }, e[5] = { rule: "[name=bmeColumn1]", style: "border-right-color", value: $("#col1RBGBorder").next().next("input").val() }, d = !0) : "col1BBorder" == c || "col1BBorderStyle" == c || "col1BBGBorder" == c ? (checkDefaultStyles("#" + c, b, "#col1BBorder", "#col1BBGBorder", "#col1BBorderStyle"), e[0] = { rule: "[name=bmeLeftColumn]", style: "border-bottom-width", value: $("#col1BBorder").val() + "px" }, e[1] = { rule: "[name=bmeColumn1]", style: "border-bottom-width", value: $("#col1BBorder").val() + "px" }, e[2] = { rule: "[name=bmeLeftColumn]", style: "border-bottom-style", value: $("#col1BBorderStyle").val() }, e[3] = { rule: "[name=bmeColumn1]", style: "border-bottom-style", value: $("#col1BBorderStyle").val() }, e[4] = { rule: "[name=bmeLeftColumn]", style: "border-bottom-color", value: $("#col1BBGBorder").next().next("input").val() }, e[5] = { rule: "[name=bmeColumn1]", style: "border-bottom-color", value: $("#col1BBGBorder").next().next("input").val() }) : "col2LBorder" == c || "col2LBorderStyle" == c || "col2LBGBorder" == c ? (checkDefaultStyles("#" + c, b, "#col2LBorder", "#col2LBGBorder", "#col2LBorderStyle"), e[0] = { rule: "[name=bmeRightColumn]", style: "border-left-width", value: $("#col2LBorder").val() + "px" }, e[1] = { rule: "[name=bmeColumn2]", style: "border-left-width", value: $("#col2LBorder").val() + "px" }, e[2] = { rule: "[name=bmeRightColumn]", style: "border-left-style", value: $("#col2LBorderStyle").val() }, e[3] = { rule: "[name=bmeColumn2]", style: "border-left-style", value: $("#col2LBorderStyle").val() }, e[4] = { rule: "[name=bmeRightColumn]", style: "border-left-color", value: $("#col2LBGBorder").next().next("input").val() }, e[5] = { rule: "[name=bmeColumn2]", style: "border-left-color", value: $("#col2LBGBorder").next().next("input").val() }, d = !0) : "col2TBorder" == c || "col2TBorderStyle" == c || "col2TBGBorder" == c ? (checkDefaultStyles("#" + c, b, "#col2TBorder", "#col2TBGBorder", "#col2TBorderStyle"), e[0] = { rule: "[name=bmeRightColumn]", style: "border-top-width", value: $("#col2TBorder").val() + "px" }, e[1] = { rule: "[name=bmeColumn2]", style: "border-top-width", value: $("#col2TBorder").val() + "px" }, e[2] = { rule: "[name=bmeRightColumn]", style: "border-top-style", value: $("#col2TBorderStyle").val() }, e[3] = { rule: "[name=bmeColumn2]", style: "border-top-style", value: $("#col2TBorderStyle").val() }, e[4] = { rule: "[name=bmeRightColumn]", style: "border-top-color", value: $("#col2TBGBorder").next().next("input").val() }, e[5] = { rule: "[name=bmeColumn2]", style: "border-top-color", value: $("#col2TBGBorder").next().next("input").val() }) : "col2BBorder" == c || "col2BBorderStyle" == c || "col2BBGBorder" == c ? (checkDefaultStyles("#" + c, b, "#col2BBorder", "#col2BBGBorder", "#col2BBorderStyle"), e[0] = { rule: "[name=bmeRightColumn]", style: "border-bottom-width", value: $("#col2BBorder").val() + "px" }, e[1] = { rule: "[name=bmeColumn2]", style: "border-bottom-width", value: $("#col2BBorder").val() + "px" }, e[2] = { rule: "[name=bmeRightColumn]", style: "border-bottom-style", value: $("#col2BBorderStyle").val() }, e[3] = { rule: "[name=bmeColumn2]", style: "border-bottom-style", value: $("#col2BBorderStyle").val() }, e[4] = { rule: "[name=bmeRightColumn]", style: "border-bottom-color", value: $("#col2BBGBorder").next().next("input").val() }, e[5] = { rule: "[name=bmeColumn2]", style: "border-bottom-color", value: $("#col2BBGBorder").next().next("input").val() }) : "col3TBorder" == c || "col3TBorderStyle" == c || "col3TBGBorder" == c ? (checkDefaultStyles("#" + c, b, "#col3TBorder", "#col3TBGBorder", "#col3TBorderStyle"), e[0] = { rule: "[name=bmeColumn3]", style: "border-top-width", value: $("#col3TBorder").val() + "px" }, e[1] = { rule: "[name=bmeColumn3]", style: "border-top-style", value: $("#col3TBorderStyle").val() }, e[2] = { rule: "[name=bmeColumn3]", style: "border-top-color", value: $("#col3TBGBorder").next().next("input").val() }) : "col3LBorder" == c || "col3LBorderStyle" == c || "col3LBGBorder" == c ? (checkDefaultStyles("#" + c, b, "#col3LBorder", "#col3LBGBorder", "#col3LBorderStyle"), e[0] = { rule: "[name=bmeColumn3]", style: "border-left-width", value: $("#col3LBorder").val() + "px" }, e[1] = { rule: "[name=bmeColumn3]", style: "border-left-style", value: $("#col3LBorderStyle").val() }, e[2] = { rule: "[name=bmeColumn3]", style: "border-left-color", value: $("#col3LBGBorder").next().next("input").val() }, d = !0) : "col3BBorder" != c && "col3BBorderStyle" != c && "col3BBGBorder" != c || (checkDefaultStyles("#" + c, b, "#col3BBorder", "#col3BBGBorder", "#col3BBorderStyle"), e[0] = { rule: "[name=bmeColumn3]", style: "border-bottom-width", value: $("#col3BBorder").val() + "px" }, e[1] = { rule: "[name=bmeColumn3]", style: "border-bottom-style", value: $("#col3BBorderStyle").val() }, e[2] = { rule: "[name=bmeColumn3]", style: "border-bottom-color", value: $("#col3BBGBorder").next().next("input").val() }), ApplyCustomChanges(e), d && ResizeBlocks() }

function getBorderRadius(a) { var b = $(a).attr("style"),
        c = new RegExp("border-radius:[ ]*([0-9]*[a-z ]*);", "i"),
        d = c.exec(b); return "undefined" != typeof d && "undefined" != d && null != d ? d[1] : "" }

function fixStyle() { if ($(".blk_container").each(function () { $(this).attr("style", returnStyle(this)) }), null == $("[name=bmeMainColumnParentTable]").html()) { var a = $("[name=bmeMainColumn]").parent().html();
        $("[name=bmeMainColumn]").parent().attr("align", "center"), $("[name=bmeMainColumn]").parent().html("<table cellspacing=0 cellpadding=0 border=0 name=bmeMainColumnParentTable><tr><td name=bmeMainColumnParent>" + a + "</td></tr></table>") } null == $("[name=bmeMainContentParent]").html() && $("[name=bmeMainContent]").parent().attr("name", "bmeMainContentParent"), "" == getFrameRadius() && isIE11 && ApplyCustomChanges(applyFrameStyle(5)), "" != getFrameRadius() && ($(".editor-slider", "#fldFrameBorderRadius").slider("value", parseWidth(getFrameRadius())), $(".new-slider-val", $(".editor-slider", "#fldFrameBorderRadius")).text(parseWidth(getFrameRadius()))) }

function returnStyle(a) { "undefined" == typeof $(a).attr("style") ? styleText = "" : styleText = $(a).attr("style"); var b = "",
        c = 0,
        d = 0,
        e = "",
        f = "",
        g = "",
        h = "",
        i = ""; return styleText.indexOf("border-color: ") != -1 && (c = styleText.indexOf("border-color: "), d = styleText.indexOf(";", c), b = styleText.substring(c, d + 1), e = "", f = $(a).css("border-top-color"), g = $(a).css("border-left-color"), h = $(a).css("border-right-color"), i = $(a).css("border-bottom-color"), f == g && g == h && h == i ? (f = "transparent") ? styleText = Replace(styleText, b, "") : styleText = Replace(styleText, b, "border-color: " + f + ";") : ("transparent" != f && (e += "border-top-color: " + f + "; "), "transparent" != g && (e += "border-left-color: " + g + "; "), "transparent" != h && (e += "border-right-color: " + h + "; "), "transparent" != i && (e += "border-bottom-color: " + i + "; "), styleText = Replace(styleText, b, e))), styleText.indexOf("border-style: ") != -1 && (c = styleText.indexOf("border-style: "), d = styleText.indexOf(";", c), b = styleText.substring(c, d + 1), e = "", f = $(a).css("border-top-style"), g = $(a).css("border-left-style"), h = $(a).css("border-right-style"), i = $(a).css("border-bottom-style"), f == g && g == h && h == i ? (f = "none") ? styleText = Replace(styleText, b, "") : styleText = Replace(styleText, b, "border-style: " + f + ";") : ("none" != f && (e += "border-top-style: " + f + "; "), "none" != g && (e += "border-left-style: " + g + "; "), "none" != h && (e += "border-right-style: " + h + "; "), "none" != i && (e += "border-bottom-style: " + i + "; "), styleText = Replace(styleText, b, e))), styleText.indexOf("border-width: ") != -1 && (c = styleText.indexOf("border-width: "), d = styleText.indexOf(";", c), b = styleText.substring(c, d + 1), e = "", f = $(a).css("border-top-width"), g = $(a).css("border-left-width"), h = $(a).css("border-right-width"), i = $(a).css("border-bottom-width"), f == g && g == h && h == i ? (f = "0px") ? styleText = Replace(styleText, b, "") : styleText = Replace(styleText, b, "border-width: " + f + ";") : ("0px" != f && (e += "border-top-width: " + f + "; "), "0px" != g && (e += "border-left-width: " + g + "; "), "0px" != h && (e += "border-right-width: " + h + "; "), "0px" != i && (e += "border-bottom-width: " + i + "; "), styleText = Replace(styleText, b, e))), styleText = Replace(styleText, "border-top: 0px none transparent;", ""), styleText = Replace(styleText, "border-left: 0px none transparent;", ""), styleText = Replace(styleText, "border-right: 0px none transparent;", ""), styleText = Replace(styleText, "border-bottom: 0px none transparent;", ""), styleText }

function resetBlockHandler(a) { ShowCustomSchemeSave(); var b = $(a).attr("id"),
        c = b.substring(1); if (b.indexOf("BGColor") != -1) $("#" + c).next("input").val(""), $("#" + c).next().next("input").val(""), $("#" + c).next("input").change(), $("#" + c).next().next("input").change();
    else if (b.indexOf("Border") != -1) { $("#" + c).val(""), $("#" + c + "Style").val("none");
        updateGlobalStylesBorderDefaults(c + "Style", "none"), $("#" + c.replace("Border", "BGBorder")).next("input").val(""), $("#" + c.replace("Border", "BGBorder")).next().next("input").val(""), $("#" + c.replace("Border", "BGBorder")).next("input").change(), $("#" + c.replace("Border", "BGBorder")).next().next("input").change() } }

function SetListStyle(a) { 0 == a ? ($("a.tool-numlist").removeClass("tool-selected"), $("a.tool-bullist").removeClass("tool-selected")) : 1 == a ? ($("a.tool-numlist").addClass("tool-selected"), $("a.tool-bullist").removeClass("tool-selected")) : 2 == a && ($("a.tool-numlist").removeClass("tool-selected"), $("a.tool-bullist").addClass("tool-selected")) }

function setEmailLayoutFrame(a, b) { a === !0 ? ($(".framed-bg").addClass("selected"), $(".fullwidth-bg").removeClass("selected"), $("table[name=bmeMainColumn]").removeAttr("width"), $("table[name=bmeMainColumn]").css("max-width", "600px"), $("table[name=bmeMainColumn]").addClass("bmeHolder"), $("table[name=bmeMainColumnParentTable]").removeAttr("width"), $("fieldset#fldFrameBorder, fieldset#fldFrameBorderRadius, fieldset#fldFrameBorderInclude").removeClass("hidden")) : ($(".framed-bg").removeClass("selected"), $(".fullwidth-bg").removeClass("selected").addClass("selected"), $("table[name=bmeMainColumnParentTable]").attr("width", "100%"), $("table[name=bmeMainColumn]").attr("width", "100%"), $("table[name=bmeMainColumn]").css("max-width", "100%"), $("table[name=bmeMainColumn]").removeClass("bmeHolder"), $("fieldset#fldFrameBorder, fieldset#fldFrameBorderRadius, fieldset#fldFrameBorderInclude").addClass("hidden"), $(".editor-slider", "#fldFrameBorderRadius").slider("value", "0"), $(".new-slider-val", $(".editor-slider", "#fldFrameBorderRadius")).text("0"), $("#frmBorder").val("0"), $("#frmBorderStyle").val("none"), updateGlobalStylesBorderDefaults("frmBorderStyle", "none"), b === !1 && $(".editor-save").addClass("hide"), $("#frmBGBorder").val("rgba(0,0,0,0)"), $("#frmBGBorder").next().next("input").val(""), $("#frmBGBorder").next().next("input").change(), ApplyCustomChanges(applyFrameStyle()), b === !1 && ($(".editor-save").removeClass("hide"), $(".editor-save").addClass("hidden"))) }

function loadShareWithSubaccount() { $("#clientlist").html(preloaderAni), JS_HAS_SUB_ACCOUNTS && bmeAjax.AuthPost({ url: "/Client/SubAccount", type: "GET", success: function (a) { if ("1" == a.Response.Status && a.Response.Count > 0) { _.templateSettings.variable = "sb"; var b = _.template($("#ClientGridTemplate").html());
                $("#clientlist").empty(), $("#clientlist").append(b(a.Response.Data)) } }, error: function (a, b, c) { alert(b) } }) }

function LayoutPastEmailShare(a) { is_subaccounts_loaded === !1 && (loadShareWithSubaccount(), is_subaccounts_loaded = !0), OpenLayoutShare(a) }

function OpenLayoutShare(a) { toolBar = "layoutshare", $("#dvLayoutShareDone").addClass("hidden"), $("#dvLayoutShare").attr("eid", a), $("#dvLayoutShare").modal("show") }

function subaccountsCheck(a) { var b = $('input[name="cltCheck"]').is(":checked"),
        c = $("#ancShare");
    b ? c.removeClass("disabled") : c.addClass("disabled"), a === !0 && $("#clientSelectAll").prop("checked", !1) }

function clientSelectAllToggle() { var a = $("input[name='cltCheck']");
    $("#clientSelectAll").prop("checked") ? a.prop("checked", !0) : a.prop("checked", !1), subaccountsCheck() }

function layoutShareConfirm() { var a = "0"; if ($("input[name='cltCheck']:checked").each(function () { a += "," + $(this).attr("value") }), "0" != a) { var b = $("#ancShare"); if (!b.hasClass("disabled") && !b.hasClass("isLoading")) { var c = $("#dvLayoutShare").attr("eid");
            $("#dvLayoutShareDone").addClass("hidden"), bmeAjax.PreLoader("#ancShare"), bmeAjax.AuthPost({ url: "/Emails/" + c + "/LayoutShare", type: "POST", data: { SubAccount: a }, success: function (a) { bmeAjax.RemovePreLoader("#ancShare"), $("#dvLayoutShareDone").removeClass("hidden") }, error: function (a) { bmeAjax.RemovePreLoader("#ancShare"), alert("Error") } }) } } }

function fullWidth() { return isInTextMode || ($(".editor-main").toggleClass("editor-full"), $(".editor-main").hasClass("editor-full") ? $(".editor-sidebar").addClass("hidden") : $(".editor-sidebar").removeClass("hidden"), greedyNavReset(), initGreedyNav()), !1 }

function resetToolBar() { $(".greedy-nav, .default-nav").addClass("hidden"), $(".vtools > .tool-icon, .htools > .tool-icon, .vtools > .tool-btn-dd, .htools > .tool-btn-dd, .format-textcolor").addClass("hidden").removeClass("tool-disabled"), $("#toolGuideBtn").removeClass("hidden"), $("#toolResetLayout").removeClass("hidden"), $("#ancTextModeDD").removeClass("hidden") }

function showAllTools() { $(".vtools > .tool-icon, .htools > .tool-icon, .vtools > .tool-btn-dd, .htools > .tool-btn-dd, .format-textcolor").removeClass("hidden") }

function showDefaultNav() { $(".default-nav").removeClass("hidden"), $(".greedy-nav").addClass("hidden") }

function showEditNav() { $(".greedy-nav").removeClass("hidden"), $(".default-nav").addClass("hidden") }

function renderToolBar() { var a = "";
    a += "<nav class='greedy-nav hidden'>", a += "<div class='vtools'>", a += render_editortool("bold", JS_BOLD), a += render_editortool("italic", JS_ITALIC), a += render_editortool("underline", JS_UNDERLINE), a += render_editortool("strike", JS_STRIKE), a += '<div class="format-textcolor">', a += '<a id="textColorSwatch" onmouseover="javascript:ToolAction(\'textcolor\',\'mouseover\', this);" class="tool-icon tool-textcolor" title="' + JS_TEXT_COLOR + '">', a += '<input type="text" value="#3c464d" style="display: none;" id="toolbarColor">', a += "</a>", a += "</div>", a += '<div class="format-font-style tool-btn-dd"><a class="tool-btn" title="">' + JS_FONT + "</a>", a += render_menu_dropdown("fontfamily"), a += "</div>", a += '<div class="format-size tool-btn-dd"><a class="tool-btn">' + JS_SIZE + "</a>", a += render_menu_dropdown("fontsize"), a += "</div>", a += '<div class="format-align tool-btn-dd">', a += '<a class="tool-icon tool-alignleft tool-dd" title="' + JS_ALIGN_LEFT + '"></a>', a += render_menu_dropdown("align"), a += "</div>", a += render_editortool("numlist", JS_NUMBERED_LIST), a += render_editortool("bullist", JS_BULLETED_LIST), a += render_editortool("link", JS_INSERT_LINK, !0), a += render_editortool("unlink", JS_REMOVE_LINK), a += render_editortool("anchor", JS_ANCHOR), a += render_editortool("image", JS_INSERT_IMAGE, !0), a += render_editortool("video", JS_INSERT_VIDEO, !0), a += render_editortool("attach", JS_INSERT_ATTACHMENT, !0), a += '<div class="rss-head tool-btn-dd"><a class="tool-btn">' + JS_RSS_HEADER_TAGS + "</a>", a += render_menu_dropdown("rsshead"), a += "</div>", a += '<div class="rss-feed tool-btn-dd"><a class="tool-btn">' + JS_RSS_FEED_TAGS + "</a>", a += render_menu_dropdown("rssfeed"), a += "</div>", a += '<div class="format-merge tool-btn-dd"><a class="tool-btn">' + JS_MERGE + "</a>", a += render_menu_dropdown("merge"), a += "</div>", a += render_editortool("clipboard", JS_PASTE), a += render_editortool("code", JS_SOURCE_CODE), a += render_editortool("undo", JS_UNDO), a += render_editortool("redo", JS_REDO), a += "</div>", a += "<div class='more-btn' onClick='javascript:toolsMoreToggle();'>" + JS_MORE + "</div>", a += "<div class='htools hidden'></div>", a += "</nav>", a += "<nav class='default-nav hidden'>", a += '<button id="ancTextModeDD" onClick="javascript:ToolCommand(\'TextModeDD\', this);" class="btn btn-white2 pt-sync hidden" data-toggle="tooltip" data-placement="bottom" data-original-title="">' + JS_TEXT_VERSION + "</button>", a += '<button id="ancHtmlModeDD" onClick="javascript:ToolCommand(\'HtmlModeDD\', this);" class="btn btn-white2 pt-sync hidden" data-toggle="tooltip" data-placement="bottom" data-original-title="">' + JS_HTML_CODE + "</button>", a += "<button class=\"btn btn-white2 hidden\" id='toolGuideBtn' onClick=\"javascript:ToolCommand('guides', this);\">" + JS_SHOW_BLOCKS + "</button>", a += "<button class=\"btn btn-white2 hidden\" id='toolResetLayout' onClick=\"javascript:ToolCommand('resetlayout', this);\">" + JS_RESET_LAYOUT + "</button>", a += '<button id="ancCopyHTMLDD" class="btn btn-white2 hidden">' + JS_COPY_HTML + "</button>", a += '<div class="format-merge-plaintext tool-btn-dd hidden"><a class="tool-btn">' + JS_MERGE + "</a>", a += render_menu_dropdown("merge"), a += "</div>", a += "</nav>", $(toolbarCtrl).html(a) }

function LoadToolBar(a) {
    var b = !1;
    if (b = null == $(toolbarCtrl).html() || "" == $(toolbarCtrl).html(), b ? renderToolBar() : resetToolBar(), 0 == a) showAllTools(), $(".rss-head, .rss-feed").addClass("hidden");
    else if (1 == a || "socialfollow" == a || "socialshare" == a) $(".tool-bold, .tool-italic, .format-textcolor, .format-font-style, .format-size").removeClass("hidden");
    else if ("navbar" == a) $(".tool-bold, .tool-italic, .tool-underline, .format-textcolor, .format-font-style, .format-size, .tool-link, .tool-unlink").removeClass("hidden");
    else if ("button" == a) $(".tool-bold, .tool-italic, .format-textcolor, .format-font-style, .format-size, .tool-link, .tool-unlink").removeClass("hidden");
    else if (3 == a || 4 == a) $(".tool-link, .tool-unlink").removeClass("hidden");
    else if (5 == a || "permission" == a || "rsshead" == a || "rssfeed" == a) {
        $(".tool-bold, .tool-italic, .format-textcolor, .format-font-style, .format-size").removeClass("hidden"), "rsshead" != a && "rssfeed" != a || $(".tool-underline").removeClass("tool-disabled").removeClass("hidden");
        var c = $(editTarget1).css("font-family"),
            d = $(editTarget1).css("font-size"),
            e = $(editTarget1).css("color");
        SetFontFamily(c), SetFontSize(d), $("#toolbarColor").spectrum("set", e)
    } else if ("rssheadcustom" == a) showAllTools(), $(".format-merge, .rss-feed").addClass("hidden");
    else if ("rssfeedcustom" == a) showAllTools(), $(".format-merge, .rss-head").addClass("hidden");
    else if ("footer" == a) { $(".tool-bold, .tool-italic, .format-textcolor, .format-font-style, .format-size").removeClass("hidden"); var c = $(editTarget1).css("font-family"),
            d = $(editTarget1).css("font-size"),
            e = $(editTarget1).css("color");
        SetFontFamily(c), SetFontSize(d), $("#toolbarColor").spectrum("set", e) } destroyToolBarColorPicker(), initToolBarColorpicker(), checkSync(), $(toolbarCtrl).removeClass("hidden"), a != -2 ? (showEditNav(), greedyNavReset(), initGreedyNav(), $(window).on("resize.greedyNavEvent", greedyNavCheckDebounce)) : ($(window).off("resize.greedyNavEvent"), showDefaultNav())
}

function resizeend() { new Date - rtime < delta ? setTimeout(resizeend, delta) : (rtimeout = !1, $("div.vtools").css("overflow", "visible")) }

function greedyNavReset() { var a = $("nav.greedy-nav .vtools"),
        b = $("nav.greedy-nav .htools"),
        c = $("nav.greedy-nav .more-btn");
    c.addClass("hidden"), b.addClass("hidden"), a.append(b.html()), b.html("") }

function initGreedyNav() { availableSpace = "", numOfVisibleItems = "", requiredSpace = "", numOfItems = 0, totalSpace = 0, breakWidths = [], $("nav.greedy-nav .vtools").children().each(function () { $(this).is(":visible") ? (totalSpace += $(this).outerWidth(!0), numOfItems += 1) : (totalSpace += .01, numOfItems += 1), breakWidths.push(totalSpace) }), greedyNavCheck() }

function greedyNavCheck() { $(".format-tool-menu").removeClass("visible"); var a = $("nav.greedy-nav .vtools"),
        b = $("nav.greedy-nav .htools"),
        c = $("nav.greedy-nav .more-btn");
    b.addClass("hidden"), availableSpace = c.hasClass("hidden") ? a.width() - c.outerWidth(!0) - 25 : a.width() - 25, numOfVisibleItems = a.children().length, requiredSpace = breakWidths[numOfVisibleItems - 1], requiredSpace > availableSpace ? (a.children().last().prependTo(b), numOfVisibleItems -= 1, greedyNavCheck()) : availableSpace > breakWidths[numOfVisibleItems] && (b.children().first().appendTo(a), numOfVisibleItems += 1); var d = numOfItems - numOfVisibleItems;
    c.attr("count", d), numOfVisibleItems === numOfItems ? c.addClass("hidden") : c.removeClass("hidden") }

function toolsMoreToggle() { $("nav.greedy-nav .htools").toggleClass("hidden") }

function template_field_seperator() { var a = ""; return a += "<fieldset class='field-seperator'></fieldset>" }

function template_field_alignment(a, b, c, d, e, f, g) { var h = "",
        i = ""; return g && (i = ' class="hidden"'), h += '<fieldset id="' + f + '"' + i + ">", h += '<label class="label-small">' + c + "</label>", h += "<input id=" + d + ' data-blocktype="' + a + '" onchange="javascript:selectChangeHandler(\'' + a + "', 'this');\" value=\"" + e + '" type="hidden">', h += '<ul class="alignment-container">', "horizontal" == b ? (h += '<li class="align hleft' + ("left" == e ? " selected" : "") + '" data-value="left" onclick="javascript:applyAlignmentStyle(this, \'#' + d + "');\"></li>", h += '<li class="align hcenter' + ("center" == e ? " selected" : "") + '" data-value="center" onclick="javascript:applyAlignmentStyle(this, \'#' + d + "');\"></li>", h += '<li class="align hright' + ("right" == e ? " selected" : "") + '" data-value="right" onclick="javascript:applyAlignmentStyle(this, \'#' + d + "');\"></li>", "button" == a && (h += '<li class="align hfull' + ("full" == e ? " selected" : "") + '" data-value="full" onclick="javascript:applyAlignmentStyle(this, \'#' + d + "');\"></li>")) : "vertical" == b && (h += '<li class="align vtop' + ("top" == e ? " selected" : "") + '" data-value="top" onclick="javascript:applyAlignmentStyle(this, \'#' + d + "');\"></li>", h += '<li class="align vmiddle' + ("middle" == e ? " selected" : "") + '" data-value="middle" onclick="javascript:applyAlignmentStyle(this, \'#' + d + "');\"></li>", h += '<li class="align vbottom' + ("bottom" == e ? " selected" : "") + '" data-value="bottom" onclick="javascript:applyAlignmentStyle(this, \'#' + d + "');\"></li>"), h += "</ul>", h += "</fieldset>" }

function template_field_TextInput(a, b, c, d, e, f, g) { var h = "",
        i = "";
    g && (i = ' id="' + g + '"'); var j = ""; return f && (j = ' placeholder="' + f + '"'), h += "<fieldset name=" + c + i + ">", h += "<label class=label-small>" + b + '</label><input class="form-control form-control-small" type=text name=' + d + " id=" + d + ' value="' + e + '" onchange="javascript:keyupEventHandler(\'' + a + "', this);\" " + j, h += isChrome ? ' onchange="' : ' onkeyup="', h += "javascript:keyupEventHandler('" + a + "', this);\" />", h += "</fieldset>" }

function template_field_NumInput(a, b, c, d, e) { var f = "",
        g = ""; return e && (g = ' placeholder="' + e + '"'), f += "<fieldset>", f += '<label class="label-small">' + b + '</label><input type=text class="form-control form-control-small input-num" maxlength="2" value=' + d + ' name="' + c + '" ' + g, f += isChrome ? ' onchange="' : ' onkeyup="', f += "javascript:keyupEventHandler('" + a + "', this);\" />px", f += "</fieldset>" }

function template_field_BorderStyles(a, b, c, d, e, f) { var g = ""; return "" == c && (c = "rgba(0, 0, 0, 0)"), g += "<fieldset>", g += '<label class="label-small">' + f + " <a class=reset-link id=rctrlBorder onclick=\"javascript:resetColorHandler('" + a + "', this);\"><small>" + JS_RESET + "</small></a></label>", g += "<div class=sidebar-select-item><input type=text class='color-selection' id=ctrlBGBorder style=\"display: none;\" value='" + c + "'>", g += '<input type="text" class="form-control form-control-small input-hex" onChange="javascript:hexChangeHandler(\'' + a + '\', this);" value="' + b + '" /></div>', g += '<div class="sidebar-select-item sidebar-select-item-2">', g += '<input id=ctrlBorderStyle data-blocktype="' + a + '" onchange="javascript:selectChangeHandler(\'' + a + "', 'this');\" value=\"" + d + '" type="hidden">', g += "<a id=btnBorderStyle class='tool-borderstyle' onclick=\"javascript:showBorderStyle(this);\"><span name='selected-border-icon' class='border-style-icons border-style-icons-" + d + "'></span>", g += "</a>", g += '<input id=ctrlBorder type=text value="' + e + '" placeholder=0 class="form-control form-control-small input-num" maxlength="2" ', g += isChrome ? ' onchange="' : ' onkeyup="', g += "javascript:keyupEventHandler('" + a + "', this);\" name=ctrlBorder /> px</div>", g += "</fieldset>" }

function template_field_Slider(a, b, c, d) { var e = "",
        f = "",
        g = ""; return c && (f = ' id="' + c + '"'), d && (g = " " + d), e += '<fieldset class="cellp-slider' + g + '"' + f + ">", e += '<label class="label-small">' + b + '</label><div class="editor-slider" id="' + a + '"></div>', e += "</fieldset>" }

function template_field_BackgroundColor(a, b, c, d, e, f) { var g = ""; return "" == c && (c = "rgba(0, 0, 0, 0)"), g += "<fieldset>", g += '<label class="label-small">' + d + " <a class=reset-link id=" + e + " onclick=\"javascript:resetColorHandler('" + a + "', this);\"><small>" + JS_RESET + "</small></a></label><input type=text class='color-selection' value='" + c + '\' style="display: none;" id=' + f + ">", g += '<input type="text" class="form-control form-control-small input-hex" onChange="javascript:hexChangeHandler(\'' + a + '\', this);" value="' + b + '" />', g += "</fieldset>" }

function template_field_LineHeight(a) { var b = ""; return b += "<fieldset>", b += '<label class="label-small">' + JS_LINE_HEIGHT + '</label><select id="lineHeight" class="form-control form-control-small" onchange="javascript:selectChangeHandler(\'' + a + "', this);\"><option value=''>" + JS_SELECT + "</option><option value='100%'>" + JS_SINGLE + "</option><option value='125%'>1.25</option><option value='150%'>1.5</option><option value='200%'>" + JS_DOUBLE + "</option></select>", b += "</fieldset>" }

function template_field_chkApplyAllItem(a, b) { var c = ""; return c += "<fieldset>", c += '<input type="checkbox" name="chkApplyAllItem" id="chkApplyAllItem" class="form-checkbox" onchange="javascript:colorChangeHandler(\'' + a + "', this);\" onclick=\"javascript:colorChangeHandler('" + a + '\', this);"><label for="chkApplyAllItem" class="form-option form-option-small">' + b + "</label>", c += "</fieldset>" }

function template_input_padding(a, b, c, d) { var e = ""; return e += e += '<div class="sidebar-select-item sidebar-sm-input"><input type="text" value="' + d + '" placeholder="0" name="' + c + '" onchange="javascript:keyupEventHandler(\'' + a + '\', this);" class="form-control form-control-small input-num" maxlength="2"> ' + b + "</div>" }

function template_field_addGroup(a, b, c, d) { var e = ""; return e += "<fieldset id=fldAdd>", e += '<a class="standard-btn add-service" name=' + c + " id=" + d + " onclick=\"javascript:colorChangeHandler('" + a + "', this);\"></a>", e += '<a class="lg-txt-link" name=' + c + " onclick=\"javascript:colorChangeHandler('" + a + "', this);\">" + b + "</a>", e += "</fieldset>" }

function template_field_removeGroup(a, b, c, d) { var e = ""; return e += "<fieldset id=fldRemove>", e += '<a class="standard-btn remove-service " name=' + c + " id=" + d + " onclick=\"javascript:colorChangeHandler('" + a + "', this);\"></a>", e += '<a class="lg-txt-link " name=' + c + " onclick=\"javascript:colorChangeHandler('" + a + "', this);\">" + b + "</a>", e += "</fieldset>" }

function template_field_columnLayout(a, b, c, d) { var e = ""; return e += '<fieldset class="layout-cols-option' + (1 == c ? " hidden" : "") + '">', e += '<label class="label-small">' + b + "</label>", e += '<ul class="layout-option-blocks column-layout">', e += "<li " + (30 == d ? 'class="layout-selected"' : "") + '><a class="col-one-third" onclick="javascript:colorChangeHandler(\'' + a + "', this);\"></a></li>", e += "<li " + (50 == d ? 'class="layout-selected"' : "") + '><a class="col-half" onclick="javascript:colorChangeHandler(\'' + a + "', this);\"></a></li>", e += "<li " + (70 == d ? 'class="layout-selected"' : "") + '><a class="col-two-third" onclick="javascript:colorChangeHandler(\'' + a + "', this);\"></a></li>", e += "</ul>", e += "</fieldset>" }

function template_field_SaveAndClose(a) { var b = ""; return b += "<fieldset id='field_SaveAndClose'>", b += "<div><a id=ancSave class='btn btn-primary' onclick=\"javascript:saveHandler('" + a + "', this);\">" + JS_SAVE_AND_CLOSE + "</a>", b += "<a id=ancCancel class='btn btn-link' onclick=\"javascript:cancelHandler('" + a + "', this);\">" + JS_CANCEL + "</a></div>", b += "</fieldset>" }

function template_field_SaveAndBack(a) { var b = ""; return b += "<fieldset id='field_SaveAndBack'><div>", b += "<a id=ancSaveBack class='btn btn-primary' onclick=\"javascript:colorChangeHandler('" + a + "', this);\">" + JS_SAVE + "</a>", b += '<a id=ancGoBack class="btn btn-link" onclick="javascript:backHandler(\'' + a + "', this);\">" + JS_CANCEL + "</a>", b += "</div></fieldset>" }

function template_guideControls(a, b) { var c = ""; return c = "<div class='guideOption' boxid='" + b + "'>", c += "<div class='dragHandle' title='" + JS_CLICK_AND_DRAG_TO_MOVE + "'></div>", "blk_footer" != a && "blk_permission" != a && (c += "<div class='copyHandle' onClick='javascript:copyBlockHandler(this,event);' title='" + JS_COPY_BLOCK + "'></div>", c += "<div class='deleteHandle' onClick='javascript:deleteBlockHandler(this,event);' title='" + JS_DELETE_BLOCK + "'></div>"), c += "</div>" }

function render_editortool(a, b, c) { var d = ""; return d += '<a class="tool-icon tool-' + a + ' " onClick="javascript:ToolCommand(\'' + a + '\', this);" title="' + b + '"', c && (d += " onmouseover=\"javascript:ToolAction('" + a + "','mouseover', this)\""), d += "></a>" }

function render_menu_dropdown(a) { var b, c = [11, 12, 14, 16, 18, 20, 24, 30, 36, 48, 60, 72],
        d = [{ name: JS_RSS_TITLE_MERGE, value: "[RSS:Title]" }, { name: JS_RSS_DESCRIPTION_MERGE, value: "[RSS:Description]" }, { name: JS_RSS_DATE_MERGE, value: "[RSS:Date]" }, { name: JS_RSS_LINK_MERGE, value: "[RSS:Link]" }],
        e = [{ name: JS_RSS_FEED_TITLE_MERGE, value: "[RSSItem:Title]" }, { name: JS_RSS_FEED_DESCRIPTON_MERGE, value: "[RSSItem:Description]" }, { name: JS_RSS_FEED_DATE_MERGE, value: "[RSSItem:Date]" }, { name: JS_RSS_FEED_LINK_MERGE, value: "[RSSItem:Link]" }, { name: JS_RSS_FEED_CONTENT_MERGE, value: "[RSSItem:Content]" }, { name: JS_RSS_FEED_AUTHOR_MERGE, value: "[RSSItem:Author]" }, { name: JS_RSS_FEED_IMAGE_MERGE, value: "[RSSItem:Image]" }, { name: JS_RSS_FEED_CATEGORY_MERGE, value: "[RSSItem:Category]" }],
        f = [{ name: JS_ALIGN_LEFT, value: "left" }, { name: JS_ALIGN_CENTER, value: "center" }, { name: JS_ALIGN_RIGHT, value: "right" }, { name: JS_JUSTIFY, value: "justify" }],
        g = [{ name: JS_FORWARD, value: "forward" }, { name: JS_GREETING, value: "greeting" }, { name: JS_CONTACT_DETAILS, value: "personalize" }, { name: JS_SURVEY, value: "survey" }, { name: JS_FB_LIKE_BUTTON, value: "likebutton" }]; if ("fontfamily" == a ? b = aFontMenu2.split("^") : "fontsize" == a ? b = c : "rsshead" == a ? b = d : "rssfeed" == a ? b = e : "align" == a ? b = f : "merge" == a && (b = g), html = "", b) { html += '<div class="format-tool-menu">'; for (var h = 0, i = b.length; h < i; h++)
            if ("fontfamily" == a) { var j = b[h].split("|");
                html += "<a onClick=\"javascript:ToolCommand('" + a + "', this);\" style='font-family:" + Replace(j[1], "'", '"') + ";' value='" + Replace(j[1], "'", '"') + "'>" + j[0] + "</a>" } else "fontsize" == a ? html += "<a onClick=\"javascript:ToolCommand('" + a + '\', this);" value="' + b[h] + 'px">' + b[h] + "</a>" : "align" == a ? html += "<a onClick=\"javascript:ToolCommand('" + a + '\', this);" class="tool-icon tool-align' + b[h].value + '" value="' + b[h].value + '" title="' + b[h].name + '"></a>' : "merge" == a ? html += "<a onClick=\"javascript:ToolCommand('" + b[h].value + '\', this);" value="' + b[h].value + '">' + b[h].name + "</a>" : html += "<a onClick=\"javascript:ToolCommand('" + a + '\', this);" value="' + b[h].value + '">' + b[h].name + "</a>";
        html += "</div>" } return html }

function render_panel_BorderStyleOptions() { var a = [{ name: JS_NONE, value: "none" }, { name: JS_SOLID, value: "solid" }, { name: JS_DASHED, value: "dashed" }, { name: JS_DOTTED, value: "dotted" }, { name: JS_BORDER_DOUBLE, value: "double" }, { name: JS_GROOVE, value: "groove" }, { name: JS_RIDGE, value: "ridge" }, { name: JS_INSET, value: "inset" }, { name: JS_OUTSET, value: "outset" }]; if (!template_panel_BorderStyleOptions_rendered) { var b = "";
        b += "<ul id=panelBorderStyle class='formbox-option-dd formbox-option-dd-borderstyle'>"; for (var c = 0, d = a.length; c < d; c++) b += '<li title="' + a[c].name + '" data-value="' + a[c].value + "\" onclick=\"javascript:applyBorderStyle(this,'#ctrlBorderStyle','" + a[c].value + "');\"><span class='border-style-icons border-style-icons-" + a[c].value + "'></span></li>";
        b += "</ul>", $(document.body).append(b), template_panel_BorderStyleOptions_rendered = !0 } }

function render_alert_address(a, b) { $("#alertPanel").remove(); var c = "";
    c += '<div id="alertPanel" class="msg-' + a + '">' + b + "</div>", $(document.body).append(c), $("#alertPanel").fadeIn(100) }

function clearBookmarks() { if ($("span[data-mce-type=bookmark]", $(tinyMCE.activeEditor.getBody())).length > 0) { var a = !0;
        $(".colorpicker_layer").is(":visible") && (a = !1), a && $("span[data-mce-type=bookmark]", $(tinyMCE.activeEditor.getBody())).remove() } }

function SetSelection() { if (tinyMCE.activeEditor) { var a = tinyMCE.activeEditor;
        null != currentSelection && a.selection.select(currentSelection), a && (currentSelectedText = a.selection.getContent(), currentSelectedText.length > 0 ? (clearBookmarks(), currentBookmark = a.selection.getBookmark(), isIE || a.selection.moveToBookmark(currentBookmark)) : isIE && (clearBookmarks(), currentBookmark = tinyMCE.activeEditor.selection.getBookmark())) } }

function LoadTiny(what, areaID, align) { var pluginSet = "autoresize,lists,pagebreak,style,layer,table,save,advhr,emotions,iespell,preview,media,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template,wordcount,advlist,-BMEPlugin",
        buttonSet1 = "bold,italic,insertlink,bullist,numlist,clearstyle,fontfamily,fontsize,color,justifyleft,justifycenter,justifyright,justifyfull",
        skinName = "cirkuit",
        allow_resize = !1,
        status_location = "",
        minHeight = 25,
        convert_fonts_to_spans_val = !0,
        autoresize = !0,
        edit_width = $(what).width(),
        edit_height = $(what).height(),
        whatContent = $(what).html();
    null == areaID && (areaID = "txaEditableContent"), tinyMCE.init({ mode: "none", theme: "advanced", plugins: pluginSet, theme_advanced_buttons1: "", theme_advanced_buttons2: "", theme_advanced_buttons3: "", theme_advanced_buttons4: "", forced_root_block: !0, theme_advanced_toolbar_location: "external", skin: skinName, convert_fonts_to_spans: convert_fonts_to_spans_val, theme_advanced_toolbar_align: "left", theme_advanced_resizing: !0, auto_resize: autoresize, autoresize_on_init: !1, autoresize_min_height: 25, autoresize_min_width: 25, autoresize_max_width: 700, autoresize_bottom_margin: 50, paste_auto_cleanup_on_paste: !0, width: edit_width, height: edit_height, relative_urls: !1, theme_advanced_resizing_min_height: minHeight, theme_advanced_statusbar_location: "", cleanup: !0, cleanup_on_startup: !0, allow_html_in_named_anchor: !0, forced_root_block: !1, force_br_newlines: !0, force_p_newlines: !1, convert_urls: !1, paste_text_sticky: !0, paste_block_drop: !0, verify_html: !0, object_resizing: !1, paste_preprocess: function (a, b) { var c = $("<div>" + b.content + "</div>");
            c.find("*").each(function () { var a = $(this); if (a.removeAttr("id").removeClass(), a.is('[name^= "blk"]') || a.is('[name^= "tbl"]')) { var b = $.map(this.attributes, function (a) { return a.name });
                    $.each(b, function (b, c) { a.removeAttr(c) }), a.attr("cellspacing", "0"), a.attr("cellpadding", "0"), a.attr("border", "0"), a.attr("align", "left") } else a.is("style") && a.remove() }), b.content = c.html() }, valid_children: "+body[style|font]", extended_valid_elements: "a[rel|rev|charset|hreflang|tabindex|accesskey|id|type|name|href|target|title|class|survey|event|forward|style],style[dir<ltr?rtl|lang|media|title|type],font[class|color|dir<ltr?rtl|face|id|lang|size|style|title],var[class|dir<ltr?rtl|id|lang|style|title|type|field|pretext|alttext|fieldtext|vid],img[id|class|style|title|lang|dir|caption|src|alt|name|longdesc|width|height|usemap|ismap|align|border|hspace|vspace|imgid|uniqueid],table[align|bgcolor|border|cellpadding|cellspacing|class|frame|height|id|lang|rules|style|summary|title|width|name|background|uniqueid|dir<ltr?rtl],td[custom|abbr|align|axis|bgcolor|char|charoff|class|colspan|dir|headers|height|id|lang|nowrap|rowspan|scope|style|title|valign|width|background],video,source,ul[class|compact<compact|dir<ltr?rtl|id|lang|style|title|type]", init_instance_callback: function (a) { a.execCommand("mceAutoResize") }, setup: function (ed) { preSetup(ed), ed.onNodeChange.add(function (ed, o) { $(".format-tool-menu").removeClass("visible"), null == currentToolOption && (clearBookmarks(), checkEditorSize(ed), currentBookmark = null, "undefined" != typeof detectEditorFocus && null != detectEditorFocus && 0 != detectEditorFocus && eval(detectEditorFocus)) }), ed.onKeyDown.add(function (a, b) { $(".format-tool-menu").removeClass("visible"), null == currentToolOption && (clearBookmarks(), checkEditorSize(a)) }), ed.onClick.add(function (a, b) { checkEditorNode(a, b) }), ed.onLoadContent.add(function (ed, o) { preLoadContent(ed, o), $("#" + areaID + "_external").addClass("hidden"), "undefined" != typeof detectEditorLoad && null != detectEditorLoad && eval(detectEditorLoad) }), ed.onInit.add(function (ed) { $("#" + areaID + "_ifr").height(edit_height), tinymce.dom.Event.add(ed.getBody(), "dragenter", function (a) { return tinymce.dom.Event.cancel(a) }); var bodystyle = ""; "none" != $(what).css("background-image") ? (bodystyle += "background-image:" + $("#" + currentEdit).css("background-image") + " !important;", bodystyle += "background-repeat:" + $("#" + currentEdit).css("background-repeat") + " !important;") : bodystyle += "background-image:none !important;", bodystyle += "color:" + $(what).css("color") + " !important;", bodystyle += "font-size:" + $(what).css("font-size") + " !important;", bodystyle += "font-family:" + $(what).css("font-family") + " !important;", $("<style id=_stybodybg>body{" + bodystyle + "} </style>").appendTo(ed.dom.doc.head), null != align && "" != align && $(ed.dom.select("body")).css("text-align", align), $("#" + areaID + "_pastetext").addClass("mceButtonActive"), ed.onPaste.addToTop(function (a, b) { $("#" + areaID + "_pastetext").hasClass("mceButtonActive") && (a.pasteAsPlainText = !0) }), $("#" + areaID + "_external").addClass("hidden"), "undefined" != typeof detectEditorInit && null != detectEditorInit && eval(detectEditorInit) }) } }), $(what).html(""), whatContent = fixLoadTextContent(whatContent), $("<div id=editText" + areaID + "><textarea id=" + areaID + ">" + whatContent + "</textarea></div>").appendTo(what), tinyMCE.execCommand("mceAddControl", !1, areaID), "undefined" != typeof detectEditorLoad && null != detectEditorLoad && eval(detectEditorLoad), window.setTimeout(checkEditorSize, 2e3) }

function preSetup(a) { a.onNodeChange.add(function (a, b, c) { CheckEditor(a, c) }), a.onDblClick.add(function (a, b) { ResetMenu(), currentVariable = null, currentImage = null, currentVideo = null, breakout = !1; var c = b.target.nodeName; if ("IMG" == c) { IsImage(!0, 1), currentImage = b.target, currentImage.caption = GetImageCaptionNew(currentImage); try { var d = $(b.target).parent().get(0),
                    e = $(d).parent().get(0); "A" == Trim(d.tagName) && "VAR" == Trim(e.tagName) && "video" == $(e).attr("type") && (currentVideo = e, currentImage = null, IsVideo(!0, 1), IsImage(!1, 0), IsLink(!1, 0), IsBookmark(!1, 0), IsDocument(!1, 0), breakout = !0) } catch (b) {} for (var f = 1; 1 == f;) "A" == Trim(d.tagName) || "VAR" == Trim(d.tagName) || "TD" == Trim(d.tagName) || "TR" == Trim(d.tagName) || "TBODY" == Trim(d.tagName) || "TABLE" == Trim(d.tagName) ? "TABLE" == Trim(d.tagName) && "imgHolder" == $(d).attr("name") ? (tinyMCE.activeEditor.selection.select(d), currentImage.caption = GetImageCaptionNew(d), alignElement = d, null == currentVideo && (IsImage(!0, 0), breakout = !0), f = 0) : d = $(d).parent().get(0) : f = -1;
            null != currentImage || OpenVideoEdit() } var g = b.target; if (0 == breakout)
            if (null != g) { for (;
                    "A" != g.nodeName && "VAR" != g.nodeName && "BODY" != g.nodeName;) g = g.parentNode; "A" == g.nodeName || "VAR" == g.nodeName ? c = g.nodeName : g = b.target } else breakout = !0; if ("A" == c && 0 == breakout)
            if (currentVariable = g, tinyMCE.activeEditor.selection.select(currentVariable), "1" == $(currentVariable).attr("survey")) IsSurvey(!0, 1), breakout = !0, OpenSurveyDialog(!0);
            else if ("1" == $(currentVariable).attr("forward")) IsForward(!0, 1), breakout = !0, OpenForwardDialog(!0);
        else { var h = $(currentVariable).attr("name"),
                i = 0;
            h && h.length > 0 && (IsBookmark(!0, 1), i = 1, breakout = !0, OpenAnchorDialog(!0)), 0 == i && (IsLink(!0, 1), breakout = !0, OpenLinkDialog(!0)) } "VAR" == c && 0 == breakout && (currentVariable = g, tinyMCE.activeEditor.selection.select(currentVariable), vartype = $(currentVariable).attr("type"), vartype && ("contact_detail" == vartype && (IsContact(!0, 1), OpenPersonalizeDialog(!0)), "greeting" == vartype ? (IsGreeting(!0, 1), currentGreetingVariable = currentVariable, OpenGreetingDialog(!0)) : "survey" == vartype ? (IsSurvey(!0, 1), OpenSurveyDialog()) : "event" == vartype ? (IsEvent(!0, 1), OpenEventEdit()) : "forward" == vartype ? (IsForward(!0, 1), OpenForwardDialog(!0)) : "video" == vartype && (IsVideo(!0, 1), currentImage = null, IsImage(!1, 0), IsLink(!1, 0), IsBookmark(!1, 0), IsDocument(!1, 0)))) }) }

function ResetMenu() { IsUnorderedList(!1, 0), IsOrderedList(!1, 0), Outdented(!1, 0), Indented(!1, 0), IsLink(!1, 0), IsBookmark(!1, 0), IsDocument(!1, 0), IsGreeting(!1, 0), IsImage(!1, 0), IsVideo(!1, 0), IsSurvey(!1, 0), IsGreeting(!1, 0), IsForward(!1, 0), IsContact(!1, 0), IsEvent(!1, 0), currentImage = null, currentVariable = null }

function IsGreeting(a, b) { SwitchImage(".format-merge", a, b) }

function IsUnorderedList(a, b) { SwitchImage(".tool-bullist", a, b) }

function IsOrderedList(a, b) { SwitchImage(".tool-numlist", a, b) }

function Outdented(a, b) { SwitchImage(".tool-undent", a, b) }

function Indented(a, b) { SwitchImage(".tool-indent", a, b) }

function IsLink(a, b) { SwitchImage(".tool-link", a, b), a ? $(".tool-unlink").removeClass("tool-disabled") : $(".tool-unlink").removeClass("tool-disabled").addClass("tool-disabled") }

function IsDocument(a, b) { SwitchImage(".tool-link", a, b) }

function IsBookmark(a, b) { SwitchImage(".tool-anchor", a, b), 1 == a && IsLink(!1, b) }

function IsForward(a, b) { SwitchImage(".format-merge", a, b) }

function IsGreeting(a, b) { SwitchImage(".format-merge", a, b) }

function IsImage(a, b) { SwitchImage(".tool-image", a, b) }

function IsUnderline(a, b) { SwitchImage(".tool-underline", a, b) }

function IsStrike(a, b) { SwitchImage(".tool-strike", a, b) }

function IsVideo(a, b) { SwitchImage(".tool-video", a, b) }

function IsSurvey(a, b) { SwitchImage(".format-merge", a, b) }

function IsEvent(a, b) { SwitchImage(".format-merge", a, b) }

function IsContact(a, b) { SwitchImage(".format-merge", a, b) }

function IsBold(a, b) { SwitchImage(".tool-bold", a, b) }

function IsItalic(a, b) { SwitchImage(".tool-italic", a, b) }

function SetFontFamily(a) { var b = a,
        c = "",
        d = 0,
        e = -1;
    $("a", $(".format-tool-menu", $(".format-font-style", toolbarCtrl))).each(function () { if (0 != e) { if (c = $(this).attr("value"), c = Replace(Replace(Replace(c, "'", ""), '"', ""), " ", ""), a = Replace(Replace(Replace(a, "'", ""), '"', ""), " ", ""), a.indexOf(",") != -1 && (a = a.substring(0, a.indexOf(","))), c.indexOf(",") != -1)
                for (var f = c.split(","), g = 0; g < f.length; g++) Replace(Replace(Replace(f[g], "'", ""), '"', ""), " ", "") == Replace(a, " ", "") && ((e > g || e == -1) && (b = $(this).html(), e = g), d = 1);
            c == a && 0 == d && (b = $(this).html(), d = 1) } }), $("a.tool-btn", $(".format-font-style", toolbarCtrl)).html(b) }

function applyAlignmentStyle(a, b) { var c = $(b).data("blocktype"),
        d = $(a).closest("ul"),
        e = $(a).data("value");
    $(b).val(e), selectChangeHandler(c, b), d.find("li").removeClass("selected"), $(a).addClass("selected") }

function applyAlignSelectedState(a, b) { $(a).find("li").removeClass("selected"), $(a).find('li[data-value="' + b + '"]').addClass("selected") }
var activeAreas = [],
    isGlobalStyle = !1,
    globalStyleBorderID = "",
    tmpColorVal = "",
    tinyMCEColorVal = "",
    forceFallbackValue = !0,
    isFirefox = "undefined" != typeof InstallTrigger,
    isIE8toEdge = !1;
(document.documentMode || /Edge/.test(navigator.userAgent)) && (isIE8toEdge = !0);
var integration_SurveyMonkey_connected = "",
    integration_LinkedIn_connected = "",
    integration_LinkedIn_data = null;
$(document).on("click", "#btnIntegration", function () { loginIntegration() }), $(document).on("change", "#selSurveyMonkeyID", function () { SMGetLinkList() }), $(document).on("change", "#selSurveyMonkeyLinkList", function () { SMGetLinkSelect() }), $(document).on("click", "#btnSurveyIntegrate", function () { bmeAjax.PreLoader("#btnSurveyIntegrate"); var a = $("#smLinkTxt").val(),
        b = $("#selSurveyMonkeyLinkList").val();
    $("#surveyMonkeyBtns").addClass("hidden"); var c = $("#integrationsSurveyMonkey").attr("eid");
    _LAYOUT_LOADING = "1"; var d = '{"Text":"' + a + '","Link":"' + b + '"}';
    bmeAjax.AuthPost({ url: "/Emails/Integrate/" + _EID, type: "POST", data: { Language: languageVal, IntegrationType: "surveymonkey", TemplateID: c, Detail: d }, success: function (a) { "0" == _IS_SAVED ? (bmeAjax.RemovePreLoader("#btnSurveyIntegrate"), InitPage()) : (cancelIntegration(), refreshPage(), _IS_SAVED = 1) } }) }), $(document).on("change", "#linkedinCompanyPage_Select", function () { "" != $(this).val() ? $("#btnLinkedInIntegrate").prop("disabled", !1) : $("#btnLinkedInIntegrate").prop("disabled", !0) }), $(document).on("click", "#btnLinkedInIntegrate", function () { bmeAjax.PreLoader("#btnLinkedInIntegrate"); var a = $("#integrationsLinkedIn").attr("eid"),
        b = $("#linkedinCompanyPage_Select").val();
    _LAYOUT_LOADING = "1"; var c = ""; if (null !== integration_LinkedIn_data) { var d = integration_LinkedIn_data[b];
        c += "{", c += '"[Company.Name]":"', c += d.details.name, c += '",', null !== d.details.logoUrl ? (c += '"[Company.Logo]":"', c += '<img src=\\"' + d.details.logoUrl + '\\" width=\\"560\\" style=\\"max-width: 600px; display: block;\\">', c += '",') : (c += '"[Company.Logo]":"', c += "", c += '",'), null !== d.details.industries ? (c += '"[Company.Industry]":"', c += d.details.industries.values[0].name, c += '",') : (c += '"[Company.Industry]":"', c += '",'); for (var e = 0, f = 3; e < f; e++)
            if (void 0 !== d.updates[e])
                if ("anyone" == d.updates[e].statusUpdate.visibility) { c += '"[Status_Update.Result' + e + '.Text]":"'; var g = d.updates[e].statusUpdate.comment;
                    g = g.replace(/"/g, '\\"'), c += g, c += '",', null !== d.updates[e].statusUpdate.submittedImageUrl ? (c += '"[Status_Update.Result' + e + '.Image]":"', c += '<img src=\\"' + d.updates[e].statusUpdate.submittedImageUrl + '\\" width=\\"160\\" style=\\"max-width: 800px; display: block;\\" alt=\\"\\" border=\\"0\\">', c += '",') : (c += '"[Status_Update.Result' + e + '.Image]":"', c += '",'), c += '"Result' + e + '.Visible":"', c += '",' } else c += '"Result' + e + '.Visible":"', c += 'data-remove=\\"true\\"', c += '",';
        else c += '"[Status_Update.Result' + e + '.Image]":"', c += '",', c += '"Result' + e + '.Visible":"', c += 'data-remove=\\"true\\"', c += '",';
        null !== d.details.universalName ? (c += '"LinkedIn.Follow":"', c += "https://www.linkedin.com/company/" + d.details.universalName, c += '"') : (c += '"LinkedIn.Follow":"', c += "#", c += '"'), c += "}" } bmeAjax.AuthPost({ url: "/Emails/Integrate/" + _EID, type: "POST", data: { Language: languageVal, IntegrationType: "linkedin", TemplateID: a, Detail: c }, success: function (a) { "0" == _IS_SAVED ? (bmeAjax.RemovePreLoader("#btnLinkedInIntegrate"), InitPage()) : (cancelIntegration(), refreshPage(), _IS_SAVED = 1) } }) }), $(document).on("click", "#btneBayConnect", function () { eBayShowSelectItems() }), $(document).on("click", "input[name=chkItems]", function () { var a = "";
    $("input[name=chkItems]:checked").each(function () { "" != a && (a += ","), a += $(this).val() }), "" != a ? $("#btneBayConnect2").prop("disabled", !1) : $("#btneBayConnect2").prop("disabled", !0) }), $(document).on("keyup", "#ebaySellerID", function () { var a = $(this).val().trim(),
        b = $("#btneBayConnect"); "" != a ? b.prop("disabled", !1) : b.prop("disabled", !0) }), $(document).on("change", "#ebayRegionalSiteSelection_Select", function () { var a = $(this).val();
    $("#btneBayConnect2");
    $("#btneBayConnect2").prop("disabled", !0), "" != a ? ebayShowItems() : $("#ebayItems").empty() }), $(document).on("keyup change input", "#ebaySellerID", function () { "" != $(this).val() ? $(".ebayConnect").removeClass("hidden") : $(".ebayConnect").addClass("hidden") }), $(document).on("click", ".ebay-items-container label", function () { var a = $(".ebay-items-container input:checkbox").is(":checked");
    a ? $(".ebaySelect").removeClass("hidden") : $(".ebaySelect").addClass("hidden") }), $(document).on("click", "#btneBayConnect2", function () { var a = "ebay";
    bmeAjax.PreLoader("#btneBayConnect2"); var b = "";
    $("input[name=chkItems]:checked").each(function () { "" != b && (b += ","), b += $(this).val() }); var c = $("#integrationseBay").attr("eid"),
        d = $("#ebaySellerID").val();
    _LAYOUT_LOADING = "1", $.post("/xdc/json/EmailIntegratedTemplateLayoutUse", { eid: _EID, usetid: c, language: languageVal, type: a, extra1: d, extra2: b }, function (a) { cancelIntegration(), refreshPage(), _IS_SAVED = 1 }) }), $(document).on("click", "#etsyConnect", function () { EtsyStoreNameGetSectionList() }), $(document).on("click", "#etsyConnect2", function () { bmeAjax.PreLoader("#etsyConnect2"); var a = "etsy",
        b = $("#integrationsEtsy").attr("eid"),
        c = $("#etsyStoreSection_Select").val();
    $("#etsyStoreSection_Select option:selected").text();
    _LAYOUT_LOADING = "1", $.post("/xdc/json/EmailIntegratedTemplateLayoutUse", { eid: _EID, usetid: b, language: languageVal, type: a, extra1: etsyStoreID, extra2: c }, function (a) { cancelIntegration(), refreshPage(), _IS_SAVED = 1 }) }), $(document).on("keyup change input", "#etsyStoreName", function () { "" != $(this).val() ? $("#etsyConnect").prop("disabled", !1) : $("#etsyConnect").prop("disabled", !0) }), $(document).on("change", "#etsyStoreSection_Select", function () { "" != $(this).val() ? (etsyConnect2, $("#etsyConnect2").prop("disabled", !1)) : $("#etsyConnect2etsyConnect2").prop("disabled", !0) }), $(document).on("click", "#pinterestBoard_Select", function () { var a = $("#pinterestBoard_Select input:checkbox").is(":checked");
    a ? $("#pinterestConnect").prop("disabled", !1) : $(".pinterestConnect").prop("disabled", !0) }), $(document).on("click", "#pinterestConnect", function () { bmeAjax.PreLoader("#pinterestConnect"); var a = "pinterest",
        b = $("#integrationsPinterest").attr("eid"),
        c = "";
    $("input[name=chkBoards]:checked").each(function () { "" != c && (c += ","), c += $(this).val() }), _LAYOUT_LOADING = "1", $.post("/xdc/json/EmailIntegratedTemplateLayoutUse", { eid: _EID, usetid: b, language: languageVal, type: a, extra1: c }, function (a) { cancelIntegration(), refreshPage(), _IS_SAVED = 1 }) }), $(document).on("click", "#btnFacebookEventsIntegrate", function () { bmeAjax.PreLoader("#btnFacebookEventsIntegrate"); var a = "facebookevents",
        b = $("#integrationsFacebook").attr("eid"),
        c = $("#selFacebookEventsList").val();
    _LAYOUT_LOADING = "1", $.post("/xdc/json/EmailIntegratedTemplateLayoutUse", { eid: _EID, usetid: b, language: languageVal, type: a, extra1: c, extra2: "" }, function (a) { cancelIntegration(), refreshPage(), _IS_SAVED = 1 }) }), $(document).on("change", "#selFacebookEventsList", function () { "" != $(this).val() ? $("#btnFacebookEventsIntegrate").prop("disabled", !1) : $("#btnFacebookEventsIntegrate").prop("disabled", !0) }), $(document).on("click", "input[name=chkeventbrite]", function () { var a = "";
    $("input[name=chkeventbrite]:checked").each(function () { "" != a && (a += ","), a += $(this).val() }), "" != a ? $("#btnEventbriteIntegrate").prop("disabled", !1) : $("#btnEventbriteIntegrate").prop("disabled", !0) }), $(document).on("change", "#eventbriteSelect", function () { "" != $(this).val() ? $("#btnEventbriteIntegrate").prop("disabled", !1) : $("#btnEventbriteIntegrate").prop("disabled", !0) }), $(document).on("click", "#btnEventbriteIntegrate", function () {
    bmeAjax.PreLoader("#btnEventbriteIntegrate");
    var a = $("#integrationsEventbrite").attr("which");
    $("#tdEventbriteListError").addClass("hidden");
    var b = "";
    "eventbrite1" == a ? b += $("#eventbriteSelect").val() : $("input[name=chkeventbrite]:checked").each(function () { "" != b && (b += ","), b += $(this).val() });
    var c = $("#integrationsEventbrite").attr("eid");
    _LAYOUT_LOADING = "1", $.post("/xdc/json/EmailIntegratedTemplateLayoutUse", { eid: _EID, usetid: c, language: languageVal, type: a, extra1: b, extra2: "" }, function (a) {
        cancelIntegration(),
            refreshPage(), _IS_SAVED = 1
    })
});
var showTooltipInEditor = !1,
    onboardingMask = -1,
    is_subaccounts_loaded = !1,
    availableSpace = "",
    numOfVisibleItems = "",
    requiredSpace = "",
    numOfItems = 0,
    totalSpace = 0,
    breakWidths = [],
    rtime, rtimeout = !1,
    delta = 200,
    greedyNavCheckDebounce = debounce(function () { $("div.vtools").css("overflow", "hidden"), rtime = new Date, rtimeout === !1 && (rtimeout = !0, setTimeout(resizeend, delta)), greedyNavReset(), initGreedyNav() }, 250),
    template_panel_BorderStyleOptions_rendered = !1;
