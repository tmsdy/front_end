<!-- 

依赖收集方法：Dep.depend()

class Dep(){
    constructor(){
        this.id = uid++ ;
        this.subs = [] ;
    }
    addSub(sub:Watcher){
        this.subs.push(sub) ;
    }
    removeSub(sub:Watcher){
        remove(this.subs,sub) ;
    }
    depend(){
        if(Dep.target){
            Dep.target.addDep(this) ; //addDep是Watcher里面定义的
        }
    }
    notify(){
        const subs = this.subs.slice() ;
        for(let i = 0 ,l=subs.length; i<l ;i++){
            subs[i].update() ;
        }
    }

}

class Watcher{
    vm:Component ;
    ...
    dep:Dep;
    depIds:SimpleSet;
    newDepIds:SimpleSet;

    addDep(dep:Dep){
        const id = dep.id ;
        if(!this.newDepIds.has(id)){
            this.newDepIds.add(id) ;
            this.newDeps.push(dep) ;
            if(!this.depIds.has(id)){
                dep.addSubs(this) ;
            }
        }
    }

}




    
 -->